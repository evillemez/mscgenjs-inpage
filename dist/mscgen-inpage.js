/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */

/*
 This file is part of mscgen_js.

 mscgen_js is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 mscgen_js is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with mscgen_js.  If not, see <http://www.gnu.org/licenses/>.
 */

/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="umd" include="memoize,cloneDeep,flatten,defaults" --development --output lib/lodash/lodash.custom.js`
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

!function(){var t,e,r;!function(n){function o(t,e){return v.call(t,e)}function i(t,e){var r,n,o,i,a,c,s,u,l,d,f,h,g=e&&e.split("/"),p=y.map,m=p&&p["*"]||{};if(t){for(t=t.split("/"),a=t.length-1,y.nodeIdCompat&&k.test(t[a])&&(t[a]=t[a].replace(k,"")),"."===t[0].charAt(0)&&g&&(h=g.slice(0,g.length-1),t=h.concat(t)),l=0;l<t.length;l++)if(f=t[l],"."===f)t.splice(l,1),l-=1;else if(".."===f){if(0===l||1===l&&".."===t[2]||".."===t[l-1])continue;l>0&&(t.splice(l-1,2),l-=2)}t=t.join("/")}if((g||m)&&p){for(r=t.split("/"),l=r.length;l>0;l-=1){if(n=r.slice(0,l).join("/"),g)for(d=g.length;d>0;d-=1)if(o=p[g.slice(0,d).join("/")],o&&(o=o[n])){i=o,c=l;break}if(i)break;!s&&m&&m[n]&&(s=m[n],u=l)}!i&&s&&(i=s,c=u),i&&(r.splice(0,c,i),t=r.join("/"))}return t}function a(t,e){return function(){var r=C.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),g.apply(n,r.concat([t,e]))}}function c(t){return function(e){return i(e,t)}}function s(t){return function(e){b[t]=e}}function u(t){if(o(x,t)){var e=x[t];delete x[t],w[t]=!0,h.apply(n,e)}if(!o(b,t)&&!o(w,t))throw new Error("No "+t);return b[t]}function l(t){var e,r=t?t.indexOf("!"):-1;return r>-1&&(e=t.substring(0,r),t=t.substring(r+1,t.length)),[e,t]}function d(t){return t?l(t):[]}function f(t){return function(){return y&&y.config&&y.config[t]||{}}}var h,g,p,m,b={},x={},y={},w={},v=Object.prototype.hasOwnProperty,C=[].slice,k=/\.js$/;p=function(t,e){var r,n=l(t),o=n[0],a=e[1];return t=n[1],o&&(o=i(o,a),r=u(o)),o?t=r&&r.normalize?r.normalize(t,c(a)):i(t,a):(t=i(t,a),n=l(t),o=n[0],t=n[1],o&&(r=u(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:r}},m={require:function(t){return a(t)},exports:function(t){var e=b[t];return"undefined"!=typeof e?e:b[t]={}},module:function(t){return{id:t,uri:"",exports:b[t],config:f(t)}}},h=function(t,e,r,i){var c,l,f,h,g,y,v,C=[],k=typeof r;if(i=i||t,y=d(i),"undefined"===k||"function"===k){for(e=!e.length&&r.length?["require","exports","module"]:e,g=0;g<e.length;g+=1)if(h=p(e[g],y),l=h.f,"require"===l)C[g]=m.require(t);else if("exports"===l)C[g]=m.exports(t),v=!0;else if("module"===l)c=C[g]=m.module(t);else if(o(b,l)||o(x,l)||o(w,l))C[g]=u(l);else{if(!h.p)throw new Error(t+" missing "+l);h.p.load(h.n,a(i,!0),s(l),{}),C[g]=b[l]}f=r?r.apply(b[t],C):void 0,t&&(c&&c.exports!==n&&c.exports!==b[t]?b[t]=c.exports:f===n&&v||(b[t]=f))}else t&&(b[t]=r)},t=e=g=function(t,e,r,o,i){if("string"==typeof t)return m[t]?m[t](e):u(p(t,d(e)).f);if(!t.splice){if(y=t,y.deps&&g(y.deps,y.callback),!e)return;e.splice?(t=e,e=r,r=null):t=n}return e=e||function(){},"function"==typeof r&&(r=o,o=i),o?h(n,t,e,r):setTimeout(function(){h(n,t,e,r)},4),g},g.config=function(t){return g(t)},t._defined=b,r=function(t,e,r){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(r=e,e=[]),o(b,t)||o(x,t)||(x[t]=[t,e,r])},r.amd={jQuery:!0}}(),r("../node_modules/almond/almond",function(){}),function(t,e){"function"==typeof r&&r.amd?r("lib/mscgenjs-core/parse/xuparser",[],e):"object"==typeof module&&module.exports&&(module.exports=e())}(this,function(){"use strict";function t(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function e(t,r,n,o){this.message=t,this.expected=r,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function r(t,r){function n(){return d(gi,hi)}function o(t,e){throw e=void 0!==e?e:d(gi,hi),h(t,e)}function i(t,e){return{type:"literal",text:t,ignoreCase:e}}function a(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function c(){return{type:"any"}}function s(){return{type:"end"}}function u(t){return{type:"other",description:t}}function l(e){var r,n=pi[e];if(n)return n;for(r=e-1;!pi[r];)r--;for(n=pi[r],n={line:n.line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return pi[e]=n,n}function d(t,e){var r=l(t),n=l(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function f(t){hi<mi||(hi>mi&&(mi=hi,bi=[]),bi.push(t))}function h(t,r){return new e(t,null,null,r)}function g(t,r,n){return new e(e.buildMessage(t,r),t,r,n)}function p(){var e,r,n,o,i,a,c,s,u,l;return e=hi,r=et(),r!==Tt?(n=m(),n!==Tt?(o=et(),o!==Tt?(123===t.charCodeAt(hi)?(i=Et,hi++):(i=Tt,0===xi&&f(jt)),i!==Tt?(a=et(),a!==Tt?(c=b(),c!==Tt?(s=et(),s!==Tt?(125===t.charCodeAt(hi)?(u=Pt,hi++):(u=Tt,0===xi&&f(Ft)),u!==Tt?(l=et(),l!==Tt?(gi=e,r=Bt(r,c),e=r):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt),e}function m(){var e;return t.substr(hi,3).toLowerCase()===Dt?(e=t.substr(hi,3),hi+=3):(e=Tt,0===xi&&f(It)),e===Tt&&(t.substr(hi,2).toLowerCase()===Mt?(e=t.substr(hi,2),hi+=2):(e=Tt,0===xi&&f(Nt))),e}function b(){var t,e,r,n;return t=hi,e=x(),e===Tt&&(e=null),e!==Tt?(r=w(),r===Tt&&(r=null),r!==Tt?(n=C(),n===Tt&&(n=null),n!==Tt?(gi=t,e=Ot(e,r,n),t=e):(hi=t,t=Tt)):(hi=t,t=Tt)):(hi=t,t=Tt),t}function x(){var e,r,n,o,i,a;for(e=hi,r=hi,n=[],o=hi,i=y(),i!==Tt?(44===t.charCodeAt(hi)?(a=Ht,hi++):(a=Tt,0===xi&&f(Wt)),a!==Tt?(gi=o,i=Rt(i),o=i):(hi=o,o=Tt)):(hi=o,o=Tt);o!==Tt;)n.push(o),o=hi,i=y(),i!==Tt?(44===t.charCodeAt(hi)?(a=Ht,hi++):(a=Tt,0===xi&&f(Wt)),a!==Tt?(gi=o,i=Rt(i),o=i):(hi=o,o=Tt)):(hi=o,o=Tt);return n!==Tt?(o=hi,i=y(),i!==Tt?(59===t.charCodeAt(hi)?(a=zt,hi++):(a=Tt,0===xi&&f(Gt)),a!==Tt?(gi=o,i=Rt(i),o=i):(hi=o,o=Tt)):(hi=o,o=Tt),o!==Tt?(n=[n,o],r=n):(hi=r,r=Tt)):(hi=r,r=Tt),r!==Tt&&(gi=e,r=qt(r)),e=r}function y(){var e,r,n,o,i,a,c,s;return xi++,e=hi,r=et(),r!==Tt?(t.substr(hi,6).toLowerCase()===Ut?(n=t.substr(hi,6),hi+=6):(n=Tt,0===xi&&f(Vt)),n===Tt&&(t.substr(hi,11).toLowerCase()===Kt?(n=t.substr(hi,11),hi+=11):(n=Tt,0===xi&&f(Yt))),n!==Tt?(o=et(),o!==Tt?(61===t.charCodeAt(hi)?(i=Zt,hi++):(i=Tt,0===xi&&f($t)),i!==Tt?(a=et(),a!==Tt?(c=rt(),c!==Tt?(s=et(),s!==Tt?(gi=e,r=Jt(n,c),e=r):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt),e===Tt&&(e=hi,r=et(),r!==Tt?(t.substr(hi,5).toLowerCase()===Qt?(n=t.substr(hi,5),hi+=5):(n=Tt,0===xi&&f(te)),n!==Tt?(o=et(),o!==Tt?(61===t.charCodeAt(hi)?(i=Zt,hi++):(i=Tt,0===xi&&f($t)),i!==Tt?(a=et(),a!==Tt?(c=lt(),c!==Tt?(s=et(),s!==Tt?(gi=e,r=Jt(n,c),e=r):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt),e===Tt&&(e=hi,r=et(),r!==Tt?(t.substr(hi,12).toLowerCase()===ee?(n=t.substr(hi,12),hi+=12):(n=Tt,0===xi&&f(re)),n!==Tt?(o=et(),o!==Tt?(61===t.charCodeAt(hi)?(i=Zt,hi++):(i=Tt,0===xi&&f($t)),i!==Tt?(a=et(),a!==Tt?(c=ct(),c!==Tt?(s=et(),s!==Tt?(gi=e,r=ne(n,c),e=r):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt),e===Tt&&(e=hi,r=et(),r!==Tt?(t.substr(hi,16).toLowerCase()===oe?(n=t.substr(hi,16),hi+=16):(n=Tt,0===xi&&f(ie)),n!==Tt?(o=et(),o!==Tt?(61===t.charCodeAt(hi)?(i=Zt,hi++):(i=Tt,0===xi&&f($t)),i!==Tt?(a=et(),a!==Tt?(c=ct(),c!==Tt?(s=et(),s!==Tt?(gi=e,r=ne(n,c),e=r):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt),e===Tt&&(e=hi,r=et(),r!==Tt?(t.substr(hi,13).toLowerCase()===ae?(n=t.substr(hi,13),hi+=13):(n=Tt,0===xi&&f(ce)),n!==Tt?(o=et(),o!==Tt?(61===t.charCodeAt(hi)?(i=Zt,hi++):(i=Tt,0===xi&&f($t)),i!==Tt?(a=et(),a!==Tt?(c=ct(),c!==Tt?(s=et(),s!==Tt?(gi=e,r=ne(n,c),e=r):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt),e===Tt&&(e=hi,r=et(),r!==Tt?(t.substr(hi,9).toLowerCase()===se?(n=t.substr(hi,9),hi+=9):(n=Tt,0===xi&&f(ue)),n!==Tt?(o=et(),o!==Tt?(61===t.charCodeAt(hi)?(i=Zt,hi++):(i=Tt,0===xi&&f($t)),i!==Tt?(a=et(),a!==Tt?(c=R(),c!==Tt?(s=et(),s!==Tt?(gi=e,r=Jt(n,c),e=r):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)))))),xi--,e===Tt&&(r=Tt,0===xi&&f(Xt)),e}function w(){var e,r,n,o,i,a;for(e=hi,r=hi,n=[],o=hi,i=v(),i!==Tt?(44===t.charCodeAt(hi)?(a=Ht,hi++):(a=Tt,0===xi&&f(Wt)),a!==Tt?(gi=o,i=le(i),o=i):(hi=o,o=Tt)):(hi=o,o=Tt);o!==Tt;)n.push(o),o=hi,i=v(),i!==Tt?(44===t.charCodeAt(hi)?(a=Ht,hi++):(a=Tt,0===xi&&f(Wt)),a!==Tt?(gi=o,i=le(i),o=i):(hi=o,o=Tt)):(hi=o,o=Tt);return n!==Tt?(o=hi,i=v(),i!==Tt?(59===t.charCodeAt(hi)?(a=zt,hi++):(a=Tt,0===xi&&f(Gt)),a!==Tt?(gi=o,i=le(i),o=i):(hi=o,o=Tt)):(hi=o,o=Tt),o!==Tt?(n=[n,o],r=n):(hi=r,r=Tt)):(hi=r,r=Tt),r!==Tt&&(gi=e,r=de(r)),e=r}function v(){var e,r,n,o,i,a,c,s;return xi++,e=hi,r=et(),r!==Tt?(n=R(),n!==Tt?(o=et(),o!==Tt?(i=hi,91===t.charCodeAt(hi)?(a=he,hi++):(a=Tt,0===xi&&f(ge)),a!==Tt?(c=O(),c!==Tt?(93===t.charCodeAt(hi)?(s=pe,hi++):(s=Tt,0===xi&&f(me)),s!==Tt?(gi=i,a=be(n,c),i=a):(hi=i,i=Tt)):(hi=i,i=Tt)):(hi=i,i=Tt),i===Tt&&(i=null),i!==Tt?(a=et(),a!==Tt?(gi=e,r=xe(n,i),e=r):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt),e===Tt&&(e=hi,r=et(),r!==Tt?(n=q(),n!==Tt?(o=et(),o!==Tt?(i=hi,91===t.charCodeAt(hi)?(a=he,hi++):(a=Tt,0===xi&&f(ge)),a!==Tt?(c=O(),c!==Tt?(93===t.charCodeAt(hi)?(s=pe,hi++):(s=Tt,0===xi&&f(me)),s!==Tt?(gi=i,a=be(n,c),i=a):(hi=i,i=Tt)):(hi=i,i=Tt)):(hi=i,i=Tt),i===Tt&&(i=null),i!==Tt?(a=et(),a!==Tt?(gi=e,r=ye(n,i),e=r):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)),xi--,e===Tt&&(r=Tt,0===xi&&f(fe)),e}function C(){var e,r,n,o,i;if(e=[],r=hi,n=k(),n!==Tt?(o=et(),o!==Tt?(59===t.charCodeAt(hi)?(i=zt,hi++):(i=Tt,0===xi&&f(Gt)),i!==Tt?(gi=r,n=we(n),r=n):(hi=r,r=Tt)):(hi=r,r=Tt)):(hi=r,r=Tt),r!==Tt)for(;r!==Tt;)e.push(r),r=hi,n=k(),n!==Tt?(o=et(),o!==Tt?(59===t.charCodeAt(hi)?(i=zt,hi++):(i=Tt,0===xi&&f(Gt)),i!==Tt?(gi=r,n=we(n),r=n):(hi=r,r=Tt)):(hi=r,r=Tt)):(hi=r,r=Tt);else e=Tt;return e}function k(){var e,r,n,o,i,a,c;for(e=hi,r=hi,n=[],o=hi,i=A(),i!==Tt?(a=et(),a!==Tt?(44===t.charCodeAt(hi)?(c=Ht,hi++):(c=Tt,0===xi&&f(Wt)),c!==Tt?(gi=o,i=we(i),o=i):(hi=o,o=Tt)):(hi=o,o=Tt)):(hi=o,o=Tt);o!==Tt;)n.push(o),o=hi,i=A(),i!==Tt?(a=et(),a!==Tt?(44===t.charCodeAt(hi)?(c=Ht,hi++):(c=Tt,0===xi&&f(Wt)),c!==Tt?(gi=o,i=we(i),o=i):(hi=o,o=Tt)):(hi=o,o=Tt)):(hi=o,o=Tt);return n!==Tt?(o=hi,i=A(),i!==Tt&&(gi=o,i=we(i)),o=i,o!==Tt?(n=[n,o],r=n):(hi=r,r=Tt)):(hi=r,r=Tt),r!==Tt&&(gi=e,r=ve(r)),e=r}function A(){var t;return t=_(),t===Tt&&(t=E()),t}function _(){var e,r,n,o,i,a;return e=hi,r=hi,n=T(),n!==Tt&&(gi=r,n=we(n)),r=n,r===Tt&&(r=hi,n=S(),n!==Tt&&(gi=r,n=we(n)),r=n,r===Tt&&(r=hi,n=L(),n!==Tt&&(gi=r,n=we(n)),r=n)),r!==Tt?(n=hi,91===t.charCodeAt(hi)?(o=he,hi++):(o=Tt,0===xi&&f(ge)),o!==Tt?(i=O(),i!==Tt?(93===t.charCodeAt(hi)?(a=pe,hi++):(a=Tt,0===xi&&f(me)),a!==Tt?(gi=n,o=Ce(r,i),n=o):(hi=n,n=Tt)):(hi=n,n=Tt)):(hi=n,n=Tt),n===Tt&&(n=null),n!==Tt?(gi=e,r=ke(r,n),e=r):(hi=e,e=Tt)):(hi=e,e=Tt),e}function T(){var t,e,r,n;return t=hi,e=et(),e!==Tt?(r=j(),r!==Tt?(n=et(),n!==Tt?(gi=t,e=Ae(r),t=e):(hi=t,t=Tt)):(hi=t,t=Tt)):(hi=t,t=Tt),t}function L(){var t,e,r,n;return t=hi,e=et(),e!==Tt?(r=P(),r!==Tt?(n=et(),n!==Tt?(gi=t,e=Ae(r),t=e):(hi=t,t=Tt)):(hi=t,t=Tt)):(hi=t,t=Tt),t}function S(){var e,r,n,o,i,a,c,s;return e=hi,r=et(),r!==Tt?(n=G(),n!==Tt?(o=et(),o!==Tt?(i=F(),i!==Tt?(a=et(),a!==Tt?(c=G(),c!==Tt?(s=et(),s!==Tt?(gi=e,r=_e(n,i,c),e=r):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt),e===Tt&&(e=hi,r=et(),r!==Tt?(42===t.charCodeAt(hi)?(n=Te,hi++):(n=Tt,0===xi&&f(Le)),n!==Tt?(o=et(),o!==Tt?(i=I(),i!==Tt?(a=et(),a!==Tt?(c=G(),c!==Tt?(s=et(),s!==Tt?(gi=e,r=Se(i,c),e=r):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt),e===Tt&&(e=hi,r=et(),r!==Tt?(n=G(),n!==Tt?(o=et(),o!==Tt?(i=D(),i!==Tt?(a=et(),a!==Tt?(42===t.charCodeAt(hi)?(c=Te,hi++):(c=Tt,0===xi&&f(Le)),c!==Tt?(s=et(),s!==Tt?(gi=e,r=Ee(n,i),e=r):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt),e===Tt&&(e=hi,r=et(),r!==Tt?(n=G(),n!==Tt?(o=et(),o!==Tt?(i=B(),i!==Tt?(a=et(),a!==Tt?(42===t.charCodeAt(hi)?(c=Te,hi++):(c=Tt,0===xi&&f(Le)),c!==Tt?(s=et(),s!==Tt?(gi=e,r=Ee(n,i),e=r):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)))),e}function E(){var e,r,n,o,i,a,c,s,u,l,d,h,g,p,m,b;return e=hi,r=et(),r!==Tt?(n=G(),n!==Tt?(o=et(),o!==Tt?(i=N(),i!==Tt?(a=et(),a!==Tt?(c=G(),c!==Tt?(s=et(),s!==Tt?(u=hi,91===t.charCodeAt(hi)?(l=he,hi++):(l=Tt,0===xi&&f(ge)),l!==Tt?(d=O(),d!==Tt?(93===t.charCodeAt(hi)?(h=pe,hi++):(h=Tt,0===xi&&f(me)),h!==Tt?(gi=u,l=je(n,i,c,d),u=l):(hi=u,u=Tt)):(hi=u,u=Tt)):(hi=u,u=Tt),u===Tt&&(u=null),u!==Tt?(l=et(),l!==Tt?(123===t.charCodeAt(hi)?(d=Et,hi++):(d=Tt,0===xi&&f(jt)),d!==Tt?(h=et(),h!==Tt?(g=C(),g===Tt&&(g=null),g!==Tt?(p=et(),p!==Tt?(125===t.charCodeAt(hi)?(m=Pt,hi++):(m=Tt,0===xi&&f(Ft)),m!==Tt?(b=et(),b!==Tt?(gi=e,r=Pe(n,i,c,u,g),e=r):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt),e}function j(){var e,r;return xi++,t.substr(hi,3)===Be?(e=Be,hi+=3):(e=Tt,0===xi&&f(De)),e===Tt&&(t.substr(hi,3)===Ie?(e=Ie,hi+=3):(e=Tt,0===xi&&f(Me))),xi--,e===Tt&&(r=Tt,0===xi&&f(Fe)),e}function P(){var e,r;return xi++,t.substr(hi,3)===Oe?(e=Oe,hi+=3):(e=Tt,0===xi&&f(He)),xi--,e===Tt&&(r=Tt,0===xi&&f(Ne)),e}function F(){var t,e;return t=hi,e=B(),e===Tt&&(e=D(),e===Tt&&(e=I(),e===Tt&&(e=M()))),e!==Tt&&(gi=t,e=We(e)),t=e}function B(){var e,r;return xi++,t.substr(hi,2)===ze?(e=ze,hi+=2):(e=Tt,0===xi&&f(Ge)),e===Tt&&(t.substr(hi,3)===qe?(e=qe,hi+=3):(e=Tt,0===xi&&f(Xe)),e===Tt&&(t.substr(hi,2)===Ue?(e=Ue,hi+=2):(e=Tt,0===xi&&f(Ve)),e===Tt&&(t.substr(hi,5)===Ke?(e=Ke,hi+=5):(e=Tt,0===xi&&f(Ye)),e===Tt&&(t.substr(hi,3)===Ze?(e=Ze,hi+=3):(e=Tt,0===xi&&f($e)),e===Tt&&(t.substr(hi,2)===Je?(e=Je,hi+=2):(e=Tt,0===xi&&f(Qe)),e===Tt&&(t.substr(hi,4)===tr?(e=tr,hi+=4):(e=Tt,0===xi&&f(er)),e===Tt&&(t.substr(hi,2)===rr?(e=rr,hi+=2):(e=Tt,0===xi&&f(nr)),e===Tt&&(t.substr(hi,3)===or?(e=or,hi+=3):(e=Tt,0===xi&&f(ir)))))))))),xi--,e===Tt&&(r=Tt,0===xi&&f(Re)),e}function D(){var e,r;return xi++,t.substr(hi,2)===cr?(e=cr,hi+=2):(e=Tt,0===xi&&f(sr)),e===Tt&&(t.substr(hi,3)===ur?(e=ur,hi+=3):(e=Tt,0===xi&&f(lr)),e===Tt&&(t.substr(hi,2)===dr?(e=dr,hi+=2):(e=Tt,0===xi&&f(fr)),e===Tt&&(t.substr(hi,2)===hr?(e=hr,hi+=2):(e=Tt,0===xi&&f(gr)),e===Tt&&(t.substr(hi,2)===pr?(e=pr,hi+=2):(e=Tt,0===xi&&f(mr)),e===Tt&&(t.substr(hi,2).toLowerCase()===br?(e=t.substr(hi,2),hi+=2):(e=Tt,0===xi&&f(xr))))))),xi--,e===Tt&&(r=Tt,0===xi&&f(ar)),e}function I(){var e,r;return xi++,t.substr(hi,2)===wr?(e=wr,hi+=2):(e=Tt,0===xi&&f(vr)),e===Tt&&(t.substr(hi,3)===Cr?(e=Cr,hi+=3):(e=Tt,0===xi&&f(kr)),e===Tt&&(t.substr(hi,2)===Ar?(e=Ar,hi+=2):(e=Tt,0===xi&&f(_r)),e===Tt&&(t.substr(hi,2)===Tr?(e=Tr,hi+=2):(e=Tt,0===xi&&f(Lr)),e===Tt&&(t.substr(hi,2)===Sr?(e=Sr,hi+=2):(e=Tt,0===xi&&f(Er)),e===Tt&&(t.substr(hi,2).toLowerCase()===jr?(e=t.substr(hi,2),hi+=2):(e=Tt,0===xi&&f(Pr))))))),xi--,e===Tt&&(r=Tt,0===xi&&f(yr)),e}function M(){var e,r;return xi++,t.substr(hi,4).toLowerCase()===Br?(e=t.substr(hi,4),hi+=4):(e=Tt,0===xi&&f(Dr)),e===Tt&&(t.substr(hi,4).toLowerCase()===Ir?(e=t.substr(hi,4),hi+=4):(e=Tt,0===xi&&f(Mr)),e===Tt&&(t.substr(hi,4).toLowerCase()===Nr?(e=t.substr(hi,4),hi+=4):(e=Tt,0===xi&&f(Or)),e===Tt&&(t.substr(hi,3).toLowerCase()===Hr?(e=t.substr(hi,3),hi+=3):(e=Tt,0===xi&&f(Wr))))),xi--,e===Tt&&(r=Tt,0===xi&&f(Fr)),e}function N(){var e,r;return xi++,e=hi,t.substr(hi,3).toLowerCase()===zr?(r=t.substr(hi,3),hi+=3):(r=Tt,0===xi&&f(Gr)),r===Tt&&(t.substr(hi,4).toLowerCase()===qr?(r=t.substr(hi,4),hi+=4):(r=Tt,0===xi&&f(Xr)),r===Tt&&(t.substr(hi,3).toLowerCase()===Ur?(r=t.substr(hi,3),hi+=3):(r=Tt,0===xi&&f(Vr)),r===Tt&&(t.substr(hi,5).toLowerCase()===Kr?(r=t.substr(hi,5),hi+=5):(r=Tt,0===xi&&f(Yr)),r===Tt&&(t.substr(hi,3).toLowerCase()===Zr?(r=t.substr(hi,3),hi+=3):(r=Tt,0===xi&&f($r)),r===Tt&&(t.substr(hi,3).toLowerCase()===Jr?(r=t.substr(hi,3),hi+=3):(r=Tt,0===xi&&f(Qr)),r===Tt&&(t.substr(hi,6).toLowerCase()===tn?(r=t.substr(hi,6),hi+=6):(r=Tt,0===xi&&f(en)),r===Tt&&(t.substr(hi,3).toLowerCase()===rn?(r=t.substr(hi,3),hi+=3):(r=Tt,0===xi&&f(nn)),r===Tt&&(t.substr(hi,8).toLowerCase()===on?(r=t.substr(hi,8),hi+=8):(r=Tt,0===xi&&f(an)),r===Tt&&(t.substr(hi,6).toLowerCase()===cn?(r=t.substr(hi,6),hi+=6):(r=Tt,0===xi&&f(sn)),r===Tt&&(t.substr(hi,8).toLowerCase()===un?(r=t.substr(hi,8),hi+=8):(r=Tt,0===xi&&f(ln)),r===Tt&&(t.substr(hi,6).toLowerCase()===dn?(r=t.substr(hi,6),hi+=6):(r=Tt,0===xi&&f(fn)),r===Tt&&(t.substr(hi,4).toLowerCase()===hn?(r=t.substr(hi,4),hi+=4):(r=Tt,0===xi&&f(gn)),r===Tt&&(t.substr(hi,3).toLowerCase()===pn?(r=t.substr(hi,3),hi+=3):(r=Tt,0===xi&&f(mn)),r===Tt&&(t.substr(hi,3).toLowerCase()===bn?(r=t.substr(hi,3),hi+=3):(r=Tt,0===xi&&f(xn)))))))))))))))),r!==Tt&&(gi=e,r=yn(r)),e=r,xi--,e===Tt&&(r=Tt,0===xi&&f(Rr)),e}function O(){var e,r,n,o,i,a;for(e=hi,r=hi,n=[],o=hi,i=H(),i!==Tt?(44===t.charCodeAt(hi)?(a=Ht,hi++):(a=Tt,0===xi&&f(Wt)),a!==Tt?(gi=o,i=we(i),o=i):(hi=o,o=Tt)):(hi=o,o=Tt);o!==Tt;)n.push(o),o=hi,i=H(),i!==Tt?(44===t.charCodeAt(hi)?(a=Ht,hi++):(a=Tt,0===xi&&f(Wt)),a!==Tt?(gi=o,i=we(i),o=i):(hi=o,o=Tt)):(hi=o,o=Tt);return n!==Tt?(o=hi,i=H(),i!==Tt&&(gi=o,i=we(i)),o=i,o!==Tt?(n=[n,o],r=n):(hi=r,r=Tt)):(hi=r,r=Tt),r!==Tt&&(gi=e,r=wn(r)),e=r}function H(){var e,r,n,o,i,a,c,s;return e=hi,r=et(),r!==Tt?(n=W(),n!==Tt?(o=et(),o!==Tt?(61===t.charCodeAt(hi)?(i=Zt,hi++):(i=Tt,0===xi&&f($t)),i!==Tt?(a=et(),a!==Tt?(c=G(),c!==Tt?(s=et(),s!==Tt?(gi=e,r=vn(n,c),e=r):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt),e}function W(){var e,r;return xi++,t.substr(hi,5).toLowerCase()===kn?(e=t.substr(hi,5),hi+=5):(e=Tt,0===xi&&f(An)),e===Tt&&(t.substr(hi,5).toLowerCase()===_n?(e=t.substr(hi,5),hi+=5):(e=Tt,0===xi&&f(Tn)),e===Tt&&(t.substr(hi,2).toLowerCase()===Ln?(e=t.substr(hi,2),hi+=2):(e=Tt,0===xi&&f(Sn)),e===Tt&&(t.substr(hi,3).toLowerCase()===En?(e=t.substr(hi,3),hi+=3):(e=Tt,0===xi&&f(jn)),e===Tt&&(t.substr(hi,9).toLowerCase()===Pn?(e=t.substr(hi,9),hi+=9):(e=Tt,0===xi&&f(Fn)),e===Tt&&(t.substr(hi,10).toLowerCase()===Bn?(e=t.substr(hi,10),hi+=10):(e=Tt,0===xi&&f(Dn)),e===Tt&&(t.substr(hi,9).toLowerCase()===In?(e=t.substr(hi,9),hi+=9):(e=Tt,0===xi&&f(Mn)),e===Tt&&(t.substr(hi,10).toLowerCase()===Nn?(e=t.substr(hi,10),hi+=10):(e=Tt,0===xi&&f(On)),e===Tt&&(t.substr(hi,11).toLowerCase()===Hn?(e=t.substr(hi,11),hi+=11):(e=Tt,0===xi&&f(Wn)),e===Tt&&(t.substr(hi,12).toLowerCase()===Rn?(e=t.substr(hi,12),hi+=12):(e=Tt,0===xi&&f(zn)),e===Tt&&(t.substr(hi,12).toLowerCase()===Gn?(e=t.substr(hi,12),hi+=12):(e=Tt,0===xi&&f(qn)),e===Tt&&(t.substr(hi,13).toLowerCase()===Xn?(e=t.substr(hi,13),hi+=13):(e=Tt,0===xi&&f(Un)),e===Tt&&(t.substr(hi,12).toLowerCase()===Vn?(e=t.substr(hi,12),hi+=12):(e=Tt,0===xi&&f(Kn)),e===Tt&&(t.substr(hi,13).toLowerCase()===Yn?(e=t.substr(hi,13),hi+=13):(e=Tt,0===xi&&f(Zn)),e===Tt&&(t.substr(hi,14).toLowerCase()===$n?(e=t.substr(hi,14),hi+=14):(e=Tt,0===xi&&f(Jn)),e===Tt&&(t.substr(hi,15).toLowerCase()===Qn?(e=t.substr(hi,15),hi+=15):(e=Tt,0===xi&&f(to)),e===Tt&&(t.substr(hi,7).toLowerCase()===eo?(e=t.substr(hi,7),hi+=7):(e=Tt,0===xi&&f(ro)),e===Tt&&(t.substr(hi,5).toLowerCase()===no?(e=t.substr(hi,5),hi+=5):(e=Tt,0===xi&&f(oo))))))))))))))))))),xi--,e===Tt&&(r=Tt,0===xi&&f(Cn)),e}function R(){var e,r,n,o;return xi++,e=hi,34===t.charCodeAt(hi)?(r=ao,hi++):(r=Tt,0===xi&&f(co)),r!==Tt?(n=z(),n!==Tt?(34===t.charCodeAt(hi)?(o=ao,hi++):(o=Tt,0===xi&&f(co)),o!==Tt?(gi=e,r=so(n),e=r):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt),xi--,e===Tt&&(r=Tt,0===xi&&f(io)),e}function z(){var e,r,n,o;for(e=[],r=hi,n=hi,xi++,34===t.charCodeAt(hi)?(o=ao,hi++):(o=Tt,0===xi&&f(co)),xi--,o===Tt?n=void 0:(hi=n,n=Tt),n!==Tt?(t.substr(hi,2)===uo?(o=uo,hi+=2):(o=Tt,0===xi&&f(lo)),o===Tt&&(t.length>hi?(o=t.charAt(hi),hi++):(o=Tt,0===xi&&f(fo))),o!==Tt?(gi=r,n=ho(o),r=n):(hi=r,r=Tt)):(hi=r,r=Tt);r!==Tt;)e.push(r),r=hi,n=hi,xi++,34===t.charCodeAt(hi)?(o=ao,hi++):(o=Tt,0===xi&&f(co)),xi--,o===Tt?n=void 0:(hi=n,n=Tt),n!==Tt?(t.substr(hi,2)===uo?(o=uo,hi+=2):(o=Tt,0===xi&&f(lo)),o===Tt&&(t.length>hi?(o=t.charAt(hi),hi++):(o=Tt,0===xi&&f(fo))),o!==Tt?(gi=r,n=ho(o),r=n):(hi=r,r=Tt)):(hi=r,r=Tt);return e}function G(){var t,e;return xi++,t=q(),t===Tt&&(t=R()),xi--,t===Tt&&(e=Tt,0===xi&&f(go)),t}function q(){var e,r,n;if(e=hi,r=[],po.test(t.charAt(hi))?(n=t.charAt(hi),hi++):(n=Tt,0===xi&&f(mo)),n!==Tt)for(;n!==Tt;)r.push(n),po.test(t.charAt(hi))?(n=t.charAt(hi),hi++):(n=Tt,0===xi&&f(mo));else r=Tt;return r!==Tt&&(gi=e,r=bo(r)),e=r}function X(){var e,r;return xi++,e=hi,yo.test(t.charAt(hi))?(r=t.charAt(hi),hi++):(r=Tt,0===xi&&f(wo)),r!==Tt&&(gi=e,r=ho(r)),e=r,xi--,e===Tt&&(r=Tt,0===xi&&f(xo)),e}function U(){var e,r;return xi++,e=hi,Co.test(t.charAt(hi))?(r=t.charAt(hi),hi++):(r=Tt,0===xi&&f(ko)),r!==Tt&&(gi=e,r=ho(r)),e=r,xi--,e===Tt&&(r=Tt,0===xi&&f(vo)),e}function V(){var e;return t.substr(hi,2)===Ao?(e=Ao,hi+=2):(e=Tt,0===xi&&f(_o)),e}function K(){var e;return t.substr(hi,2)===To?(e=To,hi+=2):(e=Tt,0===xi&&f(Lo)),e}function Y(){var e,r,n;return e=hi,r=hi,xi++,t.substr(hi,2)===To?(n=To,hi+=2):(n=Tt,0===xi&&f(Lo)),xi--,n===Tt?r=void 0:(hi=r,r=Tt),r!==Tt?(t.length>hi?(n=t.charAt(hi),hi++):(n=Tt,0===xi&&f(fo)),n!==Tt?(gi=e,r=ho(n),e=r):(hi=e,e=Tt)):(hi=e,e=Tt),e}function Z(){var t,e,r,n;if(t=hi,e=V(),e!==Tt){for(r=[],n=Y();n!==Tt;)r.push(n),n=Y();r!==Tt?(n=K(),n!==Tt?(gi=t,e=So(e,r,n),t=e):(hi=t,t=Tt)):(hi=t,t=Tt)}else hi=t,t=Tt;return t}function $(){var e;return t.substr(hi,2)===Eo?(e=Eo,hi+=2):(e=Tt,0===xi&&f(jo)),e===Tt&&(35===t.charCodeAt(hi)?(e=Po,hi++):(e=Tt,0===xi&&f(Fo))),e}function J(){var e;return Bo.test(t.charAt(hi))?(e=t.charAt(hi),hi++):(e=Tt,0===xi&&f(Do)),e}function Q(){var t,e,r,n;if(t=hi,e=$(),e!==Tt){for(r=[],n=J();n!==Tt;)r.push(n),n=J();r!==Tt?(gi=t,e=Io(e,r),t=e):(hi=t,t=Tt)}else hi=t,t=Tt;return t}function tt(){var t,e;return xi++,t=Q(),t===Tt&&(t=Z()),xi--,t===Tt&&(e=Tt,0===xi&&f(Mo)),t}function et(){var t,e;for(t=[],e=X(),e===Tt&&(e=U(),e===Tt&&(e=tt()));e!==Tt;)t.push(e),e=X(),e===Tt&&(e=U(),e===Tt&&(e=tt()));return t}function rt(){var t,e;return xi++,t=hi,e=nt(),e!==Tt&&(gi=t,e=Oo(e)),t=e,t===Tt&&(t=hi,e=ot(),e!==Tt&&(gi=t,e=Ho(e)),t=e),xi--,t===Tt&&(e=Tt,0===xi&&f(No)),t}function nt(){var e,r,n,o;return e=hi,34===t.charCodeAt(hi)?(r=ao,hi++):(r=Tt,0===xi&&f(co)),r!==Tt?(n=ot(),n!==Tt?(34===t.charCodeAt(hi)?(o=ao,hi++):(o=Tt,0===xi&&f(co)),o!==Tt?(gi=e,r=Wo(n),e=r):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt),e}function ot(){var t;return t=at(),t===Tt&&(t=it()),t}function it(){var e,r,n;if(e=hi,r=[],Ro.test(t.charAt(hi))?(n=t.charAt(hi),hi++):(n=Tt,0===xi&&f(zo)),n!==Tt)for(;n!==Tt;)r.push(n),Ro.test(t.charAt(hi))?(n=t.charAt(hi),hi++):(n=Tt,0===xi&&f(zo));else r=Tt;return r!==Tt&&(gi=e,r=Go(r)),e=r}function at(){var e,r,n,o,i;return e=hi,r=hi,n=it(),n!==Tt?(46===t.charCodeAt(hi)?(o=qo,hi++):(o=Tt,0===xi&&f(Xo)),o!==Tt?(i=it(),i!==Tt?(n=[n,o,i],r=n):(hi=r,r=Tt)):(hi=r,r=Tt)):(hi=r,r=Tt),r!==Tt&&(gi=e,r=Uo(r)),e=r}function ct(){var t,e;return xi++,t=hi,e=st(),e!==Tt&&(gi=t,e=Ko(e)),t=e,t===Tt&&(t=hi,e=ut(),e!==Tt&&(gi=t,e=Yo(e)),t=e),xi--,t===Tt&&(e=Tt,0===xi&&f(Vo)),t}function st(){var e,r,n,o;return e=hi,34===t.charCodeAt(hi)?(r=ao,hi++):(r=Tt,0===xi&&f(co)),r!==Tt?(n=ut(),n!==Tt?(34===t.charCodeAt(hi)?(o=ao,hi++):(o=Tt,0===xi&&f(co)),o!==Tt?(gi=e,r=Oo(n),e=r):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt),e}function ut(){var e;return t.substr(hi,4).toLowerCase()===Zo?(e=t.substr(hi,4),hi+=4):(e=Tt,0===xi&&f($o)),e===Tt&&(t.substr(hi,5).toLowerCase()===Jo?(e=t.substr(hi,5),hi+=5):(e=Tt,0===xi&&f(Qo)),e===Tt&&(t.substr(hi,2).toLowerCase()===ti?(e=t.substr(hi,2),hi+=2):(e=Tt,0===xi&&f(ei)),e===Tt&&(t.substr(hi,3).toLowerCase()===ri?(e=t.substr(hi,3),hi+=3):(e=Tt,0===xi&&f(ni)),e===Tt&&(48===t.charCodeAt(hi)?(e=oi,hi++):(e=Tt,0===xi&&f(ii)),e===Tt&&(49===t.charCodeAt(hi)?(e=ai,hi++):(e=Tt,0===xi&&f(ci))))))),e}function lt(){var t,e;return xi++,t=dt(),t===Tt&&(t=ft()),xi--,t===Tt&&(e=Tt,0===xi&&f(si)),t}function dt(){var e,r,n,o;return e=hi,34===t.charCodeAt(hi)?(r=ao,hi++):(r=Tt,0===xi&&f(co)),r!==Tt?(n=ft(),n!==Tt?(34===t.charCodeAt(hi)?(o=ao,hi++):(o=Tt,0===xi&&f(co)),o!==Tt?(gi=e,r=Oo(n),e=r):(hi=e,e=Tt)):(hi=e,e=Tt)):(hi=e,e=Tt),e}function ft(){var e,r;return e=hi,r=ot(),r!==Tt&&(gi=e,r=ui(r)),e=r,e===Tt&&(e=hi,t.substr(hi,4).toLowerCase()===li?(r=t.substr(hi,4),hi+=4):(r=Tt,0===xi&&f(di)),r!==Tt&&(gi=e,r=fi(r)),e=r),e}function ht(t,e){return t=t||{},e&&Object.getOwnPropertyNames(e).forEach(function(r){t[r]=e[r]}),t}function gt(t){var e={};return t.forEach(function(t){e=ht(e,t)}),e}function pt(t){return["true","on","1"].indexOf(t.toLowerCase())>-1}function mt(t,e){var r={};return r[t.toLowerCase()]=e,r}function bt(t,e){return void 0===e||"*"===e||t.some(function(t){return t.name===e})}function xt(t){return["box","abox","rbox","note","msc","hscale","width","arcgradient","wordwraparcs","label","color","idurl","id","url","linecolor","linecolour","textcolor","textcolour","textbgcolor","textbgcolour","arclinecolor","arclinecolour","arctextcolor","arctextcolour","arctextbgcolor","arctextbgcolour","arcskip"].indexOf(t)>-1}function yt(t,e){return"Entity '"+t+"' in arc '"+e.from+" "+e.kind+" "+e.to+"' is not defined."}function wt(t,e){this.name="EntityNotDefinedError",this.message=yt(t,e),e.location&&(this.location=e.location,this.location.start.line++,this.location.end.line++)}function vt(t,e){return t||(t=[]),e&&e.forEach(function(e){e.forEach(function(e){if(e.from&&!bt(t,e.from))throw new wt(e.from,e);if(e.to&&!bt(t,e.to))throw new wt(e.to,e);e.location&&delete e.location,e.arcs&&vt(t,e.arcs)})}),t}function Ct(t){return!!t&&(t.hasOwnProperty("watermark")||t.hasOwnProperty("wordwrapentities")||t.hasOwnProperty("wordwrapboxes")||t.hasOwnProperty("width")&&"auto"===t.width)}function kt(t){return!!t&&t.some(function(t){return t.some(function(t){return["alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"].indexOf(t.kind)>-1})})}function At(t,e){var r=Ct(t),n=kt(e);return{extendedOptions:r,extendedArcTypes:n,extendedFeatures:r||n}}r=void 0!==r?r:{};var _t,Tt={},Lt={program:p},St=p,Et="{",jt=i("{",!1),Pt="}",Ft=i("}",!1),Bt=function(t,e){e.entities=vt(e.entities,e.arcs);var r=e;return r=ht({meta:At(e.options,e.arcs)},r),t.length>0&&(r=ht({precomment:t},r)),r},Dt="msc",It=i("msc",!0),Mt="xu",Nt=i("xu",!0),Ot=function(t,e,r){var n={};return t&&(n.options=t),e&&(n.entities=e),r&&(n.arcs=r),n},Ht=",",Wt=i(",",!1),Rt=function(t){return t},zt=";",Gt=i(";",!1),qt=function(t){return gt(t[0].concat(t[1]))},Xt=u("option"),Ut="hscale",Vt=i("hscale",!0),Kt="arcgradient",Yt=i("arcgradient",!0),Zt="=",$t=i("=",!1),Jt=function(t,e){return mt(t,e)},Qt="width",te=i("width",!0),ee="wordwraparcs",re=i("wordwraparcs",!0),ne=function(t,e){return mt(t,pt(e))},oe="wordwrapentities",ie=i("wordwrapentities",!0),ae="wordwrapboxes",ce=i("wordwrapboxes",!0),se="watermark",ue=i("watermark",!0),le=function(t){return t},de=function(t){return t[0].concat(t[1])},fe=u("entity"),he="[",ge=i("[",!1),pe="]",me=i("]",!1),be=function(t,e){return e},xe=function(t,e){return ht({name:t},e)},ye=function(t,e){return xt(t)&&o("MscGen keywords aren't allowed as entity names (embed them in quotes if you need them)"),ht({name:t},e)},we=function(t){return t},ve=function(t){return t[0].concat(t[1])},Ce=function(t,e){return e},ke=function(t,e){return ht(t,e)},Ae=function(t){return{kind:t}},_e=function(t,e,r){return{kind:e,from:t,to:r,location:n()}},Te="*",Le=i("*",!1),Se=function(t,e){return{kind:t,from:"*",to:e,location:n()}},Ee=function(t,e){return{kind:e,from:t,to:"*",location:n()}},je=function(t,e,r,n){return n},Pe=function(t,e,r,o,i){return ht({kind:e,from:t,to:r,location:n(),arcs:i},o)},Fe=u("empty row"),Be="|||",De=i("|||",!1),Ie="...",Me=i("...",!1),Ne=u("---"),Oe="---",He=i("---",!1),We=function(t){return t.toLowerCase()},Re=u("bi-directional arrow"),ze="--",Ge=i("--",!1),qe="<->",Xe=i("<->",!1),Ue="==",Ve=i("==",!1),Ke="<<=>>",Ye=i("<<=>>",!1),Ze="<=>",$e=i("<=>",!1),Je="..",Qe=i("..",!1),tr="<<>>",er=i("<<>>",!1),rr="::",nr=i("::",!1),or="<:>",ir=i("<:>",!1),ar=u("left to right arrow"),cr="->",sr=i("->",!1),ur="=>>",lr=i("=>>",!1),dr="=>",fr=i("=>",!1),hr=">>",gr=i(">>",!1),pr=":>",mr=i(":>",!1),br="-x",xr=i("-x",!0),yr=u("right to left arrow"),wr="<-",vr=i("<-",!1),Cr="<<=",kr=i("<<=",!1),Ar="<=",_r=i("<=",!1),Tr="<<",Lr=i("<<",!1),Sr="<:",Er=i("<:",!1),jr="x-",Pr=i("x-",!0),Fr=u("box"),Br="note",Dr=i("note",!0),Ir="abox",Mr=i("abox",!0),Nr="rbox",Or=i("rbox",!0),Hr="box",Wr=i("box",!0),Rr=u("inline expression"),zr="alt",Gr=i("alt",!0),qr="else",Xr=i("else",!0),Ur="opt",Vr=i("opt",!0),Kr="break",Yr=i("break",!0),Zr="par",$r=i("par",!0),Jr="seq",Qr=i("seq",!0),tn="strict",en=i("strict",!0),rn="neg",nn=i("neg",!0),on="critical",an=i("critical",!0),cn="ignore",sn=i("ignore",!0),un="consider",ln=i("consider",!0),dn="assert",fn=i("assert",!0),hn="loop",gn=i("loop",!0),pn="ref",mn=i("ref",!0),bn="exc",xn=i("exc",!0),yn=function(t){return t.toLowerCase()},wn=function(t){return gt(t[0].concat(t[1]))},vn=function(t,e){var r={};return r[t.toLowerCase().replace("colour","color")]=e,r},Cn=u("attribute name"),kn="label",An=i("label",!0),_n="idurl",Tn=i("idurl",!0),Ln="id",Sn=i("id",!0),En="url",jn=i("url",!0),Pn="linecolor",Fn=i("linecolor",!0),Bn="linecolour",Dn=i("linecolour",!0),In="textcolor",Mn=i("textcolor",!0),Nn="textcolour",On=i("textcolour",!0),Hn="textbgcolor",Wn=i("textbgcolor",!0),Rn="textbgcolour",zn=i("textbgcolour",!0),Gn="arclinecolor",qn=i("arclinecolor",!0),Xn="arclinecolour",Un=i("arclinecolour",!0),Vn="arctextcolor",Kn=i("arctextcolor",!0),Yn="arctextcolour",Zn=i("arctextcolour",!0),$n="arctextbgcolor",Jn=i("arctextbgcolor",!0),Qn="arctextbgcolour",to=i("arctextbgcolour",!0),eo="arcskip",ro=i("arcskip",!0),no="title",oo=i("title",!0),io=u("double quoted string"),ao='"',co=i('"',!1),so=function(t){return t.join("")},uo='\\"',lo=i('\\"',!1),fo=c(),ho=function(t){return t},go=u("identifier"),po=/^[A-Za-z_0-9]/,mo=a([["A","Z"],["a","z"],"_",["0","9"]],!1,!1),bo=function(t){return t.join("")},xo=u("whitespace"),yo=/^[ \t]/,wo=a([" ","\t"],!1,!1),vo=u("lineend"),Co=/^[\r\n]/,ko=a(["\r","\n"],!1,!1),Ao="/*",_o=i("/*",!1),To="*/",Lo=i("*/",!1),So=function(t,e,r){return t+e.join("")+r},Eo="//",jo=i("//",!1),Po="#",Fo=i("#",!1),Bo=/^[^\r\n]/,Do=a(["\r","\n"],!0,!1),Io=function(t,e){return t+e.join("")},Mo=u("comment"),No=u("number"),Oo=function(t){return t},Ho=function(t){return t.toString()},Wo=function(t){return t.toString()},Ro=/^[0-9]/,zo=a([["0","9"]],!1,!1),Go=function(t){return parseInt(t.join(""),10)},qo=".",Xo=i(".",!1),Uo=function(t){return parseFloat(t.join(""))},Vo=u("boolean"),Ko=function(t){return t},Yo=function(t){return t.toString()},Zo="true",$o=i("true",!0),Jo="false",Qo=i("false",!0),ti="on",ei=i("on",!0),ri="off",ni=i("off",!0),oi="0",ii=i("0",!1),ai="1",ci=i("1",!1),si=u("size"),ui=function(t){return t.toString()},li="auto",di=i("auto",!0),fi=function(t){return t.toLowerCase()},hi=0,gi=0,pi=[{line:1,column:1}],mi=0,bi=[],xi=0;if("startRule"in r){if(!(r.startRule in Lt))throw new Error("Can't start parsing from rule \""+r.startRule+'".');St=Lt[r.startRule]}if(_t=St(),_t!==Tt&&hi===t.length)return _t;throw _t!==Tt&&hi<t.length&&f(s()),g(bi,mi<t.length?t.charAt(mi):null,mi<t.length?d(mi,mi+1):d(mi,mi))}return t(e,Error),e.buildMessage=function(t,e){function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function n(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function i(t){return s[t.type](t)}function a(t){var e,r,n=new Array(t.length);for(e=0;e<t.length;e++)n[e]=i(t[e]);if(n.sort(),n.length>0){for(e=1,r=1;e<n.length;e++)n[e-1]!==n[e]&&(n[r]=n[e],
r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}function c(t){return t?'"'+n(t)+'"':"end of input"}var s={literal:function(t){return'"'+n(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?o(t.parts[e][0])+"-"+o(t.parts[e][1]):o(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};return"Expected "+a(t)+" but "+c(e)+" found."},{SyntaxError:e,parse:r}}),function(t,e){"function"==typeof r&&r.amd?r("lib/mscgenjs-core/parse/msgennyparser",[],e):"object"==typeof module&&module.exports&&(module.exports=e())}(this,function(){"use strict";function t(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function e(t,r,n,o){this.message=t,this.expected=r,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function r(t,r){function n(t,e){return{type:"literal",text:t,ignoreCase:e}}function o(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function i(){return{type:"any"}}function a(){return{type:"end"}}function c(t){return{type:"other",description:t}}function s(e){var r,n=yo[e];if(n)return n;for(r=e-1;!yo[r];)r--;for(n=yo[r],n={line:n.line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return yo[e]=n,n}function u(t,e){var r=s(t),n=s(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function l(t){bo<wo||(bo>wo&&(wo=bo,vo=[]),vo.push(t))}function d(t,r,n){return new e(e.buildMessage(t,r),t,r,n)}function f(){var t,e,r,n;return t=bo,e=Z(),e!==yt?(r=h(),r!==yt?(n=Z(),n!==yt?(xo=t,e=Ct(e,r),t=e):(bo=t,t=yt)):(bo=t,t=yt)):(bo=t,t=yt),t}function h(){var t,e,r,n;return t=bo,e=g(),e===yt&&(e=null),e!==yt?(r=m(),r===yt&&(r=null),r!==yt?(n=x(),n===yt&&(n=null),n!==yt?(xo=t,e=kt(e,r,n),t=e):(bo=t,t=yt)):(bo=t,t=yt)):(bo=t,t=yt),t}function g(){var e,r,n,o,i,a;for(e=bo,r=bo,n=[],o=bo,i=p(),i!==yt?(44===t.charCodeAt(bo)?(a=At,bo++):(a=yt,0===Co&&l(_t)),a!==yt?(xo=o,i=Tt(i),o=i):(bo=o,o=yt)):(bo=o,o=yt);o!==yt;)n.push(o),o=bo,i=p(),i!==yt?(44===t.charCodeAt(bo)?(a=At,bo++):(a=yt,0===Co&&l(_t)),a!==yt?(xo=o,i=Tt(i),o=i):(bo=o,o=yt)):(bo=o,o=yt);return n!==yt?(o=bo,i=p(),i!==yt?(59===t.charCodeAt(bo)?(a=Lt,bo++):(a=yt,0===Co&&l(St)),a!==yt?(xo=o,i=Tt(i),o=i):(bo=o,o=yt)):(bo=o,o=yt),o!==yt?(n=[n,o],r=n):(bo=r,r=yt)):(bo=r,r=yt),r!==yt&&(xo=e,r=Et(r)),e=r}function p(){var e,r,n,o,i,a,c,s;return e=bo,r=Z(),r!==yt?(t.substr(bo,6).toLowerCase()===jt?(n=t.substr(bo,6),bo+=6):(n=yt,0===Co&&l(Pt)),n===yt&&(t.substr(bo,11).toLowerCase()===Ft?(n=t.substr(bo,11),bo+=11):(n=yt,0===Co&&l(Bt))),n!==yt?(o=Z(),o!==yt?(61===t.charCodeAt(bo)?(i=Dt,bo++):(i=yt,0===Co&&l(It)),i!==yt?(a=Z(),a!==yt?(c=$(),c!==yt?(s=Z(),s!==yt?(xo=e,r=Mt(n,c),e=r):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt),e===yt&&(e=bo,r=Z(),r!==yt?(t.substr(bo,5).toLowerCase()===Nt?(n=t.substr(bo,5),bo+=5):(n=yt,0===Co&&l(Ot)),n!==yt?(o=Z(),o!==yt?(61===t.charCodeAt(bo)?(i=Dt,bo++):(i=yt,0===Co&&l(It)),i!==yt?(a=Z(),a!==yt?(c=it(),c!==yt?(s=Z(),s!==yt?(xo=e,r=Mt(n,c),e=r):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt),e===yt&&(e=bo,r=Z(),r!==yt?(t.substr(bo,12).toLowerCase()===Ht?(n=t.substr(bo,12),bo+=12):(n=yt,0===Co&&l(Wt)),n!==yt?(o=Z(),o!==yt?(61===t.charCodeAt(bo)?(i=Dt,bo++):(i=yt,0===Co&&l(It)),i!==yt?(a=Z(),a!==yt?(c=rt(),c!==yt?(s=Z(),s!==yt?(xo=e,r=Rt(n,c),e=r):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt),e===yt&&(e=bo,r=Z(),r!==yt?(t.substr(bo,16).toLowerCase()===zt?(n=t.substr(bo,16),bo+=16):(n=yt,0===Co&&l(Gt)),n!==yt?(o=Z(),o!==yt?(61===t.charCodeAt(bo)?(i=Dt,bo++):(i=yt,0===Co&&l(It)),i!==yt?(a=Z(),a!==yt?(c=rt(),c!==yt?(s=Z(),s!==yt?(xo=e,r=Rt(n,c),e=r):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt),e===yt&&(e=bo,r=Z(),r!==yt?(t.substr(bo,13).toLowerCase()===qt?(n=t.substr(bo,13),bo+=13):(n=yt,0===Co&&l(Xt)),n!==yt?(o=Z(),o!==yt?(61===t.charCodeAt(bo)?(i=Dt,bo++):(i=yt,0===Co&&l(It)),i!==yt?(a=Z(),a!==yt?(c=rt(),c!==yt?(s=Z(),s!==yt?(xo=e,r=Rt(n,c),e=r):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt),e===yt&&(e=bo,r=Z(),r!==yt?(t.substr(bo,9).toLowerCase()===Ut?(n=t.substr(bo,9),bo+=9):(n=yt,0===Co&&l(Vt)),n!==yt?(o=Z(),o!==yt?(61===t.charCodeAt(bo)?(i=Dt,bo++):(i=yt,0===Co&&l(It)),i!==yt?(a=Z(),a!==yt?(c=I(),c!==yt?(s=Z(),s!==yt?(xo=e,r=Mt(n,c),e=r):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)))))),e}function m(){var e,r,n,o,i,a;for(e=bo,r=bo,n=[],o=bo,i=b(),i!==yt?(44===t.charCodeAt(bo)?(a=At,bo++):(a=yt,0===Co&&l(_t)),a!==yt?(xo=o,i=Kt(i),o=i):(bo=o,o=yt)):(bo=o,o=yt);o!==yt;)n.push(o),o=bo,i=b(),i!==yt?(44===t.charCodeAt(bo)?(a=At,bo++):(a=yt,0===Co&&l(_t)),a!==yt?(xo=o,i=Kt(i),o=i):(bo=o,o=yt)):(bo=o,o=yt);return n!==yt?(o=bo,i=b(),i!==yt?(59===t.charCodeAt(bo)?(a=Lt,bo++):(a=yt,0===Co&&l(St)),a!==yt?(xo=o,i=Kt(i),o=i):(bo=o,o=yt)):(bo=o,o=yt),o!==yt?(n=[n,o],r=n):(bo=r,r=yt)):(bo=r,r=yt),r!==yt&&(xo=e,r=Yt(r)),e=r}function b(){var e,r,n,o,i,a,c,s,u;return Co++,e=bo,r=Z(),r!==yt?(n=H(),n!==yt?(o=Z(),o!==yt?(i=bo,58===t.charCodeAt(bo)?(a=$t,bo++):(a=yt,0===Co&&l(Jt)),a!==yt?(c=Z(),c!==yt?(s=D(),s!==yt?(u=Z(),u!==yt?(xo=i,a=Qt(n,s),i=a):(bo=i,i=yt)):(bo=i,i=yt)):(bo=i,i=yt)):(bo=i,i=yt),i===yt&&(i=null),i!==yt?(xo=e,r=te(n,i),e=r):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt),Co--,e===yt&&(r=yt,0===Co&&l(Zt)),e}function x(){var e,r,n,o,i;if(e=[],r=bo,n=y(),n!==yt?(o=Z(),o!==yt?(59===t.charCodeAt(bo)?(i=Lt,bo++):(i=yt,0===Co&&l(St)),i!==yt?(xo=r,n=ee(n),r=n):(bo=r,r=yt)):(bo=r,r=yt)):(bo=r,r=yt),r!==yt)for(;r!==yt;)e.push(r),r=bo,n=y(),n!==yt?(o=Z(),o!==yt?(59===t.charCodeAt(bo)?(i=Lt,bo++):(i=yt,0===Co&&l(St)),i!==yt?(xo=r,n=ee(n),r=n):(bo=r,r=yt)):(bo=r,r=yt)):(bo=r,r=yt);else e=yt;return e}function y(){var e,r,n,o,i,a;for(e=bo,r=bo,n=[],o=bo,i=w(),i!==yt?(44===t.charCodeAt(bo)?(a=At,bo++):(a=yt,0===Co&&l(_t)),a!==yt?(xo=o,i=ee(i),o=i):(bo=o,o=yt)):(bo=o,o=yt);o!==yt;)n.push(o),o=bo,i=w(),i!==yt?(44===t.charCodeAt(bo)?(a=At,bo++):(a=yt,0===Co&&l(_t)),a!==yt?(xo=o,i=ee(i),o=i):(bo=o,o=yt)):(bo=o,o=yt);return n!==yt?(o=bo,i=w(),i!==yt&&(xo=o,i=ee(i)),o=i,o!==yt?(n=[n,o],r=n):(bo=r,r=yt)):(bo=r,r=yt),r!==yt&&(xo=e,r=re(r)),e=r}function w(){var t;return t=v(),t===yt&&(t=_()),t}function v(){var e,r,n,o,i,a,c;return e=bo,r=bo,n=C(),n!==yt&&(xo=r,n=ne(n)),r=n,r===yt&&(r=bo,n=A(),n!==yt&&(xo=r,n=oe(n)),r=n,r===yt&&(r=bo,n=k(),n!==yt&&(xo=r,n=ie(n)),r=n)),r!==yt?(n=bo,58===t.charCodeAt(bo)?(o=$t,bo++):(o=yt,0===Co&&l(Jt)),o!==yt?(i=Z(),i!==yt?(a=D(),a!==yt?(c=Z(),c!==yt?(xo=n,o=ae(r,a),n=o):(bo=n,n=yt)):(bo=n,n=yt)):(bo=n,n=yt)):(bo=n,n=yt),n===yt&&(n=null),n!==yt?(xo=e,r=ce(r,n),e=r):(bo=e,e=yt)):(bo=e,e=yt),e}function C(){var t,e,r,n;return t=bo,e=Z(),e!==yt?(r=T(),r!==yt?(n=Z(),n!==yt?(xo=t,e=se(r),t=e):(bo=t,t=yt)):(bo=t,t=yt)):(bo=t,t=yt),t}function k(){var t,e,r,n;return t=bo,e=Z(),e!==yt?(r=L(),r!==yt?(n=Z(),n!==yt?(xo=t,e=se(r),t=e):(bo=t,t=yt)):(bo=t,t=yt)):(bo=t,t=yt),t}function A(){var e,r,n,o,i,a,c,s;return e=bo,r=Z(),r!==yt?(n=H(),n!==yt?(o=Z(),o!==yt?(i=S(),i!==yt?(a=Z(),a!==yt?(c=H(),c!==yt?(s=Z(),s!==yt?(xo=e,r=ue(n,i,c),e=r):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt),e===yt&&(e=bo,r=Z(),r!==yt?(42===t.charCodeAt(bo)?(n=le,bo++):(n=yt,0===Co&&l(de)),n!==yt?(o=Z(),o!==yt?(i=P(),i!==yt?(a=Z(),a!==yt?(c=H(),c!==yt?(s=Z(),s!==yt?(xo=e,r=fe(i,c),e=r):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt),e===yt&&(e=bo,r=Z(),r!==yt?(n=H(),n!==yt?(o=Z(),o!==yt?(i=j(),i!==yt?(a=Z(),a!==yt?(42===t.charCodeAt(bo)?(c=le,bo++):(c=yt,0===Co&&l(de)),c!==yt?(s=Z(),s!==yt?(xo=e,r=he(n,i),e=r):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt),e===yt&&(e=bo,r=Z(),r!==yt?(n=H(),n!==yt?(o=Z(),o!==yt?(i=E(),i!==yt?(a=Z(),a!==yt?(42===t.charCodeAt(bo)?(c=le,bo++):(c=yt,0===Co&&l(de)),c!==yt?(s=Z(),s!==yt?(xo=e,r=he(n,i),e=r):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)))),e}function _(){var e,r,n,o,i,a,c,s,u,d,f,h,g,p,m;return e=bo,r=Z(),r!==yt?(n=H(),n!==yt?(o=Z(),o!==yt?(i=B(),i!==yt?(a=Z(),a!==yt?(c=H(),c!==yt?(s=Z(),s!==yt?(u=bo,58===t.charCodeAt(bo)?(d=$t,bo++):(d=yt,0===Co&&l(Jt)),d!==yt?(f=Z(),f!==yt?(h=D(),h!==yt?(g=Z(),g!==yt?(xo=u,d=ge(n,i,c,h),u=d):(bo=u,u=yt)):(bo=u,u=yt)):(bo=u,u=yt)):(bo=u,u=yt),u===yt&&(u=null),u!==yt?(123===t.charCodeAt(bo)?(d=pe,bo++):(d=yt,0===Co&&l(me)),d!==yt?(f=Z(),f!==yt?(h=x(),h===yt&&(h=null),h!==yt?(g=Z(),g!==yt?(125===t.charCodeAt(bo)?(p=be,bo++):(p=yt,0===Co&&l(xe)),p!==yt?(m=Z(),m!==yt?(xo=e,r=ye(n,i,c,u,h),e=r):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt),e}function T(){var e,r;return Co++,t.substr(bo,3)===ve?(e=ve,bo+=3):(e=yt,0===Co&&l(Ce)),e===yt&&(t.substr(bo,3)===ke?(e=ke,bo+=3):(e=yt,0===Co&&l(Ae))),Co--,e===yt&&(r=yt,0===Co&&l(we)),e}function L(){var e,r;return Co++,t.substr(bo,3)===Te?(e=Te,bo+=3):(e=yt,0===Co&&l(Le)),Co--,e===yt&&(r=yt,0===Co&&l(_e)),e}function S(){var t,e;return t=bo,e=E(),e===yt&&(e=j(),e===yt&&(e=P(),e===yt&&(e=F()))),e!==yt&&(xo=t,e=Se(e)),t=e}function E(){var e,r;return Co++,t.substr(bo,2)===je?(e=je,bo+=2):(e=yt,0===Co&&l(Pe)),e===yt&&(t.substr(bo,3)===Fe?(e=Fe,bo+=3):(e=yt,0===Co&&l(Be)),e===yt&&(t.substr(bo,2)===De?(e=De,bo+=2):(e=yt,0===Co&&l(Ie)),e===yt&&(t.substr(bo,5)===Me?(e=Me,bo+=5):(e=yt,0===Co&&l(Ne)),e===yt&&(t.substr(bo,3)===Oe?(e=Oe,bo+=3):(e=yt,0===Co&&l(He)),e===yt&&(t.substr(bo,2)===We?(e=We,bo+=2):(e=yt,0===Co&&l(Re)),e===yt&&(t.substr(bo,4)===ze?(e=ze,bo+=4):(e=yt,0===Co&&l(Ge)),e===yt&&(t.substr(bo,2)===qe?(e=qe,bo+=2):(e=yt,0===Co&&l(Xe)),e===yt&&(t.substr(bo,3)===Ue?(e=Ue,bo+=3):(e=yt,0===Co&&l(Ve)))))))))),Co--,e===yt&&(r=yt,0===Co&&l(Ee)),e}function j(){var e,r;return Co++,t.substr(bo,2)===Ye?(e=Ye,bo+=2):(e=yt,0===Co&&l(Ze)),e===yt&&(t.substr(bo,3)===$e?(e=$e,bo+=3):(e=yt,0===Co&&l(Je)),e===yt&&(t.substr(bo,2)===Qe?(e=Qe,bo+=2):(e=yt,0===Co&&l(tr)),e===yt&&(t.substr(bo,2)===er?(e=er,bo+=2):(e=yt,0===Co&&l(rr)),e===yt&&(t.substr(bo,2)===nr?(e=nr,bo+=2):(e=yt,0===Co&&l(or)),e===yt&&(t.substr(bo,2).toLowerCase()===ir?(e=t.substr(bo,2),bo+=2):(e=yt,0===Co&&l(ar))))))),Co--,e===yt&&(r=yt,0===Co&&l(Ke)),e}function P(){var e,r;return Co++,t.substr(bo,2)===sr?(e=sr,bo+=2):(e=yt,0===Co&&l(ur)),e===yt&&(t.substr(bo,3)===lr?(e=lr,bo+=3):(e=yt,0===Co&&l(dr)),e===yt&&(t.substr(bo,2)===fr?(e=fr,bo+=2):(e=yt,0===Co&&l(hr)),e===yt&&(t.substr(bo,2)===gr?(e=gr,bo+=2):(e=yt,0===Co&&l(pr)),e===yt&&(t.substr(bo,2)===mr?(e=mr,bo+=2):(e=yt,0===Co&&l(br)),e===yt&&(t.substr(bo,2).toLowerCase()===xr?(e=t.substr(bo,2),bo+=2):(e=yt,0===Co&&l(yr))))))),Co--,e===yt&&(r=yt,0===Co&&l(cr)),e}function F(){var e,r;return Co++,t.substr(bo,4).toLowerCase()===vr?(e=t.substr(bo,4),bo+=4):(e=yt,0===Co&&l(Cr)),e===yt&&(t.substr(bo,4).toLowerCase()===kr?(e=t.substr(bo,4),bo+=4):(e=yt,0===Co&&l(Ar)),e===yt&&(t.substr(bo,4).toLowerCase()===_r?(e=t.substr(bo,4),bo+=4):(e=yt,0===Co&&l(Tr)),e===yt&&(t.substr(bo,3).toLowerCase()===Lr?(e=t.substr(bo,3),bo+=3):(e=yt,0===Co&&l(Sr))))),Co--,e===yt&&(r=yt,0===Co&&l(wr)),e}function B(){var e,r;return Co++,e=bo,t.substr(bo,3).toLowerCase()===jr?(r=t.substr(bo,3),bo+=3):(r=yt,0===Co&&l(Pr)),r===yt&&(t.substr(bo,4).toLowerCase()===Fr?(r=t.substr(bo,4),bo+=4):(r=yt,0===Co&&l(Br)),r===yt&&(t.substr(bo,3).toLowerCase()===Dr?(r=t.substr(bo,3),bo+=3):(r=yt,0===Co&&l(Ir)),r===yt&&(t.substr(bo,5).toLowerCase()===Mr?(r=t.substr(bo,5),bo+=5):(r=yt,0===Co&&l(Nr)),r===yt&&(t.substr(bo,3).toLowerCase()===Or?(r=t.substr(bo,3),bo+=3):(r=yt,0===Co&&l(Hr)),r===yt&&(t.substr(bo,3).toLowerCase()===Wr?(r=t.substr(bo,3),bo+=3):(r=yt,0===Co&&l(Rr)),r===yt&&(t.substr(bo,6).toLowerCase()===zr?(r=t.substr(bo,6),bo+=6):(r=yt,0===Co&&l(Gr)),r===yt&&(t.substr(bo,3).toLowerCase()===qr?(r=t.substr(bo,3),bo+=3):(r=yt,0===Co&&l(Xr)),r===yt&&(t.substr(bo,8).toLowerCase()===Ur?(r=t.substr(bo,8),bo+=8):(r=yt,0===Co&&l(Vr)),r===yt&&(t.substr(bo,6).toLowerCase()===Kr?(r=t.substr(bo,6),bo+=6):(r=yt,0===Co&&l(Yr)),r===yt&&(t.substr(bo,8).toLowerCase()===Zr?(r=t.substr(bo,8),bo+=8):(r=yt,0===Co&&l($r)),r===yt&&(t.substr(bo,6).toLowerCase()===Jr?(r=t.substr(bo,6),bo+=6):(r=yt,0===Co&&l(Qr)),r===yt&&(t.substr(bo,4).toLowerCase()===tn?(r=t.substr(bo,4),bo+=4):(r=yt,0===Co&&l(en)),r===yt&&(t.substr(bo,3).toLowerCase()===rn?(r=t.substr(bo,3),bo+=3):(r=yt,0===Co&&l(nn)),r===yt&&(t.substr(bo,3).toLowerCase()===on?(r=t.substr(bo,3),bo+=3):(r=yt,0===Co&&l(an)))))))))))))))),r!==yt&&(xo=e,r=cn(r)),e=r,Co--,e===yt&&(r=yt,0===Co&&l(Er)),e}function D(){var t;return t=I(),t===yt&&(t=N()),t}function I(){var e,r,n,o;return Co++,e=bo,34===t.charCodeAt(bo)?(r=un,bo++):(r=yt,0===Co&&l(ln)),r!==yt?(n=M(),n!==yt?(34===t.charCodeAt(bo)?(o=un,bo++):(o=yt,0===Co&&l(ln)),o!==yt?(xo=e,r=dn(n),e=r):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt),Co--,e===yt&&(r=yt,0===Co&&l(sn)),e}function M(){var e,r,n,o;for(e=[],r=bo,n=bo,Co++,34===t.charCodeAt(bo)?(o=un,bo++):(o=yt,0===Co&&l(ln)),Co--,o===yt?n=void 0:(bo=n,n=yt),n!==yt?(t.substr(bo,2)===fn?(o=fn,bo+=2):(o=yt,0===Co&&l(hn)),o===yt&&(t.length>bo?(o=t.charAt(bo),bo++):(o=yt,0===Co&&l(gn))),o!==yt?(xo=r,n=pn(o),r=n):(bo=r,r=yt)):(bo=r,r=yt);r!==yt;)e.push(r),r=bo,n=bo,Co++,34===t.charCodeAt(bo)?(o=un,bo++):(o=yt,0===Co&&l(ln)),Co--,o===yt?n=void 0:(bo=n,n=yt),n!==yt?(t.substr(bo,2)===fn?(o=fn,bo+=2):(o=yt,0===Co&&l(hn)),o===yt&&(t.length>bo?(o=t.charAt(bo),bo++):(o=yt,0===Co&&l(gn))),o!==yt?(xo=r,n=pn(o),r=n):(bo=r,r=yt)):(bo=r,r=yt);return e}function N(){var t,e;return t=bo,e=O(),e!==yt&&(xo=t,e=mn(e)),t=e}function O(){var e,r,n,o;for(e=[],r=bo,n=bo,Co++,44===t.charCodeAt(bo)?(o=At,bo++):(o=yt,0===Co&&l(_t)),o===yt&&(59===t.charCodeAt(bo)?(o=Lt,bo++):(o=yt,0===Co&&l(St)),o===yt&&(123===t.charCodeAt(bo)?(o=pe,bo++):(o=yt,0===Co&&l(me)))),Co--,o===yt?n=void 0:(bo=n,n=yt),n!==yt?(t.length>bo?(o=t.charAt(bo),bo++):(o=yt,0===Co&&l(gn)),o!==yt?(xo=r,n=pn(o),r=n):(bo=r,r=yt)):(bo=r,r=yt);r!==yt;)e.push(r),r=bo,n=bo,Co++,44===t.charCodeAt(bo)?(o=At,bo++):(o=yt,0===Co&&l(_t)),o===yt&&(59===t.charCodeAt(bo)?(o=Lt,bo++):(o=yt,0===Co&&l(St)),o===yt&&(123===t.charCodeAt(bo)?(o=pe,bo++):(o=yt,0===Co&&l(me)))),Co--,o===yt?n=void 0:(bo=n,n=yt),n!==yt?(t.length>bo?(o=t.charAt(bo),bo++):(o=yt,0===Co&&l(gn)),o!==yt?(xo=r,n=pn(o),r=n):(bo=r,r=yt)):(bo=r,r=yt);return e}function H(){var e,r,n;if(Co++,e=bo,r=[],xn.test(t.charAt(bo))?(n=t.charAt(bo),bo++):(n=yt,0===Co&&l(yn)),n!==yt)for(;n!==yt;)r.push(n),xn.test(t.charAt(bo))?(n=t.charAt(bo),bo++):(n=yt,0===Co&&l(yn));else r=yt;return r!==yt&&(xo=e,r=wn(r)),e=r,e===yt&&(e=I()),Co--,e===yt&&(r=yt,0===Co&&l(bn)),e}function W(){var e,r;return Co++,e=bo,Cn.test(t.charAt(bo))?(r=t.charAt(bo),bo++):(r=yt,0===Co&&l(kn)),r!==yt&&(xo=e,r=pn(r)),e=r,Co--,e===yt&&(r=yt,0===Co&&l(vn)),e}function R(){var e,r;return Co++,e=bo,_n.test(t.charAt(bo))?(r=t.charAt(bo),bo++):(r=yt,0===Co&&l(Tn)),r!==yt&&(xo=e,r=pn(r)),e=r,Co--,e===yt&&(r=yt,0===Co&&l(An)),e}function z(){var e;return t.substr(bo,2)===Ln?(e=Ln,bo+=2):(e=yt,0===Co&&l(Sn)),e}function G(){var e;return t.substr(bo,2)===En?(e=En,bo+=2):(e=yt,0===Co&&l(jn)),e}function q(){var e,r,n;return e=bo,r=bo,Co++,t.substr(bo,2)===En?(n=En,bo+=2):(n=yt,0===Co&&l(jn)),Co--,n===yt?r=void 0:(bo=r,r=yt),r!==yt?(t.length>bo?(n=t.charAt(bo),bo++):(n=yt,0===Co&&l(gn)),n!==yt?(xo=e,r=pn(n),e=r):(bo=e,e=yt)):(bo=e,e=yt),e}function X(){var t,e,r,n;if(t=bo,e=z(),e!==yt){for(r=[],n=q();n!==yt;)r.push(n),n=q();r!==yt?(n=G(),n!==yt?(xo=t,e=Pn(e,r,n),t=e):(bo=t,t=yt)):(bo=t,t=yt)}else bo=t,t=yt;return t}function U(){var e;return t.substr(bo,2)===Fn?(e=Fn,bo+=2):(e=yt,0===Co&&l(Bn)),e===yt&&(35===t.charCodeAt(bo)?(e=Dn,bo++):(e=yt,0===Co&&l(In))),e}function V(){var e;return Mn.test(t.charAt(bo))?(e=t.charAt(bo),bo++):(e=yt,0===Co&&l(Nn)),e}function K(){var t,e,r,n;if(t=bo,e=U(),e!==yt){for(r=[],n=V();n!==yt;)r.push(n),n=V();r!==yt?(xo=t,e=On(e,r),t=e):(bo=t,t=yt)}else bo=t,t=yt;return t}function Y(){var t,e;return Co++,t=K(),t===yt&&(t=X()),Co--,t===yt&&(e=yt,0===Co&&l(Hn)),t}function Z(){var t,e;for(t=[],e=W(),e===yt&&(e=R(),e===yt&&(e=Y()));e!==yt;)t.push(e),e=W(),e===yt&&(e=R(),e===yt&&(e=Y()));return t}function $(){var t,e;return Co++,t=bo,e=J(),e!==yt&&(xo=t,e=Rn(e)),t=e,t===yt&&(t=bo,e=Q(),e!==yt&&(xo=t,e=zn(e)),t=e),Co--,t===yt&&(e=yt,0===Co&&l(Wn)),t}function J(){var e,r,n,o;return e=bo,34===t.charCodeAt(bo)?(r=un,bo++):(r=yt,0===Co&&l(ln)),r!==yt?(n=Q(),n!==yt?(34===t.charCodeAt(bo)?(o=un,bo++):(o=yt,0===Co&&l(ln)),o!==yt?(xo=e,r=Gn(n),e=r):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt),e}function Q(){var t;return t=et(),t===yt&&(t=tt()),t}function tt(){var e,r,n;if(e=bo,r=[],qn.test(t.charAt(bo))?(n=t.charAt(bo),bo++):(n=yt,0===Co&&l(Xn)),n!==yt)for(;n!==yt;)r.push(n),qn.test(t.charAt(bo))?(n=t.charAt(bo),bo++):(n=yt,0===Co&&l(Xn));else r=yt;return r!==yt&&(xo=e,r=Un(r)),e=r}function et(){var e,r,n,o,i;return e=bo,r=bo,n=tt(),n!==yt?(46===t.charCodeAt(bo)?(o=Vn,bo++):(o=yt,0===Co&&l(Kn)),o!==yt?(i=tt(),i!==yt?(n=[n,o,i],r=n):(bo=r,r=yt)):(bo=r,r=yt)):(bo=r,r=yt),r!==yt&&(xo=e,r=Yn(r)),e=r}function rt(){var t,e;return Co++,t=bo,e=nt(),e!==yt&&(xo=t,e=$n(e)),t=e,t===yt&&(t=bo,e=ot(),e!==yt&&(xo=t,e=Jn(e)),t=e),Co--,t===yt&&(e=yt,0===Co&&l(Zn)),t}function nt(){var e,r,n,o;return e=bo,34===t.charCodeAt(bo)?(r=un,bo++):(r=yt,0===Co&&l(ln)),r!==yt?(n=ot(),n!==yt?(34===t.charCodeAt(bo)?(o=un,bo++):(o=yt,0===Co&&l(ln)),o!==yt?(xo=e,r=Rn(n),e=r):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt),e}function ot(){var e;return t.substr(bo,4).toLowerCase()===Qn?(e=t.substr(bo,4),bo+=4):(e=yt,0===Co&&l(to)),e===yt&&(t.substr(bo,5).toLowerCase()===eo?(e=t.substr(bo,5),bo+=5):(e=yt,0===Co&&l(ro)),e===yt&&(t.substr(bo,2).toLowerCase()===no?(e=t.substr(bo,2),bo+=2):(e=yt,0===Co&&l(oo)),e===yt&&(t.substr(bo,3).toLowerCase()===io?(e=t.substr(bo,3),bo+=3):(e=yt,0===Co&&l(ao)),e===yt&&(48===t.charCodeAt(bo)?(e=co,bo++):(e=yt,0===Co&&l(so)),e===yt&&(49===t.charCodeAt(bo)?(e=uo,bo++):(e=yt,0===Co&&l(lo))))))),e}function it(){var t,e;return Co++,t=at(),t===yt&&(t=ct()),Co--,t===yt&&(e=yt,0===Co&&l(fo)),t}function at(){var e,r,n,o;return e=bo,34===t.charCodeAt(bo)?(r=un,bo++):(r=yt,0===Co&&l(ln)),r!==yt?(n=ct(),n!==yt?(34===t.charCodeAt(bo)?(o=un,bo++):(o=yt,0===Co&&l(ln)),o!==yt?(xo=e,r=Rn(n),e=r):(bo=e,e=yt)):(bo=e,e=yt)):(bo=e,e=yt),e}function ct(){var e,r;return e=bo,r=Q(),r!==yt&&(xo=e,r=ho(r)),e=r,e===yt&&(e=bo,t.substr(bo,4).toLowerCase()===go?(r=t.substr(bo,4),bo+=4):(r=yt,0===Co&&l(po)),r!==yt&&(xo=e,r=mo(r)),e=r),e}function st(t,e){return t=t||{},e&&Object.getOwnPropertyNames(e).forEach(function(r){t[r]=e[r]}),t}function ut(t){var e={};return t.forEach(function(t){e=st(e,t)}),e}function lt(t){return["true","on","1"].indexOf(t.toLowerCase())>-1}function dt(t,e){var r={};return r[t.toLowerCase()]=e,r}function ft(t,e,r){return void 0===e||"*"===e||(!!t.some(function(t){return t.name===e})||r[e]===!0)}function ht(t){var e={};return e.name=t,e}function gt(t,e,r){return t||(t=[]),r||(r={}),e&&e.forEach(function(e){e.forEach(function(e){ft(t,e.from,r)||t.push(ht(e.from)),e.arcs&&(r[e.to]=!0,st(t,gt(t,e.arcs,r)),delete r[e.to]),ft(t,e.to,r)||t.push(ht(e.to))})}),t}function pt(t){return!!t&&(t.hasOwnProperty("watermark")||t.hasOwnProperty("wordwrapentities")||t.hasOwnProperty("wordwrapboxes")||t.hasOwnProperty("width")&&"auto"===t.width)}function mt(t){return!!t&&t.some(function(t){return t.some(function(t){return["alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"].indexOf(t.kind)>-1})})}function bt(t,e){var r=pt(t),n=mt(e);return{extendedOptions:r,extendedArcTypes:n,extendedFeatures:r||n}}r=void 0!==r?r:{};var xt,yt={},wt={program:f},vt=f,Ct=function(t,e){e.entities=gt(e.entities,e.arcs);var r=e;return r=st({meta:bt(e.options,e.arcs)},r),t.length>0&&(r=st({precomment:t},r)),r},kt=function(t,e,r){var n={};return t&&(n.options=t),e&&(n.entities=e),r&&(n.arcs=r),n},At=",",_t=n(",",!1),Tt=function(t){return t},Lt=";",St=n(";",!1),Et=function(t){return ut(t[0].concat(t[1]))},jt="hscale",Pt=n("hscale",!0),Ft="arcgradient",Bt=n("arcgradient",!0),Dt="=",It=n("=",!1),Mt=function(t,e){return dt(t,e)},Nt="width",Ot=n("width",!0),Ht="wordwraparcs",Wt=n("wordwraparcs",!0),Rt=function(t,e){return dt(t,lt(e))},zt="wordwrapentities",Gt=n("wordwrapentities",!0),qt="wordwrapboxes",Xt=n("wordwrapboxes",!0),Ut="watermark",Vt=n("watermark",!0),Kt=function(t){return t},Yt=function(t){return t[0].concat(t[1])},Zt=c("entity"),$t=":",Jt=n(":",!1),Qt=function(t,e){return e},te=function(t,e){var r={};return r.name=t,e&&(r.label=e),r},ee=function(t){return t},re=function(t){return t[0].concat(t[1])},ne=function(t){return t},oe=function(t){return t},ie=function(t){return t},ae=function(t,e){return e},ce=function(t,e){return e&&(t.label=e),t},se=function(t){return{kind:t}},ue=function(t,e,r){return{kind:e,from:t,to:r}},le="*",de=n("*",!1),fe=function(t,e){return{kind:t,from:"*",to:e}},he=function(t,e){return{kind:e,from:t,to:"*"}},ge=function(t,e,r,n){return n},pe="{",me=n("{",!1),be="}",xe=n("}",!1),ye=function(t,e,r,n,o){var i={kind:e,from:t,to:r,arcs:o};return n&&(i.label=n),i},we=c("empty row"),ve="|||",Ce=n("|||",!1),ke="...",Ae=n("...",!1),_e=c("---"),Te="---",Le=n("---",!1),Se=function(t){return t.toLowerCase()},Ee=c("bi-directional arrow"),je="--",Pe=n("--",!1),Fe="<->",Be=n("<->",!1),De="==",Ie=n("==",!1),Me="<<=>>",Ne=n("<<=>>",!1),Oe="<=>",He=n("<=>",!1),We="..",Re=n("..",!1),ze="<<>>",Ge=n("<<>>",!1),qe="::",Xe=n("::",!1),Ue="<:>",Ve=n("<:>",!1),Ke=c("left to right arrow"),Ye="->",Ze=n("->",!1),$e="=>>",Je=n("=>>",!1),Qe="=>",tr=n("=>",!1),er=">>",rr=n(">>",!1),nr=":>",or=n(":>",!1),ir="-x",ar=n("-x",!0),cr=c("right to left arrow"),sr="<-",ur=n("<-",!1),lr="<<=",dr=n("<<=",!1),fr="<=",hr=n("<=",!1),gr="<<",pr=n("<<",!1),mr="<:",br=n("<:",!1),xr="x-",yr=n("x-",!0),wr=c("box"),vr="note",Cr=n("note",!0),kr="abox",Ar=n("abox",!0),_r="rbox",Tr=n("rbox",!0),Lr="box",Sr=n("box",!0),Er=c("inline expression"),jr="alt",Pr=n("alt",!0),Fr="else",Br=n("else",!0),Dr="opt",Ir=n("opt",!0),Mr="break",Nr=n("break",!0),Or="par",Hr=n("par",!0),Wr="seq",Rr=n("seq",!0),zr="strict",Gr=n("strict",!0),qr="neg",Xr=n("neg",!0),Ur="critical",Vr=n("critical",!0),Kr="ignore",Yr=n("ignore",!0),Zr="consider",$r=n("consider",!0),Jr="assert",Qr=n("assert",!0),tn="loop",en=n("loop",!0),rn="ref",nn=n("ref",!0),on="exc",an=n("exc",!0),cn=function(t){return t.toLowerCase()},sn=c("double quoted string"),un='"',ln=n('"',!1),dn=function(t){return t.join("")},fn='\\"',hn=n('\\"',!1),gn=i(),pn=function(t){return t},mn=function(t){return t.join("").trim()},bn=c("identifier"),xn=/^[^;, "\t\n\r=\-><:{*]/,yn=o([";",","," ",'"',"\t","\n","\r","=","-",">","<",":","{","*"],!0,!1),wn=function(t){return t.join("")},vn=c("whitespace"),Cn=/^[ \t]/,kn=o([" ","\t"],!1,!1),An=c("lineend"),_n=/^[\r\n]/,Tn=o(["\r","\n"],!1,!1),Ln="/*",Sn=n("/*",!1),En="*/",jn=n("*/",!1),Pn=function(t,e,r){return t+e.join("")+r},Fn="//",Bn=n("//",!1),Dn="#",In=n("#",!1),Mn=/^[^\r\n]/,Nn=o(["\r","\n"],!0,!1),On=function(t,e){return t+e.join("")},Hn=c("comment"),Wn=c("number"),Rn=function(t){return t},zn=function(t){return t.toString()},Gn=function(t){return t.toString()},qn=/^[0-9]/,Xn=o([["0","9"]],!1,!1),Un=function(t){return parseInt(t.join(""),10)},Vn=".",Kn=n(".",!1),Yn=function(t){return parseFloat(t.join(""))},Zn=c("boolean"),$n=function(t){return t},Jn=function(t){return t.toString()},Qn="true",to=n("true",!0),eo="false",ro=n("false",!0),no="on",oo=n("on",!0),io="off",ao=n("off",!0),co="0",so=n("0",!1),uo="1",lo=n("1",!1),fo=c("size"),ho=function(t){return t.toString()},go="auto",po=n("auto",!0),mo=function(t){return t.toLowerCase()},bo=0,xo=0,yo=[{line:1,column:1}],wo=0,vo=[],Co=0;if("startRule"in r){if(!(r.startRule in wt))throw new Error("Can't start parsing from rule \""+r.startRule+'".');vt=wt[r.startRule]}if(xt=vt(),xt!==yt&&bo===t.length)return xt;throw xt!==yt&&bo<t.length&&l(a()),d(vo,wo<t.length?t.charAt(wo):null,wo<t.length?u(wo,wo+1):u(wo,wo))}return t(e,Error),e.buildMessage=function(t,e){function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function n(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function i(t){return s[t.type](t)}function a(t){var e,r,n=new Array(t.length);for(e=0;e<t.length;e++)n[e]=i(t[e]);if(n.sort(),n.length>0){for(e=1,r=1;e<n.length;e++)n[e-1]!==n[e]&&(n[r]=n[e],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}function c(t){return t?'"'+n(t)+'"':"end of input"}var s={literal:function(t){return'"'+n(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?o(t.parts[e][0])+"-"+o(t.parts[e][1]):o(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};return"Expected "+a(t)+" but "+c(e)+" found."},{SyntaxError:e,parse:r}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory/domprimitives",[],function(){"use strict";function t(t,e,r){return Boolean(r)&&t.setAttribute(e,r),t}function e(t,e,r,n){return Boolean(n)&&t.setAttributeNS(e,r,n),t}function r(e,r){return r&&Object.keys(r).forEach(function(n){t(e,n,r[n])}),e}function n(t,r,n){return n&&Object.keys(n).forEach(function(o){e(t,r,o,n[o])}),t}function o(t,e){return r(s.createElementNS(a,t),e)}function i(t){return s.createTextNode(t)}var a="http://www.w3.org/2000/svg",c="http://www.w3.org/1999/xlink",s={};return{SVGNS:a,XLINKNS:c,init:function(t){s=t},setAttribute:t,setAttributes:r,setAttributesNS:n,createElement:o,createTextNode:i}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory/geometry",[],function(){"use strict";function t(t){return 360*t/(2*Math.PI)}return{getDiagonalAngle:function(e){return 0-t(Math.atan(e.height/e.width))}}}),function(){function t(t,e){return t.set(e[0],e[1]),t}function e(t,e){return t.add(e),t}function n(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function o(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}function i(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}function a(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function c(t,e,r,n){var o=-1,i=null==t?0:t.length;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}function s(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function u(t){return function(e){return t(e)}}function l(t,e){return null==t?Yt:t[e]}function d(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function f(t,e){return function(r){return t(e(r))}}function h(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function g(){}function p(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function m(){this.__data__=Sr?Sr(null):{},this.size=0}function b(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function x(t){var e=this.__data__;if(Sr){var r=e[t];return r===Qt?Yt:r}return nr.call(e,t)?e[t]:Yt}function y(t){var e=this.__data__;return Sr?e[t]!==Yt:nr.call(e,t)}function w(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Sr&&e===Yt?Qt:e,this}function v(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function C(){this.__data__=[],this.size=0}function k(t){var e=this.__data__,r=R(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():gr.call(e,r,1),--this.size,!0}function A(t){var e=this.__data__,r=R(e,t);return r<0?Yt:e[r][1]}function _(t){return R(this.__data__,t)>-1}function T(t,e){var r=this.__data__,n=R(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function L(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function S(){this.size=0,this.__data__={hash:new p,map:new(Ar||v),string:new p}}function E(t){var e=bt(this,t).delete(t);return this.size-=e?1:0,e}function j(t){return bt(this,t).get(t)}function P(t){return bt(this,t).has(t)}function F(t,e){var r=bt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function B(t){var e=this.__data__=new v(t);this.size=e.size}function D(){this.__data__=new v,this.size=0}function I(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function M(t){return this.__data__.get(t)}function N(t){return this.__data__.has(t)}function O(t,e){var r=this.__data__;if(r instanceof v){var n=r.__data__;if(!Ar||n.length<$t-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new L(n)}return r.set(t,e),this.size=r.size,this}function H(t,e){var r=Gr(t),n=!r&&zr(t),o=!r&&!n&&qr(t),i=!r&&!n&&!o&&Xr(t),a=r||n||o||i,c=a?s(t.length,String):[],u=c.length;for(var l in t)!e&&!nr.call(t,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||At(l,u))||c.push(l);return c}function W(t,e,r){var n=t[e];nr.call(t,e)&&Nt(n,r)&&(r!==Yt||e in t)||q(t,e,r)}function R(t,e){for(var r=t.length;r--;)if(Nt(t[r][0],e))return r;return-1}function z(t,e){return t&&lt(e,Gt(e),t)}function G(t,e){return t&&lt(e,qt(e),t)}function q(t,e,r){"__proto__"==e&&br?br(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function X(t,e,r,n,i,a){var c,s=e&te,u=e&ee,l=e&re;if(r&&(c=i?r(t,n,i,a):r(t)),c!==Yt)return c;if(!Rt(t))return t;var d=Gr(t);if(d){if(c=wt(t),!s)return ut(t,c)}else{var f=Wr(t),h=f==fe||f==he;if(qr(t))return et(t,s);if(f==be||f==ae||h&&!i){if(c=u||h?{}:vt(t),!s)return u?ft(t,G(c,t)):dt(t,z(c,t))}else{if(!ze[f])return i?t:{};c=Ct(t,f,X,s)}}a||(a=new B);var g=a.get(t);if(g)return g;a.set(t,c);var p=l?u?mt:pt:u?qt:Gt,m=d?Yt:p(t);return o(m||t,function(n,o){m&&(o=n,n=t[o]),W(c,o,X(n,e,r,o,t,a))}),c}function U(t,e,r,n,o){var i=-1,c=t.length;for(r||(r=kt),o||(o=[]);++i<c;){var s=t[i];e>0&&r(s)?e>1?U(s,e-1,r,n,o):a(o,s):n||(o[o.length]=s)}return o}function V(t,e,r){var n=e(t);return Gr(t)?n:a(n,r(t))}function K(t){return null==t?t===Yt?Ae:me:mr&&mr in Object(t)?yt(t):jt(t)}function Y(t){return zt(t)&&K(t)==ae}function Z(t){if(!Rt(t)||Lt(t))return!1;var e=Ht(t)?ar:He;return e.test(Bt(t))}function $(t){return zt(t)&&Wt(t.length)&&!!Re[K(t)]}function J(t){if(!St(t))return wr(t);var e=[];for(var r in Object(t))nr.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Q(t){if(!Rt(t))return Et(t);var e=St(t),r=[];for(var n in t)("constructor"!=n||!e&&nr.call(t,n))&&r.push(n);return r}function tt(t,e){return Rr(Pt(t,e,Ut),t+"")}function et(t,e){if(e)return t.slice();var r=t.length,n=lr?lr(r):new t.constructor(r);return t.copy(n),n}function rt(t){var e=new t.constructor(t.byteLength);return new ur(e).set(new ur(t)),e}function nt(t,e){var r=e?rt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function ot(e,r,n){var o=r?n(d(e),te):d(e);return c(o,t,new e.constructor);
}function it(t){var e=new t.constructor(t.source,Oe.exec(t));return e.lastIndex=t.lastIndex,e}function at(t,r,n){var o=r?n(h(t),te):h(t);return c(o,e,new t.constructor)}function ct(t){return Ir?Object(Ir.call(t)):{}}function st(t,e){var r=e?rt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function ut(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function lt(t,e,r,n){var o=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var c=e[i],s=n?n(r[c],t[c],c,r,t):Yt;s===Yt&&(s=t[c]),o?q(r,c,s):W(r,c,s)}return r}function dt(t,e){return lt(t,Or(t),e)}function ft(t,e){return lt(t,Hr(t),e)}function ht(t){return tt(function(e,r){var n=-1,o=r.length,i=o>1?r[o-1]:Yt,a=o>2?r[2]:Yt;for(i=t.length>3&&"function"==typeof i?(o--,i):Yt,a&&_t(r[0],r[1],a)&&(i=o<3?Yt:i,o=1),e=Object(e);++n<o;){var c=r[n];c&&t(e,c,n,i)}return e})}function gt(t,e,r,n){return t===Yt||Nt(t,tr[r])&&!nr.call(n,r)?e:t}function pt(t){return V(t,Gt,Or)}function mt(t){return V(t,qt,Hr)}function bt(t,e){var r=t.__data__;return Tt(e)?r["string"==typeof e?"string":"hash"]:r.map}function xt(t,e){var r=l(t,e);return Z(r)?r:Yt}function yt(t){var e=nr.call(t,mr),r=t[mr];try{t[mr]=Yt;var n=!0}catch(t){}var o=ir.call(t);return n&&(e?t[mr]=r:delete t[mr]),o}function wt(t){var e=t.length,r=t.constructor(e);return e&&"string"==typeof t[0]&&nr.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function vt(t){return"function"!=typeof t.constructor||St(t)?{}:Mr(dr(t))}function Ct(t,e,r,n){var o=t.constructor;switch(e){case Te:return rt(t);case ue:case le:return new o(+t);case Le:return nt(t,n);case Se:case Ee:case je:case Pe:case Fe:case Be:case De:case Ie:case Me:return st(t,n);case ge:return ot(t,n,r);case pe:case Ce:return new o(t);case we:return it(t);case ve:return at(t,n,r);case ke:return ct(t)}}function kt(t){return Gr(t)||zr(t)||!!(pr&&t&&t[pr])}function At(t,e){return e=null==e?ie:e,!!e&&("number"==typeof t||We.test(t))&&t>-1&&t%1==0&&t<e}function _t(t,e,r){if(!Rt(r))return!1;var n=typeof e;return!!("number"==n?Ot(r)&&At(e,r.length):"string"==n&&e in r)&&Nt(r[e],t)}function Tt(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Lt(t){return!!or&&or in t}function St(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||tr;return t===r}function Et(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}function jt(t){return ir.call(t)}function Pt(t,e,r){return e=vr(e===Yt?t.length-1:e,0),function(){for(var o=arguments,i=-1,a=vr(o.length-e,0),c=Array(a);++i<a;)c[i]=o[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=o[i];return s[e]=r(c),n(t,this,s)}}function Ft(t){var e=0,r=0;return function(){var n=Cr(),o=oe-(n-r);if(r=n,o>0){if(++e>=ne)return arguments[0]}else e=0;return t.apply(Yt,arguments)}}function Bt(t){if(null!=t){try{return rr.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Dt(t){var e=null==t?0:t.length;return e?U(t,1):[]}function It(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(Jt);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(It.Cache||L),r}function Mt(t){return X(t,te|re)}function Nt(t,e){return t===e||t!==t&&e!==e}function Ot(t){return null!=t&&Wt(t.length)&&!Ht(t)}function Ht(t){if(!Rt(t))return!1;var e=K(t);return e==fe||e==he||e==se||e==ye}function Wt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=ie}function Rt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function zt(t){return null!=t&&"object"==typeof t}function Gt(t){return Ot(t)?H(t):J(t)}function qt(t){return Ot(t)?H(t,!0):Q(t)}function Xt(t){return function(){return t}}function Ut(t){return t}function Vt(){return[]}function Kt(){return!1}var Yt,Zt="4.17.4",$t=200,Jt="Expected a function",Qt="__lodash_hash_undefined__",te=1,ee=2,re=4,ne=800,oe=16,ie=9007199254740991,ae="[object Arguments]",ce="[object Array]",se="[object AsyncFunction]",ue="[object Boolean]",le="[object Date]",de="[object Error]",fe="[object Function]",he="[object GeneratorFunction]",ge="[object Map]",pe="[object Number]",me="[object Null]",be="[object Object]",xe="[object Promise]",ye="[object Proxy]",we="[object RegExp]",ve="[object Set]",Ce="[object String]",ke="[object Symbol]",Ae="[object Undefined]",_e="[object WeakMap]",Te="[object ArrayBuffer]",Le="[object DataView]",Se="[object Float32Array]",Ee="[object Float64Array]",je="[object Int8Array]",Pe="[object Int16Array]",Fe="[object Int32Array]",Be="[object Uint8Array]",De="[object Uint8ClampedArray]",Ie="[object Uint16Array]",Me="[object Uint32Array]",Ne=/[\\^$.*+?()[\]{}|]/g,Oe=/\w*$/,He=/^\[object .+?Constructor\]$/,We=/^(?:0|[1-9]\d*)$/,Re={};Re[Se]=Re[Ee]=Re[je]=Re[Pe]=Re[Fe]=Re[Be]=Re[De]=Re[Ie]=Re[Me]=!0,Re[ae]=Re[ce]=Re[Te]=Re[ue]=Re[Le]=Re[le]=Re[de]=Re[fe]=Re[ge]=Re[pe]=Re[be]=Re[we]=Re[ve]=Re[Ce]=Re[_e]=!1;var ze={};ze[ae]=ze[ce]=ze[Te]=ze[Le]=ze[ue]=ze[le]=ze[Se]=ze[Ee]=ze[je]=ze[Pe]=ze[Fe]=ze[ge]=ze[pe]=ze[be]=ze[we]=ze[ve]=ze[Ce]=ze[ke]=ze[Be]=ze[De]=ze[Ie]=ze[Me]=!0,ze[de]=ze[fe]=ze[_e]=!1;var Ge="object"==typeof global&&global&&global.Object===Object&&global,qe="object"==typeof self&&self&&self.Object===Object&&self,Xe=Ge||qe||Function("return this")(),Ue="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ve=Ue&&"object"==typeof module&&module&&!module.nodeType&&module,Ke=Ve&&Ve.exports===Ue,Ye=Ke&&Ge.process,Ze=function(){try{return Ye&&Ye.binding&&Ye.binding("util")}catch(t){}}(),$e=Ze&&Ze.isTypedArray,Je=Array.prototype,Qe=Function.prototype,tr=Object.prototype,er=Xe["__core-js_shared__"],rr=Qe.toString,nr=tr.hasOwnProperty,or=function(){var t=/[^.]+$/.exec(er&&er.keys&&er.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ir=tr.toString,ar=RegExp("^"+rr.call(nr).replace(Ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),cr=Ke?Xe.Buffer:Yt,sr=Xe.Symbol,ur=Xe.Uint8Array,lr=cr?cr.allocUnsafe:Yt,dr=f(Object.getPrototypeOf,Object),fr=Object.create,hr=tr.propertyIsEnumerable,gr=Je.splice,pr=sr?sr.isConcatSpreadable:Yt,mr=sr?sr.toStringTag:Yt,br=function(){try{var t=xt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),xr=Object.getOwnPropertySymbols,yr=cr?cr.isBuffer:Yt,wr=f(Object.keys,Object),vr=Math.max,Cr=Date.now,kr=xt(Xe,"DataView"),Ar=xt(Xe,"Map"),_r=xt(Xe,"Promise"),Tr=xt(Xe,"Set"),Lr=xt(Xe,"WeakMap"),Sr=xt(Object,"create"),Er=Bt(kr),jr=Bt(Ar),Pr=Bt(_r),Fr=Bt(Tr),Br=Bt(Lr),Dr=sr?sr.prototype:Yt,Ir=Dr?Dr.valueOf:Yt,Mr=function(){function t(){}return function(e){if(!Rt(e))return{};if(fr)return fr(e);t.prototype=e;var r=new t;return t.prototype=Yt,r}}();p.prototype.clear=m,p.prototype.delete=b,p.prototype.get=x,p.prototype.has=y,p.prototype.set=w,v.prototype.clear=C,v.prototype.delete=k,v.prototype.get=A,v.prototype.has=_,v.prototype.set=T,L.prototype.clear=S,L.prototype.delete=E,L.prototype.get=j,L.prototype.has=P,L.prototype.set=F,B.prototype.clear=D,B.prototype.delete=I,B.prototype.get=M,B.prototype.has=N,B.prototype.set=O;var Nr=br?function(t,e){return br(t,"toString",{configurable:!0,enumerable:!1,value:Xt(e),writable:!0})}:Ut,Or=xr?function(t){return null==t?[]:(t=Object(t),i(xr(t),function(e){return hr.call(t,e)}))}:Vt,Hr=xr?function(t){for(var e=[];t;)a(e,Or(t)),t=dr(t);return e}:Vt,Wr=K;(kr&&Wr(new kr(new ArrayBuffer(1)))!=Le||Ar&&Wr(new Ar)!=ge||_r&&Wr(_r.resolve())!=xe||Tr&&Wr(new Tr)!=ve||Lr&&Wr(new Lr)!=_e)&&(Wr=function(t){var e=K(t),r=e==be?t.constructor:Yt,n=r?Bt(r):"";if(n)switch(n){case Er:return Le;case jr:return ge;case Pr:return xe;case Fr:return ve;case Br:return _e}return e});var Rr=Ft(Nr);It.Cache=L;var zr=Y(function(){return arguments}())?Y:function(t){return zt(t)&&nr.call(t,"callee")&&!hr.call(t,"callee")},Gr=Array.isArray,qr=yr||Kt,Xr=$e?u($e):$,Ur=ht(function(t,e,r,n){lt(e,qt(e),t,n)}),Vr=tt(function(t){return t.push(Yt,gt),n(Ur,Yt,t)});g.assignInWith=Ur,g.constant=Xt,g.defaults=Vr,g.flatten=Dt,g.keys=Gt,g.keysIn=qt,g.memoize=It,g.extendWith=Ur,g.cloneDeep=Mt,g.eq=Nt,g.identity=Ut,g.isArguments=zr,g.isArray=Gr,g.isArrayLike=Ot,g.isBuffer=qr,g.isFunction=Ht,g.isLength=Wt,g.isObject=Rt,g.isObjectLike=zt,g.isTypedArray=Xr,g.stubArray=Vt,g.stubFalse=Kt,g.VERSION=Zt,"function"==typeof r&&"object"==typeof r.amd&&r.amd?(Xe._=g,r("lib/mscgenjs-core/lib/lodash/lodash.custom",[],function(){return g})):Ve?((Ve.exports=g)._=g,Ue._=g):Xe._=g}.call(this),r("lib/mscgenjs-core/render/graphics/svgelementfactory/round",[],function(){"use strict";return function(t,e){return e?Math.round(t*Math.pow(10,e),e)/Math.pow(10,e):Math.round(t)}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory/svgprimitives",["require","./domprimitives","./geometry","../../../lib/lodash/lodash.custom","./round"],function(t){function e(t,e){return f(t,h).toString()+","+f(e,h).toString()+" "}function r(t,r,n){return t+e(r,n)}function n(t,e,r,n){return u.createElement("marker",{orient:r,id:t,class:e,viewBox:Boolean(n)?n:"0 0 10 10",refX:"9",refY:"3",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10"})}function o(t,e){var r=u.createElement("a");return u.setAttributesNS(r,u.XLINKNS,{"xlink:href":t,"xlink:title":t}),r.appendChild(e),r}function i(t,e){var r=u.createElement("tspan"),n=u.createTextNode(t);return r.appendChild(n),e?o(e,r):r}function a(t,e,r){var n=d.defaults(r,{class:null,url:null,id:null,idurl:null}),o=u.createElement("text",{x:f(e.x,h).toString(),y:f(e.y,h).toString(),class:n.class});if(o.appendChild(i(t,n.url)),n.id){var a=i(" ["+n.id+"]",n.idurl);a.setAttribute("style",g),o.appendChild(a)}return o}function c(t,e){var r=d.defaults(e,{class:null,style:null,color:null,bgColor:null});return s(u.createElement("path",{d:t,class:r.class,style:r.style}),r.color,r.bgColor)}function s(t,e,r){var n="";return r&&(n+="fill:"+r+";"),e&&(n+="stroke:"+e+";"),u.setAttribute(t,"style",n)}var u=t("./domprimitives"),l=t("./geometry"),d=t("../../../lib/lodash/lodash.custom"),f=t("./round"),h=2,g="vertical-align:text-top;";return g+="font-size:0.7em;text-anchor:start;",{init:function(t){u.init(t)},createSVG:function(t,e){return u.createElement("svg",{version:"1.1",id:t,class:e,xmlns:u.SVGNS,"xmlns:xlink":u.XLINKNS,width:"0",height:"0"})},updateSVG:function(t,e){u.setAttributes(t,e)},colorBox:s,createDesc:function(){return u.createElement("desc")},createDefs:function(){return u.createElement("defs")},createTSpan:i,createText:a,createDiagonalText:function(t,e,r){return u.setAttributes(a(t,{x:e.width/2,y:e.height/2},{class:r}),{transform:"rotate("+f(l.getDiagonalAngle(e),h).toString()+" "+f(e.width/2,h).toString()+" "+f(e.height/2,h).toString()+")"})},createSingleLine:function(t,e){return u.createElement("line",{x1:f(t.xFrom,h).toString(),y1:f(t.yFrom,h).toString(),x2:f(t.xTo,h).toString(),y2:f(t.yTo,h).toString(),class:e?e.class:null})},createRect:function(t,e){var r=d.defaults(e,{class:null,color:null,bgColor:null,rx:null,ry:null});return s(u.createElement("rect",{width:f(t.width,h),height:f(t.height,h),x:f(t.x,h),y:f(t.y,h),rx:f(r.rx,h),ry:f(r.ry,h),class:r.class}),r.color,r.bgColor)},createUTurn:function(t,n,o,i,a,s){var u=d.defaults(a,{dontHitHome:!1,lineWidth:1}),l=u.dontHitHome?t.x+7.5*a.lineWidth:t.x;return c(r("M",t.x,t.y-s/2)+r("C",t.x+o,t.y-7.5*a.lineWidth/2)+e(t.x+o,n+0)+e(l,n),{class:i})},createGroup:function(t,e){return u.createElement("g",{id:t,class:e})},createUse:function(t,e){var r=u.createElement("use",{x:f(t.x,h).toString(),y:f(t.y,h).toString()});return r.setAttributeNS(u.XLINKNS,"xlink:href","#"+e),r},createPath:c,createMarkerPath:function(t,e,r){var o=n(t,"arrow-marker","auto");return o.appendChild(c(e,{class:"arrow-style",style:"stroke-dasharray:100,1;stroke:"+r||"black"})),o},createMarkerPolygon:function(t,e,r){var o=n(t,"arrow-marker","auto");return o.appendChild(u.createElement("polygon",{points:e,class:"arrow-style",stroke:r||"black",fill:r||"black"})),o},createTitle:function(t){var e=u.createElement("title"),r=u.createTextNode(t);return e.appendChild(r),e},point2String:e,pathPoint2String:r}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory/variationhelpers",[],function(){"use strict";function t(t,e,r){var n=0;return e.indexOf("nodi")<0&&e.indexOf("bidi")>-1&&(n=t.xTo>t.xFrom?7.5*r:-7.5*r),n}function e(t,e,r){var n=0;return e.indexOf("nodi")<0&&(n=t.xTo>t.xFrom?-7.5*r:7.5*r),n}function r(t){var e=Math.abs(t.xTo-t.xFrom),r=Math.abs(t.yTo-t.yFrom);return Math.sqrt(e*e+r*r)}function n(t,e){var n=r(t);return n>0?Math.floor(n/e):0}function o(t){var e=t.xTo>t.xFrom?1:-1;return{signX:e,signY:t.yTo>t.yFrom?1:-1,dy:e*(t.yTo-t.yFrom)/(t.xTo-t.xFrom)}}function i(t){return Math.round(2*Math.random()*t)-t}function a(t){return Math.round(100*t)/100}function c(t,e,c){if(e<=0)throw new Error("pInterval must be > 0");e=Math.min(r(t),e);for(var s=[],u=n(t,e),l=o(t),d=l.signX*Math.sqrt(Math.pow(e,2)/(1+Math.pow(l.dy,2))),f=l.signY*(Math.abs(l.dy)===1/0?e:Math.sqrt(Math.pow(l.dy,2)*Math.pow(e,2)/(1+Math.pow(l.dy,2)))),h={},g=1;g<=u;g++)h={controlX:a(t.xFrom+(g-.5)*d+i(c)),controlY:a(t.yFrom+(g-.5)*f+i(c)),x:a(t.xFrom+g*d),y:a(t.yFrom+g*f)},e>r({xFrom:h.x,yFrom:h.y,xTo:t.xTo,yTo:t.yTo})&&(h.x=t.xTo,h.y=t.yTo),s.push(h);return s}return{round:a,determineStartCorrection:t,determineEndCorrection:e,getDirection:o,getLineLength:r,getNumberOfSegments:n,getBetweenPoints:c}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory/straight",["require","./svgprimitives","./variationhelpers","../../../lib/lodash/lodash.custom"],function(t){function e(t,e){var r=e.lineWidth||1,n=r,o=e?e.class:null,i=c.getDirection(t),s=c.determineEndCorrection(t,o,r),u=c.determineStartCorrection(t,o,r),l=(t.xTo-t.xFrom+s-u).toString(),d=(t.yTo-t.yFrom).toString(),f=a.pathPoint2String("l",i.signX,i.dy),h=a.pathPoint2String("l",l,d);return a.createPath(a.pathPoint2String("M",t.xFrom,t.yFrom-7.5*r*i.dy)+f+a.pathPoint2String("M",t.xFrom+u,t.yFrom-n)+h+a.pathPoint2String("M",t.xFrom+u,t.yFrom+n)+h+a.pathPoint2String("M",t.xTo-i.signX,t.yTo+7.5*r*i.dy)+f,e)}function r(t,e){var r=e?e.lineWidth||1:1,n=Math.max(9,Math.min(4.5*r,t.height/2)),o=n.toString(10);return a.createPath(a.pathPoint2String("M",t.x,t.y)+a.pathPoint2String("l",t.width-n,0)+a.pathPoint2String("l",0,o)+a.pathPoint2String("l",o,0)+a.pathPoint2String("m",-o,-o)+a.pathPoint2String("l",o,o)+a.pathPoint2String("l",0,t.height-n)+a.pathPoint2String("l",-t.width,0)+a.pathPoint2String("l",0,-t.height)+"z",e)}function n(t,e){var r=6;return e.rx=r,e.ry=r,a.createRect(t,e)}function o(t,e){var r=3;return a.createPath(a.pathPoint2String("M",t.x,t.y+t.height/2)+a.pathPoint2String("l",r,-(t.height/2))+a.pathPoint2String("l",t.width-2*r,0)+a.pathPoint2String("l",r,t.height/2)+a.pathPoint2String("l",-r,t.height/2)+a.pathPoint2String("l",-(t.width-2*r),0)+"z",e)}function i(t,e){var r=e&&e.foldSize?e.foldSize:7,n=s.defaults(e,{class:null,color:null,bgColor:null});return a.createPath(a.pathPoint2String("M",t.x,t.y)+a.pathPoint2String("l",t.width,0)+a.pathPoint2String("l",0,t.height-r)+a.pathPoint2String("l",-r,r)+a.pathPoint2String("l",-(t.width-r),0),n)}var a=t("./svgprimitives"),c=t("./variationhelpers"),s=t("../../../lib/lodash/lodash.custom");return{createSingleLine:a.createSingleLine,createDoubleLine:e,createNote:r,createRect:a.createRect,createABox:o,createRBox:n,createEdgeRemark:i,createDesc:a.createDesc,createDefs:a.createDefs,createDiagonalText:a.createDiagonalText,createTSpan:a.createTSpan,createText:a.createText,createUTurn:a.createUTurn,createGroup:a.createGroup,createUse:a.createUse,createMarkerPath:a.createMarkerPath,createMarkerPolygon:a.createMarkerPolygon,createTitle:a.createTitle,createSVG:a.createSVG,updateSVG:a.updateSVG,init:a.init}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory/wobbly",["require","./svgprimitives","./variationhelpers"],function(t){function e(t){return t.map(function(t){return f.pathPoint2String("S",t.controlX,t.controlY)+" "+f.point2String(t.x,t.y)}).join(" ")}function r(t,r){var n=h.getDirection(t);return f.createPath(f.pathPoint2String("M",t.xFrom,t.yFrom)+f.pathPoint2String("L",h.round(t.xFrom+n.signX*Math.sqrt(1/(1+Math.pow(n.dy,2)))),t.yFrom+n.signY*(Math.abs(n.dy)===1/0?1:h.round(Math.sqrt(Math.pow(n.dy,2)/(1+Math.pow(n.dy,2))))))+e(h.getBetweenPoints(t,g,p)),{class:r?r.class:null})}function n(t,r){return f.pathPoint2String("M",t.x,t.y)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y,xTo:t.x+t.width-r,yTo:t.y},g,p))+f.pathPoint2String("L",t.x+t.width-r,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width-r,yFrom:t.y,xTo:t.x+t.width,yTo:t.y+r},g,p))+f.pathPoint2String("L",t.x+t.width,t.y+r)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+r,xTo:t.x+t.width,yTo:t.y+t.height},g,p))+f.pathPoint2String("L",t.x+t.width,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+t.height,xTo:t.x,yTo:t.y+t.height},g,p))+f.pathPoint2String("L",t.x,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y+t.height,xTo:t.x,yTo:t.y},g,p))+f.pathPoint2String("L",t.x,t.y)+"z"}function o(t,r){return f.pathPoint2String("M",t.x+t.width-r,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width-r,yFrom:t.y,xTo:t.x+t.width-r,yTo:t.y+r},g,p))+f.pathPoint2String("L",t.x+t.width-r,t.y+r)+e(h.getBetweenPoints({xFrom:t.x+t.width-r,yFrom:t.y+r,xTo:t.x+t.width,yTo:t.y+r},g,p))+f.pathPoint2String("L",t.x+t.width,t.y+r)}function i(t,e){var r=e?e.lineWidth||1:1,i=Math.max(9,Math.min(4.5*r,t.height/2)),a=f.createGroup();return a.appendChild(f.createPath(n(t,i),e)),e.bgColor="transparent",a.appendChild(f.createPath(o(t,i),e)),a}function a(t){return Boolean(t.y)||(t.y=0),f.pathPoint2String("M",t.x,t.y)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y,xTo:t.x+t.width,yTo:t.y},g,p))+f.pathPoint2String("L",t.x+t.width,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y,xTo:t.x+t.width,yTo:t.y+t.height},g,p))+f.pathPoint2String("L",t.x+t.width,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+t.height,xTo:t.x,yTo:t.y+t.height},g,p))+f.pathPoint2String("L",t.x,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y+t.height,xTo:t.x,yTo:t.y},g,p))+"z"}function c(t,e){return f.createPath(a(t,e),e)}function s(t,r){var n=3;return f.createPath(f.pathPoint2String("M",t.x,t.y+t.height/2)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y+t.height/2,xTo:t.x+n,yTo:t.y},g,p))+f.pathPoint2String("L",t.x+n,t.y)+e(h.getBetweenPoints({xFrom:t.x+n,yFrom:t.y,xTo:t.x+t.width-n,yTo:t.y},g,p))+f.pathPoint2String("L",t.x+t.width-n,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width-n,yFrom:t.y,xTo:t.x+t.width,yTo:t.y+t.height/2},g,p))+f.pathPoint2String("L",t.x+t.width,t.y+t.height/2)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+t.height/2,xTo:t.x+t.width-n,yTo:t.y+t.height},g,p))+f.pathPoint2String("L",t.x+t.width-n,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+t.width-n,yFrom:t.y+t.height,xTo:t.x+n,yTo:t.y+t.height},g,p))+f.pathPoint2String("L",t.x+n,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+n,yFrom:t.y+t.height,xTo:t.x,yTo:t.y+t.height/2},g,p))+"z",r)}function u(t,r){var n=6;return f.createPath(f.pathPoint2String("M",t.x,t.y+n)+e([{controlX:t.x,controlY:t.y,x:t.x+n,y:t.y}])+e(h.getBetweenPoints({xFrom:t.x+n,yFrom:t.y,xTo:t.x+t.width-n,yTo:t.y},g,p))+f.pathPoint2String("L",t.x+t.width-n,t.y)+e([{controlX:t.x+t.width,controlY:t.y,x:t.x+t.width,y:t.y+n}])+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+n,xTo:t.x+t.width,yTo:t.y+t.height-n},g,p))+f.pathPoint2String("L",t.x+t.width,t.y+t.height-n)+e([{controlX:t.x+t.width,controlY:t.y+t.height,x:t.x+t.width-n,y:t.y+t.height}])+e(h.getBetweenPoints({xFrom:t.x+t.width-n,yFrom:t.y+t.height,xTo:t.x+n,yTo:t.y+t.height},g,p))+f.pathPoint2String("L",t.x+n,t.y+t.height)+e([{controlX:t.x,controlY:t.y+t.height,x:t.x,y:t.y+t.height-n}])+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y+t.height-n,xTo:t.x,yTo:t.y+n},g,p))+"z",r)}function l(t,r){var n=r?r.lineWidth||1:1,o=f.createGroup(),i=r&&r.foldSize?r.foldSize:7,a=r&&r.color?r.color:"black";r.color="transparent!important";var c=f.createPath(f.pathPoint2String("M",t.x,t.y+n/2)+f.pathPoint2String("L",t.x+t.width,t.y+n/2)+f.pathPoint2String("L",t.x+t.width,t.y+t.height-i)+f.pathPoint2String("L",t.x+t.width-i,t.y+t.height)+f.pathPoint2String("L",t.x,t.y+t.height)+"z",r);r.bgColor="transparent",r.color=a;var s=f.createPath(f.pathPoint2String("M",t.x+t.width,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y,xTo:t.x+t.width,yTo:t.y+t.height-i},g,p))+f.pathPoint2String("L",t.x+t.width,t.y+t.height-i)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+t.height-i,xTo:t.x+t.width-i,yTo:t.y+t.height},g,p))+f.pathPoint2String("L",t.x+t.width-i,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+t.width-i,yFrom:t.y+t.height,xTo:t.x-1,yTo:t.y+t.height},g,p))+f.pathPoint2String("L",t.x-1,t.y+t.height),r);return o.appendChild(c),o.appendChild(s),o}function d(t,r){var n=r.lineWidth||1,o=n,i=r?r.class:null,a=h.getDirection(t),c=h.determineEndCorrection(t,i,n),s=h.determineStartCorrection(t,i,n);return f.createPath(f.pathPoint2String("M",t.xFrom,t.yFrom-7.5*n*a.dy)+f.pathPoint2String("l",a.signX,a.dy)+f.pathPoint2String("M",t.xFrom+s,t.yFrom-o)+e(h.getBetweenPoints({xFrom:t.xFrom+s,yFrom:t.yFrom-o,xTo:t.xTo+c,yTo:t.yTo-o},g,p))+f.pathPoint2String("M",t.xFrom+s,t.yFrom+o)+e(h.getBetweenPoints({xFrom:t.xFrom+s,yFrom:t.yFrom+o,xTo:t.xTo+c,yTo:t.yTo+o},g,p))+f.pathPoint2String("M",t.xTo-a.signX,t.yTo+7.5*n*a.dy)+f.pathPoint2String("l",a.signX,a.dy),i)}var f=t("./svgprimitives"),h=t("./variationhelpers"),g=70,p=3;return{createSingleLine:r,createDoubleLine:d,createNote:i,createRect:c,createABox:s,createRBox:u,createEdgeRemark:l,createDesc:f.createDesc,createDefs:f.createDefs,createDiagonalText:f.createDiagonalText,createTSpan:f.createTSpan,createText:f.createText,createUTurn:f.createUTurn,createGroup:f.createGroup,createUse:f.createUse,createMarkerPath:f.createMarkerPath,createMarkerPolygon:f.createMarkerPolygon,createTitle:f.createTitle,createSVG:f.createSVG,updateSVG:f.updateSVG,init:f.init}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory/index",["require","./straight","./wobbly","../../../lib/lodash/lodash.custom"],function(t){"use strict";function e(t){return Boolean(t)?"wobbly"===t?n:r:i}var r=t("./straight"),n=t("./wobbly"),o=t("../../../lib/lodash/lodash.custom"),i=r,a={};return{init:function(t,e){i.init(t),a=o.defaults(e,{LINE_WIDTH:2,FONT_SIZE:12})},createSVG:function(t,r,n){return i=e(n),i.createSVG(t,r)},updateSVG:i.updateSVG,createTitle:i.createTitle,createDesc:i.createDesc,createDefs:i.createDefs,createTSpan:i.createTSpan,createRect:function(t,e,r,n){return i.createRect(t,{class:e,color:r,bgColor:n})},createRBox:function(t,e,r,n){return i.createRBox(t,{class:e,color:r,bgColor:n})},createABox:function(t,e,r,n){return i.createABox(t,{class:e,color:r,bgColor:n})},createNote:function(t,e,r,n){return i.createNote(t,{class:e,color:r,bgColor:n,lineWidth:a.LINE_WIDTH})},createEdgeRemark:function(t,e,r,n,o){return i.createEdgeRemark(t,{class:e,color:r,bgColor:n,foldSize:o,lineWidth:a.LINE_WIDTH})},createText:i.createText,createDiagonalText:i.createDiagonalText,createLine:function(t,e){return Boolean(e)&&Boolean(e.doubleLine)?(e.lineWidth||(e.lineWidth=a.LINE_WIDTH),i.createDoubleLine(t,e)):i.createSingleLine(t,e)},createUTurn:function(t,e,r,n,o,c){return i.createUTurn(t,e,r,n,{dontHitHome:o,lineWidth:a.LINE_WIDTH},c)},createGroup:i.createGroup,createUse:i.createUse,createMarkerPath:i.createMarkerPath,createMarkerPolygon:i.createMarkerPolygon}}),r("lib/mscgenjs-core/render/graphics/idmanager",[],function(){"use strict";var t="mscgenjs",e=t;return{setPrefix:function(r){e=t+r},get:function(t){return e+(t||"")}}}),r("lib/mscgenjs-core/render/graphics/svgutensils",["require","./idmanager","./svgelementfactory/index","../../lib/lodash/lodash.custom"],function(t){"use strict";function e(t){var e=s.createSVG(t,c.get());return l.body.appendChild(e),e}function r(t){var r=l.getElementById(d);r=r?r:e(d),r.appendChild(t);var n=t.getBBox();return r.removeChild(t),n}function n(t){var e=1e5;return Math.abs(t.height)>e||Math.abs(t.width)>e?{height:0,width:0,x:0,y:0}:t}function o(t){return"function"==typeof t.getBBox?n(r(t)):{height:15,width:15,x:2,y:2}}function i(){return o(s.createText("ÁjyÎ9ƒ@💩",{x:0,y:0})).height}function a(t){c.setPrefix(t);var e=l.getElementById(c.get());if(Boolean(e)){var r=l.getElementById(t);r?r.removeChild(e):l.body.removeChild(e)}}var c=t("./idmanager"),s=t("./svgelementfactory/index"),u=t("../../lib/lodash/lodash.custom"),l={},d=c.get("bboxer");return{init:function(t){l=t},removeRenderedSVGFromElement:a,getBBox:o,calculateTextHeight:u.memoize(i),webkitNamespaceBugWorkaround:function(t){return t.replace(/ xlink=/g," xmlns:xlink=","g").replace(/ href=/g," xlink:href=","g")}}}),r("lib/mscgenjs-core/render/graphics/renderutensils",["require","../../lib/lodash/lodash.custom"],function(t){"use strict";var e=t("../../lib/lodash/lodash.custom");return{scaleCanvasToWidth:function(t,r){var n=e.cloneDeep(r);return n.scale=t/n.width,n.width*=n.scale,n.height*=n.scale,n.horizontaltransform*=n.scale,n.verticaltransform*=n.scale,n.x=0-n.horizontaltransform,n.y=0-n.verticaltransform,n},determineDepthCorrection:function(t,e){return t?2*(2*(t+1)*e):0},determineArcXTo:function(t,e,r){return"-x"===t?e+.75*(r-e):r}}}),r("lib/mscgenjs-core/render/graphics/constants",[],function(){"use strict";return{LINE_WIDTH:2,FONT_SIZE:12}}),r("lib/mscgenjs-core/render/graphics/csstemplates",[],function(){"use strict";return{baseTemplate:"svg.<%=id%>{font-family:Helvetica,sans-serif;font-size:<%=fontSize%>px;font-weight:normal;font-style:normal;text-decoration:none;background-color:white;stroke:black;stroke-width:<%=lineWidth%>}.<%=id%> path, .<%=id%> rect{fill:none}.<%=id%> .label-text-background{fill:white;stroke:white;stroke-width:0}.<%=id%> .bglayer{fill:white;stroke:white;stroke-width:0}.<%=id%> line{}.<%=id%> .return, .<%=id%> .comment{stroke-dasharray:5,3}.<%=id%> .inline_expression_divider{stroke-dasharray:10,5}.<%=id%> text{color:inherit;stroke:none;text-anchor:middle}.<%=id%> text.anchor-start{text-anchor:start}.<%=id%> .arrow-marker{overflow:visible}.<%=id%> .arrow-style{stroke-width:1}.<%=id%> .arcrow, .<%=id%> .arcrowomit, .<%=id%> .emphasised{stroke-linecap:butt}.<%=id%> .arcrowomit{stroke-dasharray:2,2}.<%=id%> .box, .<%=id%> .entity{fill:white;stroke-linejoin:round}.<%=id%> .inherit{stroke:inherit;color:inherit}.<%=id%> .inherit-fill{fill:inherit}.<%=id%> .watermark{font-size:48pt;font-weight:bold;opacity:0.14}",namedStyles:[{name:"basic",description:"Basic",experimental:!1,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> text.entity-text{text-decoration:underline;}"},{name:"lazy",description:"Lazy",experimental:!1,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> text.entity-text{font-weight:bold;}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#FFFFCC}.<%=id%> rect.label-text-background{opacity:0.9}.<%=id%> line.comment,.<%=id%> rect.inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{stroke:grey}"},{name:"classic",description:"Classic",experimental:!1,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> text.entity-text{text-decoration:none}.<%=id%> .entity{stroke:none;}.<%=id%> line,.<%=id%> rect,.<%=id%> path{stroke-width:1px}.<%=id%> .arrow-style{stroke-width:2;}.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{stroke-width: 1px}"},{name:"fountainpen",description:"Fountain pen",experimental:!0,deprecated:!1,renderMagic:"wobbly",cssBefore:"@import 'https://fonts.googleapis.com/css?family=Gochi+Hand';",cssAfter:"svg.<%=id%>{font-family:'Gochi Hand', cursive;font-size:14px;stroke-opacity:0.4;stroke-linecap:round;background-color:transparent}.<%=id%> text{fill:rgba(0,0,128,0.7)}.<%=id%> marker polygon{fill:rgba(0,0,255,0.4);stroke-linejoin:round}.<%=id%> line, .<%=id%> path, .<%=id%> rect, .<%=id%> polygon{stroke:blue !important}.<%=id%> text.entity-text{font-weight:bold;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#FFFFCC;}.<%=id%> .label-text-background{opacity:0}"},{name:"cygne",description:"Cygne (best with msgenny)",experimental:!0,deprecated:!0,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> line, .<%=id%> path{stroke:#00A1DE}.<%=id%> text{fill:#005B82}.<%=id%> .entity,.<%=id%> .box{fill:#00A1DE;stroke:#00A1DE}.<%=id%> text.box-text{fill:white}.<%=id%> text.entity-text{font-weight:bold;fill:white;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#E77B2F;stroke:white}.<%=id%> .comment,.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{fill:white}"},{name:"pegasse",description:"Pégase (best with msgenny)",experimental:!1,deprecated:!0,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> line, .<%=id%> path{stroke:rgba(0, 43, 84, 1)}.<%=id%> text{fill:rgba(0, 43, 84, 1)}.<%=id%> .entity,.<%=id%> .box{fill:rgba(0, 43, 84, 1);stroke:rgba(0, 43, 84, 1)}.<%=id%> text.box-text{fill:white}.<%=id%> text.entity-text{font-weight:bold;fill:white;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:rgba(255, 50, 0, 1);stroke:white}.<%=id%> .comment,.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{fill:white}"},{name:"grayscaled",description:"Grayscaled (not in IE or Safari)",experimental:!0,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:"svg.<%=id%>{filter:grayscale(1);-webkit-filter:grayscale(1);}"},{name:"inverted",description:"Inverted (not in IE or Safari)",experimental:!0,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:"svg.<%=id%>{filter:invert(1);-webkit-filter:invert(1);}"},{name:"noentityboxes",description:"No entity boxes",experimental:!1,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> .entity{fill:none;stroke:none;}.<%=id%> text.entity-text{text-decoration:underline;}"}]}}),r("lib/mscgenjs-core/render/graphics/renderskeleton",["require","./svgelementfactory/index","./constants","./csstemplates"],function(t){"use strict";function e(t,e){return e.forEach(function(e){"method"===e.type?t.appendChild(g.createMarkerPolygon(e.name,e.path,e.color)):t.appendChild(g.createMarkerPath(e.name,e.path,e.color))}),t}function r(t,e){var r=b.createElement("style");return r.setAttribute("type","text/css"),r.appendChild(b.createTextNode(h(t,e))),r}function n(t,n,o){var i=g.createDefs();return i.appendChild(r(o,t)),i=e(i,n)}function o(t){var e=g.createGroup(t+"_body");return e.appendChild(g.createGroup(t+"_background")),e.appendChild(g.createGroup(t+"_arcspans")),e.appendChild(g.createGroup(t+"_lifelines")),e.appendChild(g.createGroup(t+"_sequence")),e.appendChild(g.createGroup(t+"_notes")),e.appendChild(g.createGroup(t+"_watermark")),e}function i(t){return g.init(t.document,{LINE_WIDTH:p.LINE_WIDTH,FONT_SIZE:p.FONT_SIZE}),t.document}function a(t,e,r,a,s){b=i(t);var l=b.getElementById(e);null===l&&(l=b.body);var d=g.createSVG(r,r,u(s));return Boolean(s.source)&&d.appendChild(c(t,s.source)),d.appendChild(n(r,a,s)),d.appendChild(o(r)),l.appendChild(d),b}function c(t,e){var r=g.createDesc();return r.appendChild(t.document.createTextNode("\n\n# Generated by mscgen_js - https://sverweij.github.io/mscgen_js\n"+e)),r}function s(t){var e=null,r=m.namedStyles.filter(function(e){return e.name===t});return r.length>0&&(e=r[0]),e}function u(t){var e="",r={};return Boolean(t)?(Boolean(t.additionalTemplate)&&(r=s(t.additionalTemplate),Boolean(r)&&(e=r.renderMagic)),e):""}function l(t,e){var r="",n={};return Boolean(t)?(Boolean(t.additionalTemplate)&&(n=s(t.additionalTemplate),Boolean(n)&&(r=n[e])),r):""}function d(t){var e=l(t,"cssAfter");return Boolean(t.styleAdditions)&&(e+=t.styleAdditions),e}function f(t){return l(t,"cssBefore")}function h(t,e){return(f(t)+m.baseTemplate+d(t)).replace(/<%=fontSize%>/g,p.FONT_SIZE).replace(/<%=lineWidth%>/g,p.LINE_WIDTH).replace(/<%=id%>/g,e)}var g=t("./svgelementfactory/index"),p=t("./constants"),m=t("./csstemplates"),b={};
return{bootstrap:a,init:i}}),r("lib/mscgenjs-core/render/astmassage/asttransform",[],function(){"use strict";function t(t,e){t&&e&&t.forEach(function(t){e.forEach(function(e){e(t)})})}function e(t,e,r,n){n&&n.forEach(function(n){n(r,t,e)})}function r(t,r,o){r.forEach(function(i){e(t,r,i,o),i.arcs&&n(t,i.arcs,o)})}function n(t,e,n){t&&e&&n&&e.forEach(function(e){r(t,e,n)})}return{transform:function(e,r,o){return t(e.entities,r),n(e.entities,e.arcs,o),e}}}),r("lib/mscgenjs-core/render/astmassage/aggregatekind",[],function(){"use strict";var t={"|||":"emptyarc","...":"emptyarc","---":"emptyarc","->":"directional","=>":"directional","=>>":"directional",">>":"directional",":>":"directional","-x":"directional","<-":"directional","<=":"directional","<<=":"directional","<<":"directional","<:":"directional","x-":"directional",note:"box",box:"box",abox:"box",rbox:"box","<->":"bidirectional","<=>":"bidirectional","<<=>>":"bidirectional","<<>>":"bidirectional","<:>":"bidirectional","--":"nondirectional","==":"nondirectional","..":"nondirectional","::":"nondirectional",alt:"inline_expression",else:"inline_expression",opt:"inline_expression",break:"inline_expression",par:"inline_expression",seq:"inline_expression",strict:"inline_expression",neg:"inline_expression",critical:"inline_expression",ignore:"inline_expression",consider:"inline_expression",assert:"inline_expression",loop:"inline_expression",ref:"inline_expression",exc:"inline_expression"};return{getAggregate:function(e){return t[e]}}}),r("lib/mscgenjs-core/render/astmassage/normalizekind",[],function(){"use strict";var t={"<-":"->","<=":"=>","<<=":"=>>","<<":">>","<:":":>","x-":"-x"};return{getNormalizedKind:function(e){return t[e]||e}}}),r("lib/mscgenjs-core/render/astmassage/normalizeoptions",["require","../../lib/lodash/lodash.custom"],function(t){"use strict";var e=t("../../lib/lodash/lodash.custom");return function(t){return e.defaults(t||{},{wordwraparcs:!1,wordwrapentities:!0,wordwrapboxes:!0})}}),r("lib/mscgenjs-core/render/textutensils/escape",[],function(){"use strict";return{unescapeString:function(t){return t.replace(/\\"/g,'"')},escapeString:function(t){return t.replace(/\\"/g,'"').replace(/"/g,'\\"')}}}),r("lib/mscgenjs-core/render/astmassage/flatten",["require","./asttransform","./aggregatekind","./normalizekind","./normalizeoptions","../../lib/lodash/lodash.custom","../textutensils/escape"],function(t){"use strict";function e(t){"undefined"==typeof t.label&&(t.label=t.name)}function r(t){Boolean(t.label)&&(t.label=b.unescapeString(t.label)),Boolean(t.id)&&(t.id=b.unescapeString(t.id))}function n(t){t.label=Boolean(t.label)?t.label:""}function o(t){if(t.kind&&g.getNormalizedKind(t.kind)!==t.kind){t.kind=g.getNormalizedKind(t.kind);var e=t.from;t.from=t.to,t.to=e}return t}function i(t,e){!t.linecolor&&e.arclinecolor&&(t.linecolor=e.arclinecolor),!t.textcolor&&e.arctextcolor&&(t.textcolor=e.arctextcolor),!t.textbgcolor&&e.arctextbgcolor&&(t.textbgcolor=e.arctextbgcolor)}function a(t,e){if(t&&t.from){var r=e.filter(function(e){return e.name===t.from});r.length>0&&i(t,r[0])}}function c(t){return t.arcs.reduce(function(t,e){return t+(Boolean(e[0].arcs)?c(e[0])+1:0)},t.arcs.length)}function s(t,e,r,n){var o=[],a=[],u=[];return t.forEach(function(t){if("inline_expression"===h.getAggregate(t.kind)){if(t.depth=e,Boolean(t.arcs)){var o=m.cloneDeep(t);o.numberofrows=c(o),delete o.arcs,a.push(o),t.arcs.forEach(function(t){u=u.concat(s(t,e+1,o.from,o.to)),t.forEach(function(t){i(t,o)})}),e>x&&(x=e)}else a.push(t);u.push([{kind:"|||",from:t.from,to:t.to}])}else r&&n&&"emptyarc"===h.getAggregate(t.kind)&&(t.from=r,t.to=n,t.depth=e),a.push(t)}),o.push(a),o.concat(u)}function u(t){var e={};return x=0,Boolean(t.options)&&(e.options=m.cloneDeep(t.options)),Boolean(t.entities)&&(e.entities=m.cloneDeep(t.entities)),e.arcs=[],t&&t.arcs&&t.arcs.forEach(function(t){s(t,0).forEach(function(t){e.arcs.push(t)})}),e.depth=x+1,e}function l(t,e){return t.filter(function(t){return e.from!==t.name}).map(function(t){return e.to=t.name,m.cloneDeep(e)})}function d(t){if(t.entities&&t.arcs){var e=[],r={};t.arcs.forEach(function(n,o){n.filter(function(t){return"*"===t.to}).forEach(function(i,a){r=m.cloneDeep(i),delete t.arcs[o][a],e=l(t.entities,r),n[a]=e.shift(),t.arcs[o]=n.concat(e)})})}return t}var f=t("./asttransform"),h=t("./aggregatekind"),g=t("./normalizekind"),p=t("./normalizeoptions"),m=t("../../lib/lodash/lodash.custom"),b=t("../textutensils/escape"),x=0;return{swapRTLArc:o,unwind:u,explodeBroadcasts:d,flatten:function(t){return t.options=p(t.options),f.transform(u(t),[e,r],[o,a,r,n])},dotFlatten:function(t){return d(f.transform(t,[e],[o,a]))}}}),r("lib/mscgenjs-core/render/graphics/kind2class",[],function(){"use strict";var t={"|||":"empty-row","...":"omitted-row","---":"comment-row","->":"signal","=>":"method","=>>":"callback",">>":"return",":>":"emphasised","-x":"lost","<-":"signal","<=":"method","<<=":"callback","<<":"return","<:":"emphasised","x-":"lost","<->":"signal","<=>":"method","<<=>>":"callback","<<>>":"return","<:>":"emphasised","--":"signal","==":"method","..":"return","::":"emphasised"},e={"|||":"empty","...":"empty","---":"empty","->":"directional","=>":"directional","=>>":"directional",">>":"directional",":>":"directional","-x":"directional","<-":"directional","<=":"directional","<<=":"directional","<<":"directional","<:":"directional","x-":"directional",note:"box",box:"box",abox:"box",rbox:"box","<->":"bidirectional","<=>":"bidirectional","<<=>>":"bidirectional","<<>>":"bidirectional","<:>":"bidirectional","--":"nondirectional","==":"nondirectional","..":"nondirectional","::":"nondirectional",alt:"inline_expression",else:"inline_expression",opt:"inline_expression",break:"inline_expression",par:"inline_expression",seq:"inline_expression",strict:"inline_expression",neg:"inline_expression",critical:"inline_expression",ignore:"inline_expression",consider:"inline_expression",assert:"inline_expression",loop:"inline_expression",ref:"inline_expression",exc:"inline_expression"};return{getClass:function(e){return t[e]||e},getAggregateClass:function(t){return e[t]||t}}}),r("lib/mscgenjs-core/render/graphics/rowmemory",[],function(){"use strict";function t(t){return e[t]?e[t]:{y:r+1.5*n+t*n,height:n}}var e=[],r=0,n=0;return{clear:function(t,o){e=[],r=t,n=o},get:t,getLast:function(){return t(e.length-1)},set:function(r,n){var o=t(r-1);e[r]={y:o.y+(o.height+n)/2,height:n}}}}),r("lib/mscgenjs-core/render/graphics/markermanager",["require","../../lib/lodash/lodash.custom","../astmassage/normalizekind"],function(t){"use strict";function e(t,e,r){return e&&r&&["<->","->"].indexOf(t)>-1?e<r?"signal":"signal-u":""}function r(t,e,r){return"<->"===t&&e<=r?"signal-l":"signal-lu"}function n(t,n,o,i,a){var c=[];return l[n]&&l[n].attributes&&(c=l[n].attributes.map(function(c){return{name:c.name,value:c.value.replace(/\{\{signal-marker-end\}\}/g,e(n,i,a)).replace(/\{\{signal-marker-start\}\}/g,r(n,i,a)).replace(/\{\{id\}\}/g,t).replace(/\{\{color\}\}/g,o||"black")}})),c}function o(t,e){return l[u.getNormalizedKind(t)].marker.name+(Boolean(e)?" "+e:" black")}function i(t,e){function r(e){i(t,e)}return Array.isArray(e)&&e.forEach(r),e.arcs&&e.arcs.forEach(r),e.kind&&l[u.getNormalizedKind(e.kind)]&&l[u.getNormalizedKind(e.kind)].marker&&t.indexOf(o(e.kind,e.linecolor))<0&&t.push(o(e.kind,e.linecolor)),t}function a(t){return{kind:t.split(" ")[0],color:t.split(" ")[1]}}function c(t){return t.arcs.reduce(i,[]).sort().map(a)}var s=t("../../lib/lodash/lodash.custom"),u=t("../astmassage/normalizekind"),l={"->":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}{{signal-marker-end}}-{{color}})"}],marker:{name:"signal"}},"<->":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}{{signal-marker-end}}-{{color}})"},{name:"marker-start",value:"url(#{{id}}{{signal-marker-start}}-{{color}})"}],marker:{name:"signal"}},"=>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"}],marker:{name:"callback",end:""}},"<<=>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"},{name:"marker-start",value:"url(#{{id}}callback-l-{{color}})"}],marker:{name:"callback",end:"",start:"-l"}},">>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"}],marker:{name:"callback",end:""}},"<<>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"},{name:"marker-start",value:"url(#{{id}}callback-l-{{color}})"}],marker:{name:"callback",end:"",start:"-l"}},"..":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"--":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"==":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"::":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"=>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"}],marker:{name:"method",end:""}},"<=>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"},{name:"marker-start",value:"url(#{{id}}method-l-{{color}})"}],marker:{name:"method",end:"",start:"-l"}},":>":{attributes:[{name:"style",value:"stroke:{{color}};"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"}],marker:{name:"method",end:""}},"<:>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"},{name:"marker-start",value:"url(#{{id}}method-l-{{color}})"}],marker:{name:"method",end:"",start:"-l"}},"-x":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}lost-{{color}})"}],marker:{name:"lost",end:""}}},d={signal:{variants:[{name:"",path:"M9,3 l-8, 2"},{name:"-u",path:"M9,3 l-8,-2"},{name:"-l",path:"M9,3 l 8, 2"},{name:"-lu",path:"M9,3 l 8,-2"}]},method:{variants:[{name:"",path:"1,1  9,3  1,5"},{name:"-l",path:"17,1 9,3 17,5"}]},callback:{variants:[{name:"",path:"M 1,1 l 8,2 l-8,2"},{name:"-l",path:"M17,1 l-8,2 l 8,2"}]},lost:{variants:[{name:"",path:"M7,0 l5,6 M7,6 l5,-6"}]}};return{getAttributes:n,getMarkerDefs:function(t,e){return s.flatten(c(e).map(function(e){return d[e.kind].variants.map(function(r){return{name:t+e.kind+r.name+"-"+e.color,path:r.path,color:e.color,type:e.kind}})}))}}}),r("lib/mscgenjs-core/render/textutensils/wrap",[],function(){"use strict";return{wrap:function(t,e){for(var r=0,n=[],o=0,i=0,a=0,c=0,s=t.replace(/[\t\n]+/g," ").replace(/\\n/g,"\n");c<=s.length;)c>=s.length?n.push(s.substring(o,c)):"\n"===s[c]?(r=0,a=c,n.push(s.substring(o,a)),o=a+1):r++>=e&&(a=s.substring(0,c).lastIndexOf(" "),a===-1||a<o?(r=1,a=c,i=c):(r=0,i=a+1),n.push(s.substring(o,a)),o=i),c++;return n}}}),r("lib/mscgenjs-core/render/graphics/renderlabels",["require","./svgelementfactory/index","./svgutensils","./constants","../textutensils/wrap","./kind2class","../astmassage/aggregatekind"],function(t){"use strict";function e(t,e){e&&t.setAttribute("style","fill:"+e+";")}function r(t,r,n){e(t,r&&!n?"blue":n)}function n(t,e){var r=l.createRect(d.getBBox(t),"label-text-background");return e&&r.setAttribute("style","fill:"+e+"; stroke:"+e+";"),r}function o(t,e,r,n,o,i){var a={};return a=0===t?l.createText(e,{x:r,y:n},{class:o,url:i.url,id:i.id,idurl:i.idurl}):l.createText(e,{x:r,y:n},{class:o,url:i.url})}function i(t,e,r){var n=e||t,o=g.getClass(n),i=g.getAggregateClass(n);return o===i?o+r:i+r+o+r}function a(t,n,a,c,s,u){var l=a+(s+.25)*d.calculateTextHeight(),h=i(c.kind,u&&u.kind,"-text ");u&&(u.alignLeft&&(h+="anchor-start "),u.alignAround&&(l=a+(s+.25)*(d.calculateTextHeight()+f.LINE_WIDTH)));var g=o(s,t,n,l,h,c);return e(g,c.textcolor),r(g,c.url,c.textcolor),g}function c(t,e,r,o){var i=l.createGroup(o);if(t.label){var c=e.x+e.width/2,s=u(t.label,t.kind,e.width,f.FONT_SIZE,r),h={};r&&r.alignAbove&&s.forEach(function(){s.push("")});var g=e.y-(s.length-1)/2*(d.calculateTextHeight()+1);r&&r.alignAround&&(1===s.length&&s.push(""),g=e.y-(s.length-1)/2*(d.calculateTextHeight()+f.LINE_WIDTH+1)),s.forEach(function(e,o){""!==e&&(h=a(e,c,g,t,o,r),r&&r.ownBackground&&i.appendChild(n(h,t.textbgcolor)),i.appendChild(h)),g++})}return i}function s(t,e){var r=Math.abs(t),n=12;return r<=160?r/(e/n*8):r<=320?r/(e/n*6.4):r<=480?r/(e/n*5.9):r/(e/n*5.6)}function u(t,e,r,n,o){return"box"===p.getAggregate(e)&&o.wordwrapboxes||"entity"===e&&o.wordwrapentities||"box"!==p.getAggregate(e)&&"entity"!==e&&o.wordwraparcs||"undefined"==typeof e?h.wrap(t,s(r,n)):t.split("\\n")}var l=t("./svgelementfactory/index"),d=t("./svgutensils"),f=t("./constants"),h=t("../textutensils/wrap"),g=t("./kind2class"),p=t("../astmassage/aggregatekind");return{createLabel:c,splitLabel:u}}),r("lib/mscgenjs-core/render/graphics/entities",["require","./renderlabels"],function(t){"use strict";function e(t){return c[t]}var r=t("./renderlabels"),n=160,o=100,i=34,a={interEntitySpacing:n,height:i,width:o},c={};return{init:function(t){a.interEntitySpacing=n,a.height=i,a.width=o,t&&(a.interEntitySpacing=t*n,a.width=t*o),c={}},getX:e,setX:function(t,e){c[t.name]=e+a.width/2},getOAndD:function(t,r){return{from:e(e(t)<e(r)?t:r),to:e(e(r)>e(t)?r:t)}},setHeight:function(t){a.height=t},getDims:function(){return a},getNoEntityLines:function(t,e,n){return r.splitLabel(t,"entity",a.width,e,n).length}}}),r("lib/mscgenjs-core/render/graphics/renderast",["require","./svgelementfactory/index","./svgutensils","./renderutensils","./renderskeleton","../astmassage/flatten","./kind2class","../astmassage/aggregatekind","./rowmemory","./idmanager","./markermanager","./entities","./renderlabels","./constants","../../lib/lodash/lodash.custom"],function(t){"use strict";function e(t,e,r,a){var c=Object.seal(R.flatten(t)),s=a||{};s=Z.defaults(s,{source:null,styleAdditions:null,mirrorEntitiesOnBottom:!1,regularArcTextVerticalAlignment:"middle"}),n(c,e,r,s),o(c),i(c);var u=e.document.getElementById(r);return u?O.webkitNamespaceBugWorkaround(u.innerHTML):O.webkitNamespaceBugWorkaround(e.document.body.innerHTML)}function r(t){var e="middle",r=["above","middle","below"];return r.some(function(e){return e===t})&&(e=t),e}function n(t,e,n,o){X.setPrefix(n),tt.document=W.bootstrap(e,n,X.get(),U.getMarkerDefs(X.get(),t),o),tt.mirrorEntitiesOnBottom=Boolean(o.mirrorEntitiesOnBottom),tt.regularArcTextVerticalAlignment=r(o.regularArcTextVerticalAlignment),O.init(tt.document),tt.layer=a(tt.document),tt.maxDepth=t.depth,s(tt,t.options)}function o(t){x(t.entities,t.options),q.clear(V.getDims().height,tt.arcRowHeight),k(t.arcs,t.entities,t.options),tt.mirrorEntitiesOnBottom&&b(t.entities)}function i(t){var e=u(t);l(e),e=f(t.options,e),h(e)}function a(t){return{lifeline:t.getElementById(X.get("_lifelines")),sequence:t.getElementById(X.get("_sequence")),notes:t.getElementById(X.get("_notes")),inline:t.getElementById(X.get("_arcspans")),watermark:t.getElementById(X.get("_watermark"))}}function c(t,e){t.arcRowHeight=J,t.arcGradient=Q,t.wordWrapArcs=!1,e&&(e.arcgradient&&(t.arcRowHeight=parseInt(e.arcgradient,10)+J,t.arcGradient=parseInt(e.arcgradient,10)+Q),t.wordWrapArcs=Boolean(e.wordwraparcs))}function s(t,e){V.init(e&&e.hscale),c(t,e)}function u(t){var e=H.determineDepthCorrection(t.depth,Y.LINE_WIDTH),r=q.getLast(),n={width:t.entities.length*V.getDims().interEntitySpacing+e,height:Boolean(tt.mirrorEntitiesOnBottom)?2*V.getDims().height+r.y+r.height+2*$:r.y+r.height/2+2*$,horizontaltransform:(V.getDims().interEntitySpacing+e-V.getDims().width)/2,autoscale:!!t.options&&!!t.options.width&&"auto"===t.options.width,verticaltransform:$,scale:1};return n.x=0-n.horizontaltransform,n.y=0-n.verticaltransform,n}function l(t){tt.document.getElementById(X.get("_background")).appendChild(N.createRect(t,"bglayer"))}function d(t,e){tt.layer.watermark.appendChild(N.createDiagonalText(t,e,"watermark"))}function f(t,e){return t&&(t.watermark&&d(t.watermark,e),t.width&&"auto"!==t.width&&(e=H.scaleCanvasToWidth(t.width,e))),e}function h(t){var e=tt.document.getElementById(X.get()),r=tt.document.getElementById(X.get("_body"));r.setAttribute("transform","translate("+t.horizontaltransform+","+t.verticaltransform+") scale("+t.scale+","+t.scale+")"),t.autoscale&&t.autoscale===!0?N.updateSVG(e,{width:"100%",height:"100%",viewBox:"0 0 "+t.width.toString()+" "+t.height.toString()}):N.updateSVG(e,{width:t.width.toString(),height:t.height.toString(),viewBox:"0 0 "+t.width.toString()+" "+t.height.toString()})}function g(t,e){var r=t[0],n=2;return t.forEach(function(t){var o=V.getNoEntityLines(t.label,Y.FONT_SIZE,e);o>n&&(n=o,r=t)}),n>2?Math.max(V.getDims().height,O.getBBox(m(r,0,e)).height):V.getDims().height}function p(t,e){var r=Math.min(O.getBBox(t).width+4*Y.LINE_WIDTH,e.interEntitySpacing/3+e.width);return r>=e.width&&(e.x-=(r-e.width)/2,e.width=r),e}function m(t,e,r){var n=N.createGroup(),o=Z.cloneDeep(V.getDims());o.x=e?e:0;var i=K.createLabel(Z.defaults(t,{kind:"entity"}),{x:o.x,y:o.height/2,width:o.width},r);return n.appendChild(N.createRect(p(i,o),"entity",t.linecolor,t.textbgcolor)),n.appendChild(i),n}function b(t){var e=q.getLast().y+(q.getLast().height+tt.arcRowHeight)/2;L(t,"arcrow",null,e).forEach(function(t){tt.layer.lifeline.appendChild(t)}),tt.layer.sequence.appendChild(N.createUse({x:0,y:e+tt.arcRowHeight/2},X.get("entities")))}function x(t,e){var r=0,n=N.createGroup(X.get("entities"));t&&(V.setHeight(g(t,e)+2*Y.LINE_WIDTH),t.forEach(function(t){n.appendChild(m(t,r,e)),V.setX(t,r),r+=V.getDims().interEntitySpacing}),tt.layer.sequence.appendChild(n)),tt.arcEndX=r-V.getDims().interEntitySpacing+V.getDims().width}function y(t,e,r,n,o){var i=0,a=t.label,c=V.getX(t.from);t.label="",e.forEach(function(e){var a={};e.name!==t.from&&(i=V.getX(e.name),a=F(t,c,i,n,o),r.push({layer:tt.layer.sequence,element:a}))}),t.label=a}function w(t,e,r,n,o){var i={};return t.from&&t.to&&("*"===t.to?(y(t,e,r,n,o),i=K.createLabel(t,{x:0,y:n,width:tt.arcEndX},Z.defaults(Z.cloneDeep(o),{alignAround:!0,ownBackground:!0})),r.push({title:t.title,layer:tt.layer.sequence,element:i})):(i=F(t,V.getX(t.from),V.getX(t.to),n,o),r.push({title:t.title,layer:tt.layer.sequence,element:i}))),i}function v(t,e,r,n){var o=0;return t.forEach(function(t){var e={};switch(G.getAggregate(t.kind)){case"emptyarc":e=E(t,0);break;case"box":e=M(V.getOAndD(t.from,t.to),t,0,n);break;case"inline_expression":e=A(t,0);break;default:e=w(t,r,[],0,n)}o=Math.max(o,O.getBBox(e).height+2*Y.LINE_WIDTH)}),o}function C(t,e,r,n){var o="arcrow",i=[];q.set(e,Math.max(q.get(e).height,v(t,e,r,n))),t.forEach(function(t){var a={};switch(G.getAggregate(t.kind)){case"emptyarc":a=E(t,q.get(e).y),"..."===t.kind&&(o="arcrowomit"),i.push({layer:tt.layer.sequence,element:a});break;case"box":a=M(V.getOAndD(t.from,t.to),t,q.get(e).y,n),i.push({title:t.title,layer:tt.layer.notes,element:a});break;case"inline_expression":a=A(t,q.get(e).y),i.push({layer:tt.layer.notes,element:a}),et.push({arc:t,rownum:e});break;default:a=w(t,r,i,q.get(e).y,n)}}),L(r,o,q.get(e).height,q.get(e).y).forEach(function(t){tt.layer.lifeline.appendChild(t)}),i.forEach(function(t){t.element&&(t.title&&t.element.appendChild(N.createTitle(t.title)),t.layer.appendChild(t.element))})}function k(t,e,r){if(et=[],L(e,"arcrow",null,q.get(-1).y).forEach(function(t){tt.layer.lifeline.appendChild(t)}),t){for(var n=0;n<t.length;n++)C(t[n],n,e,r);_(et)}}function A(t,e){var r=V.getOAndD(t.from,t.to),n=7,o=e>0,i=2*tt.maxDepth*Y.LINE_WIDTH,a=r.to-r.from+(V.getDims().interEntitySpacing-2*Y.LINE_WIDTH)-n-Y.LINE_WIDTH,c=r.from-(V.getDims().interEntitySpacing-3*Y.LINE_WIDTH-i)/2-2*(tt.maxDepth-t.depth)*Y.LINE_WIDTH,s=N.createGroup();o||(t.label=t.kind+(t.label?": "+t.label:""));var u=K.createLabel(t,{x:c+Y.LINE_WIDTH-a/2,y:e+tt.arcRowHeight/4,width:a},{alignLeft:!0,ownBackground:!1,wordwraparcs:tt.wordWrapArcs}),l=O.getBBox(u),d=Math.max(l.height+2*Y.LINE_WIDTH,tt.arcRowHeight/2-2*Y.LINE_WIDTH),f=Math.min(l.width+2*Y.LINE_WIDTH,a),h=N.createEdgeRemark({width:f-Y.LINE_WIDTH+n,height:d,x:c,y:e},"box inline_expression_label",t.linecolor,t.textbgcolor,n);return s.appendChild(h),s.appendChild(u),s}function _(t){t.forEach(function(t){tt.layer.inline.appendChild(T(t,q.get(t.rownum).y))})}function T(t,e){var r=q.get(t.rownum).y,n=q.get(t.rownum+t.arc.numberofrows+1).y,o=n-r;return t.arc.label="",I(V.getOAndD(t.arc.from,t.arc.to),t.arc,o,e)}function L(t,e,r,n){return(!r||r<tt.arcRowHeight)&&(r=tt.arcRowHeight),t.map(function(t){var o=N.createLine({xFrom:V.getX(t.name),yFrom:0-r/2+(n?n:0),xTo:V.getX(t.name),yTo:r/2+(n?n:0)},{class:e});return t.linecolor&&o.setAttribute("style","stroke:"+t.linecolor+";"),o})}function S(t,e,r,n,o,i){var a=2*(tt.arcRowHeight/5),c=V.getDims().interEntitySpacing/2,s={},u="arc "+z.getAggregateClass(t)+" "+z.getClass(t);if(n){s=N.createGroup();var l=N.createUTurn({x:e,y:i},i+r+a-2*Y.LINE_WIDTH,c-2*Y.LINE_WIDTH,u,"::"!==t,a),d=N.createUTurn({x:e,y:i},i+r+a-Y.LINE_WIDTH,c,null,null,a),f=N.createUTurn({x:e,y:i},i+r+a,c,u,"::"!==t,a);Boolean(o)&&l.setAttribute("style","stroke:"+o),U.getAttributes(X.get(),t,o,e,e).forEach(function(t){d.setAttribute(t.name,t.value)}),d.setAttribute("style","stroke:transparent;"),Boolean(o)&&f.setAttribute("style","stroke:"+o),s.appendChild(l),s.appendChild(f),s.appendChild(d),s.setAttribute("class",u)}else s=N.createUTurn({x:e,y:i},i+r+a,c,u,"-x"===t,a),U.getAttributes(X.get(),t,o,e,e).forEach(function(t){s.setAttribute(t.name,t.value)});return s}function E(t,e){return"---"===t.kind?D(t,V.getOAndD(t.from,t.to),e):B(t,V.getOAndD(t.from,t.to),e)}function j(t){return t.arcskip?t.arcskip*tt.arcRowHeight:0}function P(t){return"<:>"===t?"bidi ":"::"===t?"nodi ":""}function F(t,e,r,n,o){var i=N.createGroup(),a="arc ";a+=P(t.kind),a+=z.getAggregateClass(t.kind)+" "+z.getClass(t.kind);var c=[":>","::","<:>"].indexOf(t.kind)>-1,s=j(t,n),u=0===s?tt.arcGradient:s;if(r=H.determineArcXTo(t.kind,e,r),e===r){i.appendChild(S(t.kind,e,s,c,t.linecolor,n));var l=2*V.getDims().interEntitySpacing/3;i.appendChild(K.createLabel(t,{x:e+1.5*Y.LINE_WIDTH-l/2,y:n-tt.arcRowHeight/5-Y.LINE_WIDTH/2,width:l},Z.defaults(Z.cloneDeep(o),{alignLeft:!0,alignAbove:!0,ownBackground:!0})))}else{var d=N.createLine({xFrom:e,yFrom:n,xTo:r,yTo:n+u},{class:a,doubleLine:c});U.getAttributes(X.get(),t.kind,t.linecolor,e,r).forEach(function(t){d.setAttribute(t.name,t.value)}),i.appendChild(d),i.appendChild(K.createLabel(t,{x:e,y:n,width:r-e},Z.defaults(Z.cloneDeep(o),{alignAround:!0,alignAbove:"above"===tt.regularArcTextVerticalAlignment,ownBackground:!0})))}return i}function B(t,e,r){var n=0,o=tt.arcEndX;return t.from&&t.to&&(n=e.from,o=e.to-e.from),K.createLabel(t,{x:n,y:r,width:o},{ownBackground:!0,wordwraparcs:tt.wordWrapArcs})}function D(t,e,r){var n=0,o=tt.arcEndX,i="comment",a=N.createGroup();if(t.from&&t.to){var c=1*tt.maxDepth*Y.LINE_WIDTH,s=2*(tt.maxDepth-t.depth)*Y.LINE_WIDTH;n=e.from-(V.getDims().interEntitySpacing+2*Y.LINE_WIDTH)/2-(s-c),o=e.to+(V.getDims().interEntitySpacing+2*Y.LINE_WIDTH)/2+(s-c),i="inline_expression_divider"}var u=N.createLine({xFrom:n,yFrom:r,xTo:o,yTo:r},{class:i});return a.appendChild(u),a.appendChild(B(t,e,r)),t.linecolor&&u.setAttribute("style","stroke:"+t.linecolor+";"),a}function I(t,e,r,n){var o=2*tt.maxDepth*Y.LINE_WIDTH,i=t.to-t.from+V.getDims().interEntitySpacing-2*Y.LINE_WIDTH-o,a=t.from-(V.getDims().interEntitySpacing-2*Y.LINE_WIDTH-o)/2,c=2*(tt.maxDepth-e.depth)*Y.LINE_WIDTH;return N.createRect({width:i+2*c,height:r?r:tt.arcRowHeight-2*Y.LINE_WIDTH,x:a-c,y:n},"box inline_expression "+e.kind,e.linecolor,e.textbgcolor)}function M(t,e,r,n){var o=2*tt.maxDepth*Y.LINE_WIDTH,i=t.to-t.from+V.getDims().interEntitySpacing-2*Y.LINE_WIDTH-o,a=t.from-(V.getDims().interEntitySpacing-2*Y.LINE_WIDTH-o)/2,c=N.createGroup(),s={},u=K.createLabel(e,{x:a,y:r,width:i},n),l=O.getBBox(u),d=Math.max(l.height+2*Y.LINE_WIDTH,tt.arcRowHeight-2*Y.LINE_WIDTH),f={width:i,height:d,x:a,y:r-d/2};switch(e.kind){case"rbox":s=N.createRBox(f,"box rbox",e.linecolor,e.textbgcolor);break;case"abox":s=N.createABox(f,"box abox",e.linecolor,e.textbgcolor);break;case"note":s=N.createNote(f,"box note",e.linecolor,e.textbgcolor);break;default:s=N.createRect(f,"box",e.linecolor,e.textbgcolor)}return c.appendChild(s),c.appendChild(u),c}var N=t("./svgelementfactory/index"),O=t("./svgutensils"),H=t("./renderutensils"),W=t("./renderskeleton"),R=t("../astmassage/flatten"),z=t("./kind2class"),G=t("../astmassage/aggregatekind"),q=t("./rowmemory"),X=t("./idmanager"),U=t("./markermanager"),V=t("./entities"),K=t("./renderlabels"),Y=t("./constants"),Z=t("../../lib/lodash/lodash.custom"),$=3,J=38,Q=0,tt=Object.seal({arcRowHeight:J,arcGradient:Q,arcEndX:0,wordWrapArcs:!1,mirrorEntitiesOnBottom:!1,regularArcTextVerticalAlignment:"middle",maxDepth:0,document:{},layer:{lifeline:{},sequence:{},notes:{},inline:{},watermark:{}}}),et=[];return{clean:function(t,e){tt.document=W.init(e),O.init(tt.document),O.removeRenderedSVGFromElement(t)},renderAST:function(t,r,n,o,i){return e(t,o,n,{source:r,styleAdditions:i})},renderASTNew:e}}),r("utl/exporter",[],function(){"use strict";function t(t,e,r){return t.pathname+"?lang="+r+"&msc="+encodeURIComponent(e)}function e(e,n,o){return t(e,n,o).length<r}var r=4094;return{toLocationString:function(r,n,o){var i="# source too long for an URL";return e(r,n,o)&&(i=n),t(r,i,o)}}}),r("embedding/config",[],function(){"use strict";function t(t,e){Object.getOwnPropertyNames(e).forEach(function(r){t[r]=e[r]})}var e={defaultLanguage:"mscgen",parentElementPrefix:"mscgen_js-parent_",clickable:!1,clickURL:"https://sverweij.github.io/mscgen_js/",loadFromSrcAttribute:!1};return{getConfig:function(){return"undefined"!=typeof mscgen_js_config&&mscgen_js_config&&"object"==typeof mscgen_js_config&&t(e,mscgen_js_config),e}}}),r("utl/tpl",[],function(){"use strict";return{applyTemplate:function(t,e){var r=t;return e&&Object.keys(e).forEach(function(t){r=r.replace(new RegExp("{"+t+"}","g"),e[t])}),r}}}),r("embedding/error-rendering",["../utl/tpl"],function(t){"use strict";function e(t,e){for(var r=t.toString(),n=e-r.length,o=0;o<n;o++)r=" "+r;return r}function r(t,r){return e(r,3)+" "+t}function n(e,r){return e.split("").reduce(function(e,n,i){return i===r?e+t.applyTemplate(s,{char:o(n)}):e+o(n)},"")}function o(t){return t.replace(/</g,"&lt;")}var i="<pre><div style='color: #d00'># ERROR on line {line}, column {col} - {message}</div>",a="<pre><div style='color: #d00'># ERROR {message}</div>",c="<mark>{line}\n</mark>",s="<span style='text-decoration:underline'>{char}</span>";return{formatNumber:e,deHTMLize:o,renderError:function(e,s,u){var l=Boolean(s)?t.applyTemplate(i,{message:u,line:s.start.line,col:s.start.column}):t.applyTemplate(a,{message:u});return e.split("\n").reduce(function(e,i,a){return s&&a===s.start.line-1?e+t.applyTemplate(c,{line:r(n(i,s.start.column-1),a+1)}):e+o(r(i,a+1))+"\n"},l)+"</pre>"}}}),r("utl/domutl",[],function(){"use strict";return{ajax:function(t,e,r){var n=new XMLHttpRequest;n.onreadystatechange=function(t){t.target.readyState===XMLHttpRequest.DONE&&(200===n.status?e(t):r(t))},n.open("GET",t),n.responseType="text";try{n.send()}catch(t){r(t)}}}}),e(["./lib/mscgenjs-core/parse/xuparser","./lib/mscgenjs-core/parse/msgennyparser","./lib/mscgenjs-core/render/graphics/renderast","./utl/exporter","./embedding/config","./embedding/error-rendering","./utl/domutl","./utl/tpl"],function(t,e,r,n,o,i,a,c){"use strict";function s(){u();var t=document.getElementsByClassName("mscgen_js");l(t,0),l(document.getElementsByTagName("mscgen"),t.length)}function u(){for(var t=document.scripts,e=0;e<t.length;e++)L[t[e].type]&&!t[e].hasAttribute("data-renderedby")&&(t[e].insertAdjacentHTML("afterend",c.applyTemplate(k,{src:t[e].src?c.applyTemplate(A,{src:t[e].src}):"",lang:L[t[e].type]||o.getConfig().defaultLanguage,msc:t[e].textContent.replace(/</g,"&lt;"),mirrorEntities:x(t[e])?"data-mirror-entities='true'":"",namedStyle:y(t[e]),regularArcTextVerticalAlignment:w(t[e])})),t[e].setAttribute("data-renderedby","mscgen_js"))}function l(t,e){for(var r=0;r<t.length;r++)d(t[r],e+r)}function d(t,e){t.hasAttribute("data-renderedby")||h(t,e)}function f(t,e){t.innerHTML=c.applyTemplate("<div style='color: #d00'>{string}</div>",{string:e})}function h(t,e){m(t,e),t.setAttribute("data-renderedby","mscgen_js"),o.getConfig().loadFromSrcAttribute&&t.getAttribute("data-src")?a.ajax(t.getAttribute("data-src"),function(e){g(t,e.target.response)},function(){f(t,c.applyTemplate(_,{url:t.getAttribute("data-src")}))}):!o.getConfig().loadFromSrcAttribute&&t.getAttribute("data-src")?f(t,c.applyTemplate(T,{url:t.getAttribute("data-src")})):g(t,t.textContent)}function g(t,e){var r=b(t),n=v(e,r);n.entities?C(n,t.id,e,r,x(t),y(t),w(t)):t.innerHTML=i.renderError(e,n.location,n.message)}function p(t,e,r){var i={pathname:"index.html"},a=document.createElement("a");return a.setAttribute("href",o.getConfig().clickURL+n.toLocationString(i,t,e)),a.setAttribute("id",r+"link"),a.setAttribute("style","text-decoration: none;"),a.setAttribute("title","click to edit in the mscgen_js interpreter"),a}function m(t,e){t.id||(t.id=o.getConfig().parentElementPrefix+e.toString())}function b(t){var e=t.getAttribute("data-language");return e||(e=o.getConfig().defaultLanguage),e}function x(t){var e=t.getAttribute("data-mirror-entities");return!(!e||"true"!==e)}function y(t){return t.getAttribute("data-named-style")||"basic"}function w(t){return t.getAttribute("data-regular-arc-text-vertical-alignment")||"middle"}function v(r,n){var o={};try{o="msgenny"===n?e.parse(r):"json"===n?JSON.parse(r):t.parse(r)}catch(t){return t}return o}function C(t,e,n,i,a,c,s){var u=document.getElementById(e);u.innerHTML="",!0===o.getConfig().clickable&&(u.appendChild(p(n,i,e)),e+="link"),r.clean(e,window),r.renderASTNew(t,window,e,{source:n,additionalTemplate:c,mirrorEntitiesOnBottom:a,regularArcTextVerticalAlignment:s})}var k="<span class='mscgen_js' {src} data-language='{lang}' data-named-style='{namedStyle}' data-regular-arc-text-vertical-alignment='{regularArcTextVerticalAlignment}' {mirrorEntities}>{msc}<span>",A="data-src='{src}' ",_="ERROR: Could not find or open the URL '{url}' specified in the <code>data-src</code> attribute.",T="ERROR: Won't load the chart specified in <code>data-src='{url}'</code>, because loading from separate files is switched off in the mscgen_js configuration. <br><br>See <a href='https://sverweij.github.io/mscgen_js/embed.html#loading-from-separate-files'>Loading charts from separate files</a> in the mscgen_js embedding guide how to enable it.",L={"text/x-mscgen":"mscgen","text/x-msgenny":"msgenny","text/x-xu":"xu"};s()}),r("mscgen-inpage",function(){})}();