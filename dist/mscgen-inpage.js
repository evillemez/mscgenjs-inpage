/**
 * @license almond 0.3.2 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */

/*
 This file is part of mscgen_js.

 mscgen_js is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 mscgen_js is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with mscgen_js.  If not, see <http://www.gnu.org/licenses/>.
 */

/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="umd" include="memoize,cloneDeep,flatten,defaults" --development --output lib/lodash/lodash.custom.js`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

!function(){var t,e,r;!function(n){function i(t,e){return x.call(t,e)}function o(t,e){var r,n,i,o,a,c,s,u,l,d,p,f,h=e&&e.split("/"),g=y.map,b=g&&g["*"]||{};if(t){for(t=t.split("/"),a=t.length-1,y.nodeIdCompat&&C.test(t[a])&&(t[a]=t[a].replace(C,"")),"."===t[0].charAt(0)&&h&&(f=h.slice(0,h.length-1),t=f.concat(t)),l=0;l<t.length;l++)if(p=t[l],"."===p)t.splice(l,1),l-=1;else if(".."===p){if(0===l||1===l&&".."===t[2]||".."===t[l-1])continue;l>0&&(t.splice(l-1,2),l-=2)}t=t.join("/")}if((h||b)&&g){for(r=t.split("/"),l=r.length;l>0;l-=1){if(n=r.slice(0,l).join("/"),h)for(d=h.length;d>0;d-=1)if(i=g[h.slice(0,d).join("/")],i&&(i=i[n])){o=i,c=l;break}if(o)break;!s&&b&&b[n]&&(s=b[n],u=l)}!o&&s&&(o=s,c=u),o&&(r.splice(0,c,o),t=r.join("/"))}return t}function a(t,e){return function(){var r=w.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),f.apply(n,r.concat([t,e]))}}function c(t){return function(e){return o(e,t)}}function s(t){return function(e){b[t]=e}}function u(t){if(i(m,t)){var e=m[t];delete m[t],v[t]=!0,p.apply(n,e)}if(!i(b,t)&&!i(v,t))throw new Error("No "+t);return b[t]}function l(t){var e,r=t?t.indexOf("!"):-1;return r>-1&&(e=t.substring(0,r),t=t.substring(r+1,t.length)),[e,t]}function d(t){return function(){return y&&y.config&&y.config[t]||{}}}var p,f,h,g,b={},m={},y={},v={},x=Object.prototype.hasOwnProperty,w=[].slice,C=/\.js$/;h=function(t,e){var r,n=l(t),i=n[0];return t=n[1],i&&(i=o(i,e),r=u(i)),i?t=r&&r.normalize?r.normalize(t,c(e)):o(t,e):(t=o(t,e),n=l(t),i=n[0],t=n[1],i&&(r=u(i))),{f:i?i+"!"+t:t,n:t,pr:i,p:r}},g={require:function(t){return a(t)},exports:function(t){var e=b[t];return"undefined"!=typeof e?e:b[t]={}},module:function(t){return{id:t,uri:"",exports:b[t],config:d(t)}}},p=function(t,e,r,o){var c,l,d,p,f,y,x=[],w=typeof r;if(o=o||t,"undefined"===w||"function"===w){for(e=!e.length&&r.length?["require","exports","module"]:e,f=0;f<e.length;f+=1)if(p=h(e[f],o),l=p.f,"require"===l)x[f]=g.require(t);else if("exports"===l)x[f]=g.exports(t),y=!0;else if("module"===l)c=x[f]=g.module(t);else if(i(b,l)||i(m,l)||i(v,l))x[f]=u(l);else{if(!p.p)throw new Error(t+" missing "+l);p.p.load(p.n,a(o,!0),s(l),{}),x[f]=b[l]}d=r?r.apply(b[t],x):void 0,t&&(c&&c.exports!==n&&c.exports!==b[t]?b[t]=c.exports:d===n&&y||(b[t]=d))}else t&&(b[t]=r)},t=e=f=function(t,e,r,i,o){if("string"==typeof t)return g[t]?g[t](e):u(h(t,e).f);if(!t.splice){if(y=t,y.deps&&f(y.deps,y.callback),!e)return;e.splice?(t=e,e=r,r=null):t=n}return e=e||function(){},"function"==typeof r&&(r=i,i=o),i?p(n,t,e,r):setTimeout(function(){p(n,t,e,r)},4),f},f.config=function(t){return f(t)},t._defined=b,r=function(t,e,r){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(r=e,e=[]),i(b,t)||i(m,t)||(m[t]=[t,e,r])},r.amd={jQuery:!0}}(),r("../node_modules/almond/almond",function(){}),r("lib/mscgenjs-core/parse/xuparser",[],function(){"use strict";function t(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function e(t,r,n,i){this.message=t,this.expected=r,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function r(t){function r(){return o(no,ro)}function n(e){throw c(e,null,t.substring(no,ro),o(no,ro))}function i(e){var r,n,i=io[e];if(i)return i;for(r=e-1;!io[r];)r--;for(i=io[r],i={line:i.line,column:i.column,seenCR:i.seenCR};e>r;)n=t.charAt(r),"\n"===n?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):"\r"===n||"\u2028"===n||"\u2029"===n?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1),r++;return io[e]=i,i}function o(t,e){var r=i(t),n=i(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function a(t){oo>ro||(ro>oo&&(oo=ro,ao=[]),ao.push(t))}function c(t,r,n,i){function o(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function a(t,e){function r(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0100-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1000-\uFFFF]/g,function(t){return"\\u"+e(t)})}var n,i,o,a=new Array(t.length);for(o=0;o<t.length;o++)a[o]=t[o].description;return n=t.length>1?a.slice(0,-1).join(", ")+" or "+a[t.length-1]:a[0],i=e?'"'+r(e)+'"':"end of input","Expected "+n+" but "+i+" found."}return null!==r&&o(r),new e(null!==t?t:a(r,n),r,n,i)}function s(){var e,r,n,i,o,c,s,d,p,f;return e=ro,r=$(),r!==xt?(n=u(),n!==xt?(i=$(),i!==xt?(123===t.charCodeAt(ro)?(o=_t,ro++):(o=xt,0===co&&a(kt)),o!==xt?(c=$(),c!==xt?(s=l(),s!==xt?(d=$(),d!==xt?(125===t.charCodeAt(ro)?(p=At,ro++):(p=xt,0===co&&a(Et)),p!==xt?(f=$(),f!==xt?(no=e,r=Lt(r,s),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e}function u(){var e;return t.substr(ro,3).toLowerCase()===St?(e=t.substr(ro,3),ro+=3):(e=xt,0===co&&a(It)),e===xt&&(t.substr(ro,2).toLowerCase()===jt?(e=t.substr(ro,2),ro+=2):(e=xt,0===co&&a(Tt))),e}function l(){var t,e,r,n,i;return t=ro,e=ro,r=d(),r!==xt&&(no=e,r=Dt(r)),e=r,e===xt&&(e=null),e!==xt?(r=ro,n=f(),n!==xt&&(no=r,n=Nt(n)),r=n,r===xt&&(r=null),r!==xt?(n=ro,i=g(),i!==xt&&(no=n,i=Bt(i)),n=i,n===xt&&(n=null),n!==xt?(e=[e,r,n],t=e):(ro=t,t=xt)):(ro=t,t=xt)):(ro=t,t=xt),t}function d(){var e,r,n,i,o,c;for(e=ro,r=ro,n=[],i=ro,o=p(),o!==xt?(44===t.charCodeAt(ro)?(c=Ot,ro++):(c=xt,0===co&&a(Ht)),c!==xt?(no=i,o=Rt(o),i=o):(ro=i,i=xt)):(ro=i,i=xt);i!==xt;)n.push(i),i=ro,o=p(),o!==xt?(44===t.charCodeAt(ro)?(c=Ot,ro++):(c=xt,0===co&&a(Ht)),c!==xt?(no=i,o=Rt(o),i=o):(ro=i,i=xt)):(ro=i,i=xt);return n!==xt?(i=ro,o=p(),o!==xt?(59===t.charCodeAt(ro)?(c=Wt,ro++):(c=xt,0===co&&a(Ft)),c!==xt?(no=i,o=Rt(o),i=o):(ro=i,i=xt)):(ro=i,i=xt),i!==xt?(n=[n,i],r=n):(ro=r,r=xt)):(ro=r,r=xt),r!==xt&&(no=e,r=Mt(r)),e=r}function p(){var e,r,n,i,o,c,s,u;return co++,e=ro,r=$(),r!==xt?(t.substr(ro,6).toLowerCase()===qt?(n=t.substr(ro,6),ro+=6):(n=xt,0===co&&a(zt)),n===xt&&(t.substr(ro,11).toLowerCase()===Ut?(n=t.substr(ro,11),ro+=11):(n=xt,0===co&&a(Xt))),n!==xt?(i=$(),i!==xt?(61===t.charCodeAt(ro)?(o=Pt,ro++):(o=xt,0===co&&a(Vt)),o!==xt?(c=$(),c!==xt?(s=K(),s!==xt?(u=$(),u!==xt?(no=e,r=$t(n,s),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e===xt&&(e=ro,r=$(),r!==xt?(t.substr(ro,5).toLowerCase()===Kt?(n=t.substr(ro,5),ro+=5):(n=xt,0===co&&a(Zt)),n!==xt?(i=$(),i!==xt?(61===t.charCodeAt(ro)?(o=Pt,ro++):(o=xt,0===co&&a(Vt)),o!==xt?(c=$(),c!==xt?(s=nt(),s!==xt?(u=$(),u!==xt?(no=e,r=$t(n,s),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e===xt&&(e=ro,r=$(),r!==xt?(t.substr(ro,12).toLowerCase()===Jt?(n=t.substr(ro,12),ro+=12):(n=xt,0===co&&a(Qt)),n!==xt?(i=$(),i!==xt?(61===t.charCodeAt(ro)?(o=Pt,ro++):(o=xt,0===co&&a(Vt)),o!==xt?(c=$(),c!==xt?(s=tt(),s!==xt?(u=$(),u!==xt?(no=e,r=Yt(n,s),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e===xt&&(e=ro,r=$(),r!==xt?(t.substr(ro,9).toLowerCase()===te?(n=t.substr(ro,9),ro+=9):(n=xt,0===co&&a(ee)),n!==xt?(i=$(),i!==xt?(61===t.charCodeAt(ro)?(o=Pt,ro++):(o=xt,0===co&&a(Vt)),o!==xt?(c=$(),c!==xt?(s=B(),s!==xt?(u=$(),u!==xt?(no=e,r=$t(n,s),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)))),co--,e===xt&&(r=xt,0===co&&a(Gt)),e}function f(){var e,r,n,i,o,c;for(e=ro,r=ro,n=[],i=ro,o=h(),o!==xt?(44===t.charCodeAt(ro)?(c=Ot,ro++):(c=xt,0===co&&a(Ht)),c!==xt?(no=i,o=re(o),i=o):(ro=i,i=xt)):(ro=i,i=xt);i!==xt;)n.push(i),i=ro,o=h(),o!==xt?(44===t.charCodeAt(ro)?(c=Ot,ro++):(c=xt,0===co&&a(Ht)),c!==xt?(no=i,o=re(o),i=o):(ro=i,i=xt)):(ro=i,i=xt);return n!==xt?(i=ro,o=h(),o!==xt?(59===t.charCodeAt(ro)?(c=Wt,ro++):(c=xt,0===co&&a(Ft)),c!==xt?(no=i,o=re(o),i=o):(ro=i,i=xt)):(ro=i,i=xt),i!==xt?(n=[n,i],r=n):(ro=r,r=xt)):(ro=r,r=xt),r!==xt&&(no=e,r=ne(r)),e=r}function h(){var e,r,n,i,o,c,s,u;return co++,e=ro,r=$(),r!==xt?(n=B(),n!==xt?(i=$(),i!==xt?(o=ro,91===t.charCodeAt(ro)?(c=oe,ro++):(c=xt,0===co&&a(ae)),c!==xt?(s=T(),s!==xt?(93===t.charCodeAt(ro)?(u=ce,ro++):(u=xt,0===co&&a(se)),u!==xt?(no=o,c=ue(n,s),o=c):(ro=o,o=xt)):(ro=o,o=xt)):(ro=o,o=xt),o===xt&&(o=null),o!==xt?(c=$(),c!==xt?(no=e,r=le(n,o),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e===xt&&(e=ro,r=$(),r!==xt?(n=R(),n!==xt?(i=$(),i!==xt?(o=ro,91===t.charCodeAt(ro)?(c=oe,ro++):(c=xt,0===co&&a(ae)),c!==xt?(s=T(),s!==xt?(93===t.charCodeAt(ro)?(u=ce,ro++):(u=xt,0===co&&a(se)),u!==xt?(no=o,c=ue(n,s),o=c):(ro=o,o=xt)):(ro=o,o=xt)):(ro=o,o=xt),o===xt&&(o=null),o!==xt?(c=$(),c!==xt?(no=e,r=de(n,o),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)),co--,e===xt&&(r=xt,0===co&&a(ie)),e}function g(){var e,r,n,i,o;if(e=[],r=ro,n=b(),n!==xt?(i=$(),i!==xt?(59===t.charCodeAt(ro)?(o=Wt,ro++):(o=xt,0===co&&a(Ft)),o!==xt?(no=r,n=pe(n),r=n):(ro=r,r=xt)):(ro=r,r=xt)):(ro=r,r=xt),r!==xt)for(;r!==xt;)e.push(r),r=ro,n=b(),n!==xt?(i=$(),i!==xt?(59===t.charCodeAt(ro)?(o=Wt,ro++):(o=xt,0===co&&a(Ft)),o!==xt?(no=r,n=pe(n),r=n):(ro=r,r=xt)):(ro=r,r=xt)):(ro=r,r=xt);else e=xt;return e}function b(){var e,r,n,i,o,c,s;for(e=ro,r=ro,n=[],i=ro,o=m(),o!==xt?(c=$(),c!==xt?(44===t.charCodeAt(ro)?(s=Ot,ro++):(s=xt,0===co&&a(Ht)),s!==xt?(no=i,o=pe(o),i=o):(ro=i,i=xt)):(ro=i,i=xt)):(ro=i,i=xt);i!==xt;)n.push(i),i=ro,o=m(),o!==xt?(c=$(),c!==xt?(44===t.charCodeAt(ro)?(s=Ot,ro++):(s=xt,0===co&&a(Ht)),s!==xt?(no=i,o=pe(o),i=o):(ro=i,i=xt)):(ro=i,i=xt)):(ro=i,i=xt);return n!==xt?(i=ro,o=m(),o!==xt&&(no=i,o=fe(o)),i=o,i!==xt?(n=[n,i],r=n):(ro=r,r=xt)):(ro=r,r=xt),r!==xt&&(no=e,r=he(r)),e=r}function m(){var t;return t=y(),t===xt&&(t=C()),t}function y(){var e,r,n,i,o,c;return e=ro,r=ro,n=v(),n!==xt&&(no=r,n=pe(n)),r=n,r===xt&&(r=ro,n=w(),n!==xt&&(no=r,n=pe(n)),r=n,r===xt&&(r=ro,n=x(),n!==xt&&(no=r,n=pe(n)),r=n)),r!==xt?(n=ro,91===t.charCodeAt(ro)?(i=oe,ro++):(i=xt,0===co&&a(ae)),i!==xt?(o=T(),o!==xt?(93===t.charCodeAt(ro)?(c=ce,ro++):(c=xt,0===co&&a(se)),c!==xt?(no=n,i=ge(r,o),n=i):(ro=n,n=xt)):(ro=n,n=xt)):(ro=n,n=xt),n===xt&&(n=null),n!==xt?(no=e,r=be(r,n),e=r):(ro=e,e=xt)):(ro=e,e=xt),e}function v(){var t,e,r,n;return t=ro,e=$(),e!==xt?(r=_(),r!==xt?(n=$(),n!==xt?(no=t,e=me(r),t=e):(ro=t,t=xt)):(ro=t,t=xt)):(ro=t,t=xt),t}function x(){var t,e,r,n;return t=ro,e=$(),e!==xt?(r=k(),r!==xt?(n=$(),n!==xt?(no=t,e=me(r),t=e):(ro=t,t=xt)):(ro=t,t=xt)):(ro=t,t=xt),t}function w(){var e,r,n,i,o,c,s,u;return e=ro,r=$(),r!==xt?(n=H(),n!==xt?(i=$(),i!==xt?(o=A(),o!==xt?(c=$(),c!==xt?(s=H(),s!==xt?(u=$(),u!==xt?(no=e,r=ye(n,o,s),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e===xt&&(e=ro,r=$(),r!==xt?(42===t.charCodeAt(ro)?(n=ve,ro++):(n=xt,0===co&&a(xe)),n!==xt?(i=$(),i!==xt?(o=S(),o!==xt?(c=$(),c!==xt?(s=H(),s!==xt?(u=$(),u!==xt?(no=e,r=we(o,s),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e===xt&&(e=ro,r=$(),r!==xt?(n=H(),n!==xt?(i=$(),i!==xt?(o=L(),o!==xt?(c=$(),c!==xt?(42===t.charCodeAt(ro)?(s=ve,ro++):(s=xt,0===co&&a(xe)),s!==xt?(u=$(),u!==xt?(no=e,r=Ce(n,o),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e===xt&&(e=ro,r=$(),r!==xt?(n=H(),n!==xt?(i=$(),i!==xt?(o=E(),o!==xt?(c=$(),c!==xt?(42===t.charCodeAt(ro)?(s=ve,ro++):(s=xt,0===co&&a(xe)),s!==xt?(u=$(),u!==xt?(no=e,r=Ce(n,o),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)))),e}function C(){var e,r,n,i,o,c,s,u,l,d,p,f,h,b,m,y;return e=ro,r=$(),r!==xt?(n=H(),n!==xt?(i=$(),i!==xt?(o=j(),o!==xt?(c=$(),c!==xt?(s=H(),s!==xt?(u=$(),u!==xt?(l=ro,91===t.charCodeAt(ro)?(d=oe,ro++):(d=xt,0===co&&a(ae)),d!==xt?(p=T(),p!==xt?(93===t.charCodeAt(ro)?(f=ce,ro++):(f=xt,0===co&&a(se)),f!==xt?(no=l,d=_e(n,o,s,p),l=d):(ro=l,l=xt)):(ro=l,l=xt)):(ro=l,l=xt),l===xt&&(l=null),l!==xt?(d=$(),d!==xt?(123===t.charCodeAt(ro)?(p=_t,ro++):(p=xt,0===co&&a(kt)),p!==xt?(f=$(),f!==xt?(h=g(),h===xt&&(h=null),h!==xt?(b=$(),b!==xt?(125===t.charCodeAt(ro)?(m=At,ro++):(m=xt,0===co&&a(Et)),m!==xt?(y=$(),y!==xt?(no=e,r=ke(n,o,s,l,h),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e}function _(){var e,r;return co++,t.substr(ro,3)===Ee?(e=Ee,ro+=3):(e=xt,0===co&&a(Le)),e===xt&&(t.substr(ro,3)===Se?(e=Se,ro+=3):(e=xt,0===co&&a(Ie))),co--,e===xt&&(r=xt,0===co&&a(Ae)),e}function k(){var e,r;return co++,t.substr(ro,3)===Te?(e=Te,ro+=3):(e=xt,0===co&&a(De)),co--,e===xt&&(r=xt,0===co&&a(je)),e}function A(){var t,e;return t=ro,e=E(),e===xt&&(e=L(),e===xt&&(e=S(),e===xt&&(e=I()))),e!==xt&&(no=t,e=Ne(e)),t=e}function E(){var e,r;return co++,t.substr(ro,2)===Oe?(e=Oe,ro+=2):(e=xt,0===co&&a(He)),e===xt&&(t.substr(ro,3)===Re?(e=Re,ro+=3):(e=xt,0===co&&a(We)),e===xt&&(t.substr(ro,2)===Fe?(e=Fe,ro+=2):(e=xt,0===co&&a(Me)),e===xt&&(t.substr(ro,5)===Ge?(e=Ge,ro+=5):(e=xt,0===co&&a(qe)),e===xt&&(t.substr(ro,3)===ze?(e=ze,ro+=3):(e=xt,0===co&&a(Ue)),e===xt&&(t.substr(ro,2)===Xe?(e=Xe,ro+=2):(e=xt,0===co&&a(Pe)),e===xt&&(t.substr(ro,4)===Ve?(e=Ve,ro+=4):(e=xt,0===co&&a($e)),e===xt&&(t.substr(ro,2)===Ke?(e=Ke,ro+=2):(e=xt,0===co&&a(Ze)),e===xt&&(t.substr(ro,3)===Je?(e=Je,ro+=3):(e=xt,0===co&&a(Qe)))))))))),co--,e===xt&&(r=xt,0===co&&a(Be)),e}function L(){var e,r;return co++,t.substr(ro,2)===tr?(e=tr,ro+=2):(e=xt,0===co&&a(er)),e===xt&&(t.substr(ro,3)===rr?(e=rr,ro+=3):(e=xt,0===co&&a(nr)),e===xt&&(t.substr(ro,2)===ir?(e=ir,ro+=2):(e=xt,0===co&&a(or)),e===xt&&(t.substr(ro,2)===ar?(e=ar,ro+=2):(e=xt,0===co&&a(cr)),e===xt&&(t.substr(ro,2)===sr?(e=sr,ro+=2):(e=xt,0===co&&a(ur)),e===xt&&(t.substr(ro,2).toLowerCase()===lr?(e=t.substr(ro,2),ro+=2):(e=xt,0===co&&a(dr))))))),co--,e===xt&&(r=xt,0===co&&a(Ye)),e}function S(){var e,r;return co++,t.substr(ro,2)===fr?(e=fr,ro+=2):(e=xt,0===co&&a(hr)),e===xt&&(t.substr(ro,3)===gr?(e=gr,ro+=3):(e=xt,0===co&&a(br)),e===xt&&(t.substr(ro,2)===mr?(e=mr,ro+=2):(e=xt,0===co&&a(yr)),e===xt&&(t.substr(ro,2)===vr?(e=vr,ro+=2):(e=xt,0===co&&a(xr)),e===xt&&(t.substr(ro,2)===wr?(e=wr,ro+=2):(e=xt,0===co&&a(Cr)),e===xt&&(t.substr(ro,2).toLowerCase()===_r?(e=t.substr(ro,2),ro+=2):(e=xt,0===co&&a(kr))))))),co--,e===xt&&(r=xt,0===co&&a(pr)),e}function I(){var e,r;return co++,t.substr(ro,4).toLowerCase()===Er?(e=t.substr(ro,4),ro+=4):(e=xt,0===co&&a(Lr)),e===xt&&(t.substr(ro,4).toLowerCase()===Sr?(e=t.substr(ro,4),ro+=4):(e=xt,0===co&&a(Ir)),e===xt&&(t.substr(ro,4).toLowerCase()===jr?(e=t.substr(ro,4),ro+=4):(e=xt,0===co&&a(Tr)),e===xt&&(t.substr(ro,3).toLowerCase()===Dr?(e=t.substr(ro,3),ro+=3):(e=xt,0===co&&a(Nr))))),co--,e===xt&&(r=xt,0===co&&a(Ar)),e}function j(){var e,r;return co++,e=ro,t.substr(ro,3).toLowerCase()===Or?(r=t.substr(ro,3),ro+=3):(r=xt,0===co&&a(Hr)),r===xt&&(t.substr(ro,4).toLowerCase()===Rr?(r=t.substr(ro,4),ro+=4):(r=xt,0===co&&a(Wr)),r===xt&&(t.substr(ro,3).toLowerCase()===Fr?(r=t.substr(ro,3),ro+=3):(r=xt,0===co&&a(Mr)),r===xt&&(t.substr(ro,5).toLowerCase()===Gr?(r=t.substr(ro,5),ro+=5):(r=xt,0===co&&a(qr)),r===xt&&(t.substr(ro,3).toLowerCase()===zr?(r=t.substr(ro,3),ro+=3):(r=xt,0===co&&a(Ur)),r===xt&&(t.substr(ro,3).toLowerCase()===Xr?(r=t.substr(ro,3),ro+=3):(r=xt,0===co&&a(Pr)),r===xt&&(t.substr(ro,6).toLowerCase()===Vr?(r=t.substr(ro,6),ro+=6):(r=xt,0===co&&a($r)),r===xt&&(t.substr(ro,3).toLowerCase()===Kr?(r=t.substr(ro,3),ro+=3):(r=xt,0===co&&a(Zr)),r===xt&&(t.substr(ro,8).toLowerCase()===Jr?(r=t.substr(ro,8),ro+=8):(r=xt,0===co&&a(Qr)),r===xt&&(t.substr(ro,6).toLowerCase()===Yr?(r=t.substr(ro,6),ro+=6):(r=xt,0===co&&a(tn)),r===xt&&(t.substr(ro,8).toLowerCase()===en?(r=t.substr(ro,8),ro+=8):(r=xt,0===co&&a(rn)),r===xt&&(t.substr(ro,6).toLowerCase()===nn?(r=t.substr(ro,6),ro+=6):(r=xt,0===co&&a(on)),r===xt&&(t.substr(ro,4).toLowerCase()===an?(r=t.substr(ro,4),ro+=4):(r=xt,0===co&&a(cn)),r===xt&&(t.substr(ro,3).toLowerCase()===sn?(r=t.substr(ro,3),ro+=3):(r=xt,0===co&&a(un)),r===xt&&(t.substr(ro,3).toLowerCase()===ln?(r=t.substr(ro,3),ro+=3):(r=xt,0===co&&a(dn)))))))))))))))),r!==xt&&(no=e,r=pn(r)),e=r,co--,e===xt&&(r=xt,0===co&&a(Br)),e}function T(){var e,r,n,i,o,c;for(e=ro,r=ro,n=[],i=ro,o=D(),o!==xt?(44===t.charCodeAt(ro)?(c=Ot,ro++):(c=xt,0===co&&a(Ht)),c!==xt?(no=i,o=pe(o),i=o):(ro=i,i=xt)):(ro=i,i=xt);i!==xt;)n.push(i),i=ro,o=D(),o!==xt?(44===t.charCodeAt(ro)?(c=Ot,ro++):(c=xt,0===co&&a(Ht)),c!==xt?(no=i,o=pe(o),i=o):(ro=i,i=xt)):(ro=i,i=xt);return n!==xt?(i=ro,o=D(),o!==xt&&(no=i,o=pe(o)),i=o,i!==xt?(n=[n,i],r=n):(ro=r,r=xt)):(ro=r,r=xt),r!==xt&&(no=e,r=Mt(r)),e=r}function D(){var e,r,n,i,o,c,s,u;return e=ro,r=$(),r!==xt?(n=N(),n!==xt?(i=$(),i!==xt?(61===t.charCodeAt(ro)?(o=Pt,ro++):(o=xt,0===co&&a(Vt)),o!==xt?(c=$(),c!==xt?(s=H(),s!==xt?(u=$(),u!==xt?(no=e,r=fn(n,s),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e}function N(){var e,r;return co++,t.substr(ro,5).toLowerCase()===gn?(e=t.substr(ro,5),ro+=5):(e=xt,0===co&&a(bn)),e===xt&&(t.substr(ro,5).toLowerCase()===mn?(e=t.substr(ro,5),ro+=5):(e=xt,0===co&&a(yn)),e===xt&&(t.substr(ro,2).toLowerCase()===vn?(e=t.substr(ro,2),ro+=2):(e=xt,0===co&&a(xn)),e===xt&&(t.substr(ro,3).toLowerCase()===wn?(e=t.substr(ro,3),ro+=3):(e=xt,0===co&&a(Cn)),e===xt&&(t.substr(ro,9).toLowerCase()===_n?(e=t.substr(ro,9),ro+=9):(e=xt,0===co&&a(kn)),e===xt&&(t.substr(ro,10).toLowerCase()===An?(e=t.substr(ro,10),ro+=10):(e=xt,0===co&&a(En)),e===xt&&(t.substr(ro,9).toLowerCase()===Ln?(e=t.substr(ro,9),ro+=9):(e=xt,0===co&&a(Sn)),e===xt&&(t.substr(ro,10).toLowerCase()===In?(e=t.substr(ro,10),ro+=10):(e=xt,0===co&&a(jn)),e===xt&&(t.substr(ro,11).toLowerCase()===Tn?(e=t.substr(ro,11),ro+=11):(e=xt,0===co&&a(Dn)),e===xt&&(t.substr(ro,12).toLowerCase()===Nn?(e=t.substr(ro,12),ro+=12):(e=xt,0===co&&a(Bn)),e===xt&&(t.substr(ro,12).toLowerCase()===On?(e=t.substr(ro,12),ro+=12):(e=xt,0===co&&a(Hn)),e===xt&&(t.substr(ro,13).toLowerCase()===Rn?(e=t.substr(ro,13),ro+=13):(e=xt,0===co&&a(Wn)),e===xt&&(t.substr(ro,12).toLowerCase()===Fn?(e=t.substr(ro,12),ro+=12):(e=xt,0===co&&a(Mn)),e===xt&&(t.substr(ro,13).toLowerCase()===Gn?(e=t.substr(ro,13),ro+=13):(e=xt,0===co&&a(qn)),e===xt&&(t.substr(ro,14).toLowerCase()===zn?(e=t.substr(ro,14),ro+=14):(e=xt,0===co&&a(Un)),e===xt&&(t.substr(ro,15).toLowerCase()===Xn?(e=t.substr(ro,15),ro+=15):(e=xt,0===co&&a(Pn)),e===xt&&(t.substr(ro,7).toLowerCase()===Vn?(e=t.substr(ro,7),ro+=7):(e=xt,0===co&&a($n)))))))))))))))))),co--,e===xt&&(r=xt,0===co&&a(hn)),e}function B(){var e,r,n,i;return co++,e=ro,34===t.charCodeAt(ro)?(r=Zn,ro++):(r=xt,0===co&&a(Jn)),r!==xt?(n=O(),n!==xt?(34===t.charCodeAt(ro)?(i=Zn,ro++):(i=xt,0===co&&a(Jn)),i!==xt?(no=e,r=Qn(n),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),co--,e===xt&&(r=xt,0===co&&a(Kn)),e}function O(){var e,r,n,i;for(e=[],r=ro,n=ro,co++,34===t.charCodeAt(ro)?(i=Zn,ro++):(i=xt,0===co&&a(Jn)),co--,i===xt?n=void 0:(ro=n,n=xt),n!==xt?(t.substr(ro,2)===Yn?(i=Yn,ro+=2):(i=xt,0===co&&a(ti)),i===xt&&(t.length>ro?(i=t.charAt(ro),ro++):(i=xt,0===co&&a(ei))),i!==xt?(no=r,n=ri(i),r=n):(ro=r,r=xt)):(ro=r,r=xt);r!==xt;)e.push(r),r=ro,n=ro,co++,34===t.charCodeAt(ro)?(i=Zn,ro++):(i=xt,0===co&&a(Jn)),co--,i===xt?n=void 0:(ro=n,n=xt),n!==xt?(t.substr(ro,2)===Yn?(i=Yn,ro+=2):(i=xt,0===co&&a(ti)),i===xt&&(t.length>ro?(i=t.charAt(ro),ro++):(i=xt,0===co&&a(ei))),i!==xt?(no=r,n=ri(i),r=n):(ro=r,r=xt)):(ro=r,r=xt);return e}function H(){var t,e;return co++,t=R(),t===xt&&(t=B()),co--,t===xt&&(e=xt,0===co&&a(ni)),t}function R(){var e,r,n;if(e=ro,r=[],ii.test(t.charAt(ro))?(n=t.charAt(ro),ro++):(n=xt,0===co&&a(oi)),n!==xt)for(;n!==xt;)r.push(n),ii.test(t.charAt(ro))?(n=t.charAt(ro),ro++):(n=xt,0===co&&a(oi));else r=xt;return r!==xt&&(no=e,r=ai(r)),e=r}function W(){var e,r;return co++,e=ro,si.test(t.charAt(ro))?(r=t.charAt(ro),ro++):(r=xt,0===co&&a(ui)),r!==xt&&(no=e,r=ri(r)),e=r,co--,e===xt&&(r=xt,0===co&&a(ci)),e}function F(){var e,r;return co++,e=ro,di.test(t.charAt(ro))?(r=t.charAt(ro),ro++):(r=xt,0===co&&a(pi)),r!==xt&&(no=e,r=ri(r)),e=r,co--,e===xt&&(r=xt,0===co&&a(li)),e}function M(){var e;return t.substr(ro,2)===fi?(e=fi,ro+=2):(e=xt,0===co&&a(hi)),e}function G(){var e;return t.substr(ro,2)===gi?(e=gi,ro+=2):(e=xt,0===co&&a(bi)),e}function q(){var e,r,n;return e=ro,r=ro,co++,t.substr(ro,2)===gi?(n=gi,ro+=2):(n=xt,0===co&&a(bi)),co--,n===xt?r=void 0:(ro=r,r=xt),r!==xt?(t.length>ro?(n=t.charAt(ro),ro++):(n=xt,0===co&&a(ei)),n!==xt?(no=e,r=ri(n),e=r):(ro=e,e=xt)):(ro=e,e=xt),e}function z(){var t,e,r,n;if(t=ro,e=M(),e!==xt){for(r=[],n=q();n!==xt;)r.push(n),n=q();r!==xt?(n=G(),n!==xt?(no=t,e=mi(e,r,n),t=e):(ro=t,t=xt)):(ro=t,t=xt)}else ro=t,t=xt;return t}function U(){var e;return t.substr(ro,2)===yi?(e=yi,ro+=2):(e=xt,0===co&&a(vi)),e===xt&&(35===t.charCodeAt(ro)?(e=xi,ro++):(e=xt,0===co&&a(wi))),e}function X(){var e;return Ci.test(t.charAt(ro))?(e=t.charAt(ro),ro++):(e=xt,0===co&&a(_i)),e}function P(){var t,e,r,n;if(t=ro,e=U(),e!==xt){for(r=[],n=X();n!==xt;)r.push(n),n=X();r!==xt?(no=t,e=ki(e,r),t=e):(ro=t,t=xt)}else ro=t,t=xt;return t}function V(){var t,e;return co++,t=P(),t===xt&&(t=z()),co--,t===xt&&(e=xt,0===co&&a(Ai)),t}function $(){var t,e;for(t=[],e=W(),e===xt&&(e=F(),e===xt&&(e=V()));e!==xt;)t.push(e),e=W(),e===xt&&(e=F(),e===xt&&(e=V()));return t}function K(){var t,e;return co++,t=ro,e=Z(),e!==xt&&(no=t,e=Li(e)),t=e,t===xt&&(t=ro,e=J(),e!==xt&&(no=t,e=Si(e)),t=e),co--,t===xt&&(e=xt,0===co&&a(Ei)),t}function Z(){var e,r,n,i;return e=ro,34===t.charCodeAt(ro)?(r=Zn,ro++):(r=xt,0===co&&a(Jn)),r!==xt?(n=J(),n!==xt?(34===t.charCodeAt(ro)?(i=Zn,ro++):(i=xt,0===co&&a(Jn)),i!==xt?(no=e,r=Ii(n),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e}function J(){var t;return t=Y(),t===xt&&(t=Q()),t}function Q(){var e,r,n;if(e=ro,r=[],ji.test(t.charAt(ro))?(n=t.charAt(ro),ro++):(n=xt,0===co&&a(Ti)),n!==xt)for(;n!==xt;)r.push(n),ji.test(t.charAt(ro))?(n=t.charAt(ro),ro++):(n=xt,0===co&&a(Ti));else r=xt;return r!==xt&&(no=e,r=Di(r)),e=r}function Y(){var e,r,n,i,o;return e=ro,r=ro,n=Q(),n!==xt?(46===t.charCodeAt(ro)?(i=Ni,ro++):(i=xt,0===co&&a(Bi)),i!==xt?(o=Q(),o!==xt?(n=[n,i,o],r=n):(ro=r,r=xt)):(ro=r,r=xt)):(ro=r,r=xt),r!==xt&&(no=e,r=Oi(r)),e=r}function tt(){var t,e;return co++,t=ro,e=et(),e!==xt&&(no=t,e=Ri(e)),t=e,t===xt&&(t=ro,e=rt(),e!==xt&&(no=t,e=Wi(e)),t=e),co--,t===xt&&(e=xt,0===co&&a(Hi)),t}function et(){var e,r,n,i;return e=ro,34===t.charCodeAt(ro)?(r=Zn,ro++):(r=xt,0===co&&a(Jn)),r!==xt?(n=rt(),n!==xt?(34===t.charCodeAt(ro)?(i=Zn,ro++):(i=xt,0===co&&a(Jn)),i!==xt?(no=e,r=Li(n),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e}function rt(){var e;return t.substr(ro,4).toLowerCase()===Fi?(e=t.substr(ro,4),ro+=4):(e=xt,0===co&&a(Mi)),e===xt&&(t.substr(ro,5).toLowerCase()===Gi?(e=t.substr(ro,5),ro+=5):(e=xt,0===co&&a(qi)),e===xt&&(t.substr(ro,2).toLowerCase()===zi?(e=t.substr(ro,2),ro+=2):(e=xt,0===co&&a(Ui)),e===xt&&(t.substr(ro,3).toLowerCase()===Xi?(e=t.substr(ro,3),ro+=3):(e=xt,0===co&&a(Pi)),e===xt&&(48===t.charCodeAt(ro)?(e=Vi,ro++):(e=xt,0===co&&a($i)),e===xt&&(49===t.charCodeAt(ro)?(e=Ki,ro++):(e=xt,0===co&&a(Zi))))))),e}function nt(){var t,e;return co++,t=it(),t===xt&&(t=ot()),co--,t===xt&&(e=xt,0===co&&a(Ji)),t}function it(){var e,r,n,i;return e=ro,34===t.charCodeAt(ro)?(r=Zn,ro++):(r=xt,0===co&&a(Jn)),r!==xt?(n=ot(),n!==xt?(34===t.charCodeAt(ro)?(i=Zn,ro++):(i=xt,0===co&&a(Jn)),i!==xt?(no=e,r=Li(n),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e}function ot(){var e,r;return e=ro,r=J(),r!==xt&&(no=e,r=Qi(r)),e=r,e===xt&&(e=ro,t.substr(ro,4).toLowerCase()===Yi?(r=t.substr(ro,4),ro+=4):(r=xt,0===co&&a(to)),r!==xt&&(no=e,r=eo(r)),e=r),e}function at(t,e){return t=t||{},e&&Object.getOwnPropertyNames(e).forEach(function(r){t[r]=e[r]}),t}function ct(t){var e={};return t[0].forEach(function(t){e=at(e,t)}),at(e,t[1])}function st(t){return["true","on","1"].indexOf(t.toLowerCase())>-1}function ut(t,e){var r={};return r[t.toLowerCase()]=e,r}function lt(t,e){return void 0===e||"*"===e||t.entities.some(function(t){return t.name===e})}function dt(t){return["box","abox","rbox","note","msc","hscale","width","arcgradient","wordwraparcs","label","color","idurl","id","url","linecolor","linecolour","textcolor","textcolour","textbgcolor","textbgcolour","arclinecolor","arclinecolour","arctextcolor","arctextcolour","arctextbgcolor","arctextbgcolour","arcskip"].indexOf(t)>-1}function pt(t,e){return"Entity '"+t+"' in arc '"+e.from+" "+e.kind+" "+e.to+"' is not defined."}function ft(t,e){this.name="EntityNotDefinedError",this.message=pt(t,e),e.location&&(this.location=e.location,this.location.start.line++,this.location.end.line++)}function ht(t,e){return t||(t={},t.entities=[]),e&&e.arcs&&e.arcs.forEach(function(e){e.forEach(function(e){if(e.from&&!lt(t,e.from))throw new ft(e.from,e);if(e.to&&!lt(t,e.to))throw new ft(e.to,e);e.location&&delete e.location,e.arcs&&ht(t,e)})}),t}function gt(t){return t&&t.options?!!t.options.watermark||!!t.options.width&&"auto"===t.options.width:!1}function bt(t){return t&&t.arcs?t.arcs.some(function(t){return t.some(function(t){return["alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"].indexOf(t.kind)>-1})}):!1}function mt(t,e){var r=gt(t),n=bt(e);return{extendedOptions:r,extendedArcTypes:n,extendedFeatures:r||n}}var yt,vt=arguments.length>1?arguments[1]:{},xt={},wt={program:s},Ct=s,_t="{",kt={type:"literal",value:"{",description:'"{"'},At="}",Et={type:"literal",value:"}",description:'"}"'},Lt=function(t,e){e[1]=ht(e[1],e[2]);var r=at(e[0],at(e[1],e[2]));return r=at({meta:mt(e[0],e[2])},r),t.length>0&&(r=at({precomment:t},r)),r},St="msc",It={type:"literal",value:"msc",description:'"msc"'},jt="xu",Tt={type:"literal",value:"xu",description:'"xu"'},Dt=function(t){return{options:t}},Nt=function(t){return{entities:t}},Bt=function(t){return{arcs:t}},Ot=",",Ht={type:"literal",value:",",description:'","'},Rt=function(t){return t},Wt=";",Ft={type:"literal",value:";",description:'";"'},Mt=function(t){return ct(t)},Gt={type:"other",description:"option"},qt="hscale",zt={type:"literal",value:"hscale",description:'"hscale"'},Ut="arcgradient",Xt={type:"literal",value:"arcgradient",description:'"arcgradient"'},Pt="=",Vt={type:"literal",value:"=",description:'"="'},$t=function(t,e){return ut(t,e)},Kt="width",Zt={type:"literal",value:"width",description:'"width"'},Jt="wordwraparcs",Qt={type:"literal",value:"wordwraparcs",description:'"wordwraparcs"'},Yt=function(t,e){var r={};return r[t.toLowerCase()]=st(e),r},te="watermark",ee={type:"literal",value:"watermark",description:'"watermark"'},re=function(t){return t},ne=function(t){return t[0].push(t[1]),t[0]},ie={type:"other",description:"entity"},oe="[",ae={type:"literal",value:"[",description:'"["'},ce="]",se={type:"literal",value:"]",description:'"]"'},ue=function(t,e){return e},le=function(t,e){return at({name:t},e)},de=function(t,e){return dt(t)&&n("MscGen keywords aren't allowed as entity names (embed them in quotes if you need them)"),at({name:t},e)},pe=function(t){return t},fe=function(t){return[t]},he=function(t){return t[0].push(t[1][0]),t[0]},ge=function(t,e){return e},be=function(t,e){return at(t,e)},me=function(t){return{kind:t}},ye=function(t,e,n){return{kind:e,from:t,to:n,location:r()}},ve="*",xe={type:"literal",value:"*",description:'"*"'},we=function(t,e){return{kind:t,from:"*",to:e,location:r()}},Ce=function(t,e){return{kind:e,from:t,to:"*",location:r()}},_e=function(t,e,r,n){return n},ke=function(t,e,n,i,o){var a={kind:e,from:t,to:n,location:r(),arcs:o};return at(a,i)},Ae={type:"other",description:"empty row"},Ee="|||",Le={type:"literal",value:"|||",description:'"|||"'},Se="...",Ie={type:"literal",value:"...",description:'"..."'},je={type:"other",description:"---"},Te="---",De={type:"literal",value:"---",description:'"---"'},Ne=function(t){return t.toLowerCase()},Be={type:"other",description:"bi-directional arrow"},Oe="--",He={type:"literal",value:"--",description:'"--"'},Re="<->",We={type:"literal",value:"<->",description:'"<->"'},Fe="==",Me={type:"literal",value:"==",description:'"=="'},Ge="<<=>>",qe={type:"literal",value:"<<=>>",description:'"<<=>>"'},ze="<=>",Ue={type:"literal",value:"<=>",description:'"<=>"'},Xe="..",Pe={type:"literal",value:"..",description:'".."'},Ve="<<>>",$e={type:"literal",value:"<<>>",description:'"<<>>"'},Ke="::",Ze={type:"literal",value:"::",description:'"::"'},Je="<:>",Qe={type:"literal",value:"<:>",description:'"<:>"'},Ye={type:"other",description:"left to right arrow"},tr="->",er={type:"literal",value:"->",description:'"->"'},rr="=>>",nr={type:"literal",value:"=>>",description:'"=>>"'},ir="=>",or={type:"literal",value:"=>",description:'"=>"'},ar=">>",cr={type:"literal",value:">>",description:'">>"'},sr=":>",ur={type:"literal",value:":>",description:'":>"'},lr="-x",dr={type:"literal",value:"-x",description:'"-x"'},pr={type:"other",description:"right to left arrow"},fr="<-",hr={type:"literal",value:"<-",description:'"<-"'},gr="<<=",br={type:"literal",value:"<<=",description:'"<<="'},mr="<=",yr={type:"literal",value:"<=",description:'"<="'},vr="<<",xr={type:"literal",value:"<<",description:'"<<"'},wr="<:",Cr={type:"literal",value:"<:",description:'"<:"'},_r="x-",kr={type:"literal",value:"x-",description:'"x-"'},Ar={type:"other",description:"box"},Er="note",Lr={type:"literal",value:"note",description:'"note"'},Sr="abox",Ir={type:"literal",value:"abox",description:'"abox"'},jr="rbox",Tr={type:"literal",value:"rbox",description:'"rbox"'},Dr="box",Nr={type:"literal",value:"box",description:'"box"'},Br={type:"other",description:"inline expression"},Or="alt",Hr={type:"literal",value:"alt",description:'"alt"'},Rr="else",Wr={type:"literal",value:"else",description:'"else"'},Fr="opt",Mr={type:"literal",value:"opt",description:'"opt"'},Gr="break",qr={type:"literal",value:"break",description:'"break"'},zr="par",Ur={type:"literal",value:"par",description:'"par"'},Xr="seq",Pr={type:"literal",value:"seq",description:'"seq"'},Vr="strict",$r={type:"literal",value:"strict",description:'"strict"'},Kr="neg",Zr={type:"literal",value:"neg",description:'"neg"'},Jr="critical",Qr={type:"literal",value:"critical",description:'"critical"'},Yr="ignore",tn={type:"literal",value:"ignore",description:'"ignore"'},en="consider",rn={type:"literal",value:"consider",description:'"consider"'},nn="assert",on={type:"literal",value:"assert",description:'"assert"'},an="loop",cn={type:"literal",value:"loop",description:'"loop"'},sn="ref",un={type:"literal",value:"ref",description:'"ref"'},ln="exc",dn={type:"literal",value:"exc",description:'"exc"'},pn=function(t){return t.toLowerCase()},fn=function(t,e){var r={};return r[t.toLowerCase().replace("colour","color")]=e,r},hn={type:"other",description:"attribute name"},gn="label",bn={type:"literal",value:"label",description:'"label"'},mn="idurl",yn={type:"literal",value:"idurl",description:'"idurl"'},vn="id",xn={type:"literal",value:"id",description:'"id"'},wn="url",Cn={type:"literal",value:"url",description:'"url"'},_n="linecolor",kn={type:"literal",value:"linecolor",description:'"linecolor"'},An="linecolour",En={type:"literal",value:"linecolour",description:'"linecolour"'},Ln="textcolor",Sn={type:"literal",value:"textcolor",description:'"textcolor"'},In="textcolour",jn={type:"literal",value:"textcolour",description:'"textcolour"'},Tn="textbgcolor",Dn={type:"literal",value:"textbgcolor",description:'"textbgcolor"'},Nn="textbgcolour",Bn={type:"literal",value:"textbgcolour",description:'"textbgcolour"'},On="arclinecolor",Hn={type:"literal",value:"arclinecolor",description:'"arclinecolor"'},Rn="arclinecolour",Wn={type:"literal",value:"arclinecolour",description:'"arclinecolour"'
},Fn="arctextcolor",Mn={type:"literal",value:"arctextcolor",description:'"arctextcolor"'},Gn="arctextcolour",qn={type:"literal",value:"arctextcolour",description:'"arctextcolour"'},zn="arctextbgcolor",Un={type:"literal",value:"arctextbgcolor",description:'"arctextbgcolor"'},Xn="arctextbgcolour",Pn={type:"literal",value:"arctextbgcolour",description:'"arctextbgcolour"'},Vn="arcskip",$n={type:"literal",value:"arcskip",description:'"arcskip"'},Kn={type:"other",description:"double quoted string"},Zn='"',Jn={type:"literal",value:'"',description:'"\\""'},Qn=function(t){return t.join("")},Yn='\\"',ti={type:"literal",value:'\\"',description:'"\\\\\\""'},ei={type:"any",description:"any character"},ri=function(t){return t},ni={type:"other",description:"identifier"},ii=/^[A-Za-z_0-9]/,oi={type:"class",value:"[A-Za-z_0-9]",description:"[A-Za-z_0-9]"},ai=function(t){return t.join("")},ci={type:"other",description:"whitespace"},si=/^[ \t]/,ui={type:"class",value:"[ \\t]",description:"[ \\t]"},li={type:"other",description:"lineend"},di=/^[\r\n]/,pi={type:"class",value:"[\\r\\n]",description:"[\\r\\n]"},fi="/*",hi={type:"literal",value:"/*",description:'"/*"'},gi="*/",bi={type:"literal",value:"*/",description:'"*/"'},mi=function(t,e,r){return t+e.join("")+r},yi="//",vi={type:"literal",value:"//",description:'"//"'},xi="#",wi={type:"literal",value:"#",description:'"#"'},Ci=/^[^\r\n]/,_i={type:"class",value:"[^\\r\\n]",description:"[^\\r\\n]"},ki=function(t,e){return t+e.join("")},Ai={type:"other",description:"comment"},Ei={type:"other",description:"number"},Li=function(t){return t},Si=function(t){return t.toString()},Ii=function(t){return t.toString()},ji=/^[0-9]/,Ti={type:"class",value:"[0-9]",description:"[0-9]"},Di=function(t){return parseInt(t.join(""),10)},Ni=".",Bi={type:"literal",value:".",description:'"."'},Oi=function(t){return parseFloat(t.join(""))},Hi={type:"other",description:"boolean"},Ri=function(t){return t},Wi=function(t){return t.toString()},Fi="true",Mi={type:"literal",value:"true",description:'"true"'},Gi="false",qi={type:"literal",value:"false",description:'"false"'},zi="on",Ui={type:"literal",value:"on",description:'"on"'},Xi="off",Pi={type:"literal",value:"off",description:'"off"'},Vi="0",$i={type:"literal",value:"0",description:'"0"'},Ki="1",Zi={type:"literal",value:"1",description:'"1"'},Ji={type:"other",description:"size"},Qi=function(t){return t.toString()},Yi="auto",to={type:"literal",value:"auto",description:'"auto"'},eo=function(t){return t.toLowerCase()},ro=0,no=0,io=[{line:1,column:1,seenCR:!1}],oo=0,ao=[],co=0;if("startRule"in vt){if(!(vt.startRule in wt))throw new Error("Can't start parsing from rule \""+vt.startRule+'".');Ct=wt[vt.startRule]}if(yt=Ct(),yt!==xt&&ro===t.length)return yt;throw yt!==xt&&ro<t.length&&a({type:"end",description:"end of input"}),c(null,ao,oo<t.length?t.charAt(oo):null,oo<t.length?o(oo,oo+1):o(oo,oo))}return t(e,Error),{SyntaxError:e,parse:r}}),r("lib/mscgenjs-core/parse/msgennyparser",[],function(){"use strict";function t(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function e(t,r,n,i){this.message=t,this.expected=r,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function r(t){function r(e){var r,n,i=pi[e];if(i)return i;for(r=e-1;!pi[r];)r--;for(i=pi[r],i={line:i.line,column:i.column,seenCR:i.seenCR};e>r;)n=t.charAt(r),"\n"===n?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):"\r"===n||"\u2028"===n||"\u2029"===n?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1),r++;return pi[e]=i,i}function n(t,e){var n=r(t),i=r(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:i.line,column:i.column}}}function i(t){fi>li||(li>fi&&(fi=li,hi=[]),hi.push(t))}function o(t,r,n,i){function o(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function a(t,e){function r(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0100-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1000-\uFFFF]/g,function(t){return"\\u"+e(t)})}var n,i,o,a=new Array(t.length);for(o=0;o<t.length;o++)a[o]=t[o].description;return n=t.length>1?a.slice(0,-1).join(", ")+" or "+a[t.length-1]:a[0],i=e?'"'+r(e)+'"':"end of input","Expected "+n+" but "+i+" found."}return null!==r&&o(r),new e(null!==t?t:a(r,n),r,n,i)}function a(){var t,e,r,n;return t=li,e=U(),e!==ht?(r=c(),r!==ht?(n=U(),n!==ht?(di=t,e=mt(e,r),t=e):(li=t,t=ht)):(li=t,t=ht)):(li=t,t=ht),t}function c(){var t,e,r,n,i;return t=li,e=li,r=s(),r!==ht&&(di=e,r=yt(r)),e=r,e===ht&&(e=null),e!==ht?(r=li,n=l(),n!==ht&&(di=r,n=vt(n)),r=n,r===ht&&(r=null),r!==ht?(n=li,i=p(),i!==ht&&(di=n,i=xt(i)),n=i,n===ht&&(n=null),n!==ht?(e=[e,r,n],t=e):(li=t,t=ht)):(li=t,t=ht)):(li=t,t=ht),t}function s(){var e,r,n,o,a,c;for(e=li,r=li,n=[],o=li,a=u(),a!==ht?(44===t.charCodeAt(li)?(c=wt,li++):(c=ht,0===gi&&i(Ct)),c!==ht?(di=o,a=_t(a),o=a):(li=o,o=ht)):(li=o,o=ht);o!==ht;)n.push(o),o=li,a=u(),a!==ht?(44===t.charCodeAt(li)?(c=wt,li++):(c=ht,0===gi&&i(Ct)),c!==ht?(di=o,a=_t(a),o=a):(li=o,o=ht)):(li=o,o=ht);return n!==ht?(o=li,a=u(),a!==ht?(59===t.charCodeAt(li)?(c=kt,li++):(c=ht,0===gi&&i(At)),c!==ht?(di=o,a=_t(a),o=a):(li=o,o=ht)):(li=o,o=ht),o!==ht?(n=[n,o],r=n):(li=r,r=ht)):(li=r,r=ht),r!==ht&&(di=e,r=Et(r)),e=r}function u(){var e,r,n,o,a,c,s,u;return e=li,r=U(),r!==ht?(t.substr(li,6).toLowerCase()===Lt?(n=t.substr(li,6),li+=6):(n=ht,0===gi&&i(St)),n===ht&&(t.substr(li,11).toLowerCase()===It?(n=t.substr(li,11),li+=11):(n=ht,0===gi&&i(jt))),n!==ht?(o=U(),o!==ht?(61===t.charCodeAt(li)?(a=Tt,li++):(a=ht,0===gi&&i(Dt)),a!==ht?(c=U(),c!==ht?(s=X(),s!==ht?(u=U(),u!==ht?(di=e,r=Nt(n,s),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),e===ht&&(e=li,r=U(),r!==ht?(t.substr(li,5).toLowerCase()===Bt?(n=t.substr(li,5),li+=5):(n=ht,0===gi&&i(Ot)),n!==ht?(o=U(),o!==ht?(61===t.charCodeAt(li)?(a=Tt,li++):(a=ht,0===gi&&i(Dt)),a!==ht?(c=U(),c!==ht?(s=Y(),s!==ht?(u=U(),u!==ht?(di=e,r=Nt(n,s),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),e===ht&&(e=li,r=U(),r!==ht?(t.substr(li,12).toLowerCase()===Ht?(n=t.substr(li,12),li+=12):(n=ht,0===gi&&i(Rt)),n!==ht?(o=U(),o!==ht?(61===t.charCodeAt(li)?(a=Tt,li++):(a=ht,0===gi&&i(Dt)),a!==ht?(c=U(),c!==ht?(s=Z(),s!==ht?(u=U(),u!==ht?(di=e,r=Wt(n,s),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),e===ht&&(e=li,r=U(),r!==ht?(t.substr(li,9).toLowerCase()===Ft?(n=t.substr(li,9),li+=9):(n=ht,0===gi&&i(Mt)),n!==ht?(o=U(),o!==ht?(61===t.charCodeAt(li)?(a=Tt,li++):(a=ht,0===gi&&i(Dt)),a!==ht?(c=U(),c!==ht?(s=I(),s!==ht?(u=U(),u!==ht?(di=e,r=Nt(n,s),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)))),e}function l(){var e,r,n,o,a,c;for(e=li,r=li,n=[],o=li,a=d(),a!==ht?(44===t.charCodeAt(li)?(c=wt,li++):(c=ht,0===gi&&i(Ct)),c!==ht?(di=o,a=Gt(a),o=a):(li=o,o=ht)):(li=o,o=ht);o!==ht;)n.push(o),o=li,a=d(),a!==ht?(44===t.charCodeAt(li)?(c=wt,li++):(c=ht,0===gi&&i(Ct)),c!==ht?(di=o,a=Gt(a),o=a):(li=o,o=ht)):(li=o,o=ht);return n!==ht?(o=li,a=d(),a!==ht?(59===t.charCodeAt(li)?(c=kt,li++):(c=ht,0===gi&&i(At)),c!==ht?(di=o,a=Gt(a),o=a):(li=o,o=ht)):(li=o,o=ht),o!==ht?(n=[n,o],r=n):(li=r,r=ht)):(li=r,r=ht),r!==ht&&(di=e,r=qt(r)),e=r}function d(){var e,r,n,o,a,c,s,u,l;return gi++,e=li,r=U(),r!==ht?(n=N(),n!==ht?(o=U(),o!==ht?(a=li,58===t.charCodeAt(li)?(c=Ut,li++):(c=ht,0===gi&&i(Xt)),c!==ht?(s=U(),s!==ht?(u=S(),u!==ht?(l=U(),l!==ht?(di=a,c=Pt(n,u),a=c):(li=a,a=ht)):(li=a,a=ht)):(li=a,a=ht)):(li=a,a=ht),a===ht&&(a=null),a!==ht?(di=e,r=Vt(n,a),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),gi--,e===ht&&(r=ht,0===gi&&i(zt)),e}function p(){var e,r,n,o,a;if(e=[],r=li,n=f(),n!==ht?(o=U(),o!==ht?(59===t.charCodeAt(li)?(a=kt,li++):(a=ht,0===gi&&i(At)),a!==ht?(di=r,n=$t(n),r=n):(li=r,r=ht)):(li=r,r=ht)):(li=r,r=ht),r!==ht)for(;r!==ht;)e.push(r),r=li,n=f(),n!==ht?(o=U(),o!==ht?(59===t.charCodeAt(li)?(a=kt,li++):(a=ht,0===gi&&i(At)),a!==ht?(di=r,n=$t(n),r=n):(li=r,r=ht)):(li=r,r=ht)):(li=r,r=ht);else e=ht;return e}function f(){var e,r,n,o,a,c;for(e=li,r=li,n=[],o=li,a=h(),a!==ht?(44===t.charCodeAt(li)?(c=wt,li++):(c=ht,0===gi&&i(Ct)),c!==ht?(di=o,a=$t(a),o=a):(li=o,o=ht)):(li=o,o=ht);o!==ht;)n.push(o),o=li,a=h(),a!==ht?(44===t.charCodeAt(li)?(c=wt,li++):(c=ht,0===gi&&i(Ct)),c!==ht?(di=o,a=$t(a),o=a):(li=o,o=ht)):(li=o,o=ht);return n!==ht?(o=li,a=h(),a!==ht&&(di=o,a=Kt(a)),o=a,o!==ht?(n=[n,o],r=n):(li=r,r=ht)):(li=r,r=ht),r!==ht&&(di=e,r=Zt(r)),e=r}function h(){var t;return t=g(),t===ht&&(t=v()),t}function g(){var e,r,n,o,a,c,s;return e=li,r=li,n=b(),n!==ht&&(di=r,n=Jt(n)),r=n,r===ht&&(r=li,n=y(),n!==ht&&(di=r,n=Qt(n)),r=n,r===ht&&(r=li,n=m(),n!==ht&&(di=r,n=Yt(n)),r=n)),r!==ht?(n=li,58===t.charCodeAt(li)?(o=Ut,li++):(o=ht,0===gi&&i(Xt)),o!==ht?(a=U(),a!==ht?(c=S(),c!==ht?(s=U(),s!==ht?(di=n,o=te(r,c),n=o):(li=n,n=ht)):(li=n,n=ht)):(li=n,n=ht)):(li=n,n=ht),n===ht&&(n=null),n!==ht?(di=e,r=ee(r,n),e=r):(li=e,e=ht)):(li=e,e=ht),e}function b(){var t,e,r,n;return t=li,e=U(),e!==ht?(r=x(),r!==ht?(n=U(),n!==ht?(di=t,e=re(r),t=e):(li=t,t=ht)):(li=t,t=ht)):(li=t,t=ht),t}function m(){var t,e,r,n;return t=li,e=U(),e!==ht?(r=w(),r!==ht?(n=U(),n!==ht?(di=t,e=re(r),t=e):(li=t,t=ht)):(li=t,t=ht)):(li=t,t=ht),t}function y(){var e,r,n,o,a,c,s,u;return e=li,r=U(),r!==ht?(n=N(),n!==ht?(o=U(),o!==ht?(a=C(),a!==ht?(c=U(),c!==ht?(s=N(),s!==ht?(u=U(),u!==ht?(di=e,r=ne(n,a,s),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),e===ht&&(e=li,r=U(),r!==ht?(42===t.charCodeAt(li)?(n=ie,li++):(n=ht,0===gi&&i(oe)),n!==ht?(o=U(),o!==ht?(a=A(),a!==ht?(c=U(),c!==ht?(s=N(),s!==ht?(u=U(),u!==ht?(di=e,r=ae(a,s),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),e===ht&&(e=li,r=U(),r!==ht?(n=N(),n!==ht?(o=U(),o!==ht?(a=k(),a!==ht?(c=U(),c!==ht?(42===t.charCodeAt(li)?(s=ie,li++):(s=ht,0===gi&&i(oe)),s!==ht?(u=U(),u!==ht?(di=e,r=ce(n,a),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),e===ht&&(e=li,r=U(),r!==ht?(n=N(),n!==ht?(o=U(),o!==ht?(a=_(),a!==ht?(c=U(),c!==ht?(42===t.charCodeAt(li)?(s=ie,li++):(s=ht,0===gi&&i(oe)),s!==ht?(u=U(),u!==ht?(di=e,r=ce(n,a),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)))),e}function v(){var e,r,n,o,a,c,s,u,l,d,f,h,g,b,m;return e=li,r=U(),r!==ht?(n=N(),n!==ht?(o=U(),o!==ht?(a=L(),a!==ht?(c=U(),c!==ht?(s=N(),s!==ht?(u=U(),u!==ht?(l=li,58===t.charCodeAt(li)?(d=Ut,li++):(d=ht,0===gi&&i(Xt)),d!==ht?(f=U(),f!==ht?(h=S(),h!==ht?(g=U(),g!==ht?(di=l,d=se(n,a,s,h),l=d):(li=l,l=ht)):(li=l,l=ht)):(li=l,l=ht)):(li=l,l=ht),l===ht&&(l=null),l!==ht?(123===t.charCodeAt(li)?(d=ue,li++):(d=ht,0===gi&&i(le)),d!==ht?(f=U(),f!==ht?(h=p(),h===ht&&(h=null),h!==ht?(g=U(),g!==ht?(125===t.charCodeAt(li)?(b=de,li++):(b=ht,0===gi&&i(pe)),b!==ht?(m=U(),m!==ht?(di=e,r=fe(n,a,s,l,h),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),e}function x(){var e,r;return gi++,t.substr(li,3)===ge?(e=ge,li+=3):(e=ht,0===gi&&i(be)),e===ht&&(t.substr(li,3)===me?(e=me,li+=3):(e=ht,0===gi&&i(ye))),gi--,e===ht&&(r=ht,0===gi&&i(he)),e}function w(){var e,r;return gi++,t.substr(li,3)===xe?(e=xe,li+=3):(e=ht,0===gi&&i(we)),gi--,e===ht&&(r=ht,0===gi&&i(ve)),e}function C(){var t,e;return t=li,e=_(),e===ht&&(e=k(),e===ht&&(e=A(),e===ht&&(e=E()))),e!==ht&&(di=t,e=Ce(e)),t=e}function _(){var e,r;return gi++,t.substr(li,2)===ke?(e=ke,li+=2):(e=ht,0===gi&&i(Ae)),e===ht&&(t.substr(li,3)===Ee?(e=Ee,li+=3):(e=ht,0===gi&&i(Le)),e===ht&&(t.substr(li,2)===Se?(e=Se,li+=2):(e=ht,0===gi&&i(Ie)),e===ht&&(t.substr(li,5)===je?(e=je,li+=5):(e=ht,0===gi&&i(Te)),e===ht&&(t.substr(li,3)===De?(e=De,li+=3):(e=ht,0===gi&&i(Ne)),e===ht&&(t.substr(li,2)===Be?(e=Be,li+=2):(e=ht,0===gi&&i(Oe)),e===ht&&(t.substr(li,4)===He?(e=He,li+=4):(e=ht,0===gi&&i(Re)),e===ht&&(t.substr(li,2)===We?(e=We,li+=2):(e=ht,0===gi&&i(Fe)),e===ht&&(t.substr(li,3)===Me?(e=Me,li+=3):(e=ht,0===gi&&i(Ge)))))))))),gi--,e===ht&&(r=ht,0===gi&&i(_e)),e}function k(){var e,r;return gi++,t.substr(li,2)===ze?(e=ze,li+=2):(e=ht,0===gi&&i(Ue)),e===ht&&(t.substr(li,3)===Xe?(e=Xe,li+=3):(e=ht,0===gi&&i(Pe)),e===ht&&(t.substr(li,2)===Ve?(e=Ve,li+=2):(e=ht,0===gi&&i($e)),e===ht&&(t.substr(li,2)===Ke?(e=Ke,li+=2):(e=ht,0===gi&&i(Ze)),e===ht&&(t.substr(li,2)===Je?(e=Je,li+=2):(e=ht,0===gi&&i(Qe)),e===ht&&(t.substr(li,2).toLowerCase()===Ye?(e=t.substr(li,2),li+=2):(e=ht,0===gi&&i(tr))))))),gi--,e===ht&&(r=ht,0===gi&&i(qe)),e}function A(){var e,r;return gi++,t.substr(li,2)===rr?(e=rr,li+=2):(e=ht,0===gi&&i(nr)),e===ht&&(t.substr(li,3)===ir?(e=ir,li+=3):(e=ht,0===gi&&i(or)),e===ht&&(t.substr(li,2)===ar?(e=ar,li+=2):(e=ht,0===gi&&i(cr)),e===ht&&(t.substr(li,2)===sr?(e=sr,li+=2):(e=ht,0===gi&&i(ur)),e===ht&&(t.substr(li,2)===lr?(e=lr,li+=2):(e=ht,0===gi&&i(dr)),e===ht&&(t.substr(li,2).toLowerCase()===pr?(e=t.substr(li,2),li+=2):(e=ht,0===gi&&i(fr))))))),gi--,e===ht&&(r=ht,0===gi&&i(er)),e}function E(){var e,r;return gi++,t.substr(li,4).toLowerCase()===gr?(e=t.substr(li,4),li+=4):(e=ht,0===gi&&i(br)),e===ht&&(t.substr(li,4).toLowerCase()===mr?(e=t.substr(li,4),li+=4):(e=ht,0===gi&&i(yr)),e===ht&&(t.substr(li,4).toLowerCase()===vr?(e=t.substr(li,4),li+=4):(e=ht,0===gi&&i(xr)),e===ht&&(t.substr(li,3).toLowerCase()===wr?(e=t.substr(li,3),li+=3):(e=ht,0===gi&&i(Cr))))),gi--,e===ht&&(r=ht,0===gi&&i(hr)),e}function L(){var e,r;return gi++,e=li,t.substr(li,3).toLowerCase()===kr?(r=t.substr(li,3),li+=3):(r=ht,0===gi&&i(Ar)),r===ht&&(t.substr(li,4).toLowerCase()===Er?(r=t.substr(li,4),li+=4):(r=ht,0===gi&&i(Lr)),r===ht&&(t.substr(li,3).toLowerCase()===Sr?(r=t.substr(li,3),li+=3):(r=ht,0===gi&&i(Ir)),r===ht&&(t.substr(li,5).toLowerCase()===jr?(r=t.substr(li,5),li+=5):(r=ht,0===gi&&i(Tr)),r===ht&&(t.substr(li,3).toLowerCase()===Dr?(r=t.substr(li,3),li+=3):(r=ht,0===gi&&i(Nr)),r===ht&&(t.substr(li,3).toLowerCase()===Br?(r=t.substr(li,3),li+=3):(r=ht,0===gi&&i(Or)),r===ht&&(t.substr(li,6).toLowerCase()===Hr?(r=t.substr(li,6),li+=6):(r=ht,0===gi&&i(Rr)),r===ht&&(t.substr(li,3).toLowerCase()===Wr?(r=t.substr(li,3),li+=3):(r=ht,0===gi&&i(Fr)),r===ht&&(t.substr(li,8).toLowerCase()===Mr?(r=t.substr(li,8),li+=8):(r=ht,0===gi&&i(Gr)),r===ht&&(t.substr(li,6).toLowerCase()===qr?(r=t.substr(li,6),li+=6):(r=ht,0===gi&&i(zr)),r===ht&&(t.substr(li,8).toLowerCase()===Ur?(r=t.substr(li,8),li+=8):(r=ht,0===gi&&i(Xr)),r===ht&&(t.substr(li,6).toLowerCase()===Pr?(r=t.substr(li,6),li+=6):(r=ht,0===gi&&i(Vr)),r===ht&&(t.substr(li,4).toLowerCase()===$r?(r=t.substr(li,4),li+=4):(r=ht,0===gi&&i(Kr)),r===ht&&(t.substr(li,3).toLowerCase()===Zr?(r=t.substr(li,3),li+=3):(r=ht,0===gi&&i(Jr)),r===ht&&(t.substr(li,3).toLowerCase()===Qr?(r=t.substr(li,3),li+=3):(r=ht,0===gi&&i(Yr)))))))))))))))),r!==ht&&(di=e,r=tn(r)),e=r,gi--,e===ht&&(r=ht,0===gi&&i(_r)),e}function S(){var t;return t=I(),t===ht&&(t=T()),t}function I(){var e,r,n,o;return gi++,e=li,34===t.charCodeAt(li)?(r=rn,li++):(r=ht,0===gi&&i(nn)),r!==ht?(n=j(),n!==ht?(34===t.charCodeAt(li)?(o=rn,li++):(o=ht,0===gi&&i(nn)),o!==ht?(di=e,r=on(n),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),gi--,e===ht&&(r=ht,0===gi&&i(en)),e}function j(){var e,r,n,o;for(e=[],r=li,n=li,gi++,34===t.charCodeAt(li)?(o=rn,li++):(o=ht,0===gi&&i(nn)),gi--,o===ht?n=void 0:(li=n,n=ht),n!==ht?(t.substr(li,2)===an?(o=an,li+=2):(o=ht,0===gi&&i(cn)),o===ht&&(t.length>li?(o=t.charAt(li),li++):(o=ht,0===gi&&i(sn))),o!==ht?(di=r,n=un(o),r=n):(li=r,r=ht)):(li=r,r=ht);r!==ht;)e.push(r),r=li,n=li,gi++,34===t.charCodeAt(li)?(o=rn,li++):(o=ht,0===gi&&i(nn)),gi--,o===ht?n=void 0:(li=n,n=ht),n!==ht?(t.substr(li,2)===an?(o=an,li+=2):(o=ht,0===gi&&i(cn)),o===ht&&(t.length>li?(o=t.charAt(li),li++):(o=ht,0===gi&&i(sn))),o!==ht?(di=r,n=un(o),r=n):(li=r,r=ht)):(li=r,r=ht);return e}function T(){var t,e;return t=li,e=D(),e!==ht&&(di=t,e=ln(e)),t=e}function D(){var e,r,n,o;for(e=[],r=li,n=li,gi++,44===t.charCodeAt(li)?(o=wt,li++):(o=ht,0===gi&&i(Ct)),o===ht&&(59===t.charCodeAt(li)?(o=kt,li++):(o=ht,0===gi&&i(At)),o===ht&&(123===t.charCodeAt(li)?(o=ue,li++):(o=ht,0===gi&&i(le)))),gi--,o===ht?n=void 0:(li=n,n=ht),n!==ht?(t.length>li?(o=t.charAt(li),li++):(o=ht,0===gi&&i(sn)),o!==ht?(di=r,n=un(o),r=n):(li=r,r=ht)):(li=r,r=ht);r!==ht;)e.push(r),r=li,n=li,gi++,44===t.charCodeAt(li)?(o=wt,li++):(o=ht,0===gi&&i(Ct)),o===ht&&(59===t.charCodeAt(li)?(o=kt,li++):(o=ht,0===gi&&i(At)),o===ht&&(123===t.charCodeAt(li)?(o=ue,li++):(o=ht,0===gi&&i(le)))),gi--,o===ht?n=void 0:(li=n,n=ht),n!==ht?(t.length>li?(o=t.charAt(li),li++):(o=ht,0===gi&&i(sn)),o!==ht?(di=r,n=un(o),r=n):(li=r,r=ht)):(li=r,r=ht);return e}function N(){var e,r,n;if(gi++,e=li,r=[],pn.test(t.charAt(li))?(n=t.charAt(li),li++):(n=ht,0===gi&&i(fn)),n!==ht)for(;n!==ht;)r.push(n),pn.test(t.charAt(li))?(n=t.charAt(li),li++):(n=ht,0===gi&&i(fn));else r=ht;return r!==ht&&(di=e,r=hn(r)),e=r,e===ht&&(e=I()),gi--,e===ht&&(r=ht,0===gi&&i(dn)),e}function B(){var e,r;return gi++,e=li,bn.test(t.charAt(li))?(r=t.charAt(li),li++):(r=ht,0===gi&&i(mn)),r!==ht&&(di=e,r=un(r)),e=r,gi--,e===ht&&(r=ht,0===gi&&i(gn)),e}function O(){var e,r;return gi++,e=li,vn.test(t.charAt(li))?(r=t.charAt(li),li++):(r=ht,0===gi&&i(xn)),r!==ht&&(di=e,r=un(r)),e=r,gi--,e===ht&&(r=ht,0===gi&&i(yn)),e}function H(){var e;return t.substr(li,2)===wn?(e=wn,li+=2):(e=ht,0===gi&&i(Cn)),e}function R(){var e;return t.substr(li,2)===_n?(e=_n,li+=2):(e=ht,0===gi&&i(kn)),e}function W(){var e,r,n;return e=li,r=li,gi++,t.substr(li,2)===_n?(n=_n,li+=2):(n=ht,0===gi&&i(kn)),gi--,n===ht?r=void 0:(li=r,r=ht),r!==ht?(t.length>li?(n=t.charAt(li),li++):(n=ht,0===gi&&i(sn)),n!==ht?(di=e,r=un(n),e=r):(li=e,e=ht)):(li=e,e=ht),e}function F(){var t,e,r,n;if(t=li,e=H(),e!==ht){for(r=[],n=W();n!==ht;)r.push(n),n=W();r!==ht?(n=R(),n!==ht?(di=t,e=An(e,r,n),t=e):(li=t,t=ht)):(li=t,t=ht)}else li=t,t=ht;return t}function M(){var e;return t.substr(li,2)===En?(e=En,li+=2):(e=ht,0===gi&&i(Ln)),e===ht&&(35===t.charCodeAt(li)?(e=Sn,li++):(e=ht,0===gi&&i(In))),e}function G(){var e;return jn.test(t.charAt(li))?(e=t.charAt(li),li++):(e=ht,0===gi&&i(Tn)),e}function q(){var t,e,r,n;if(t=li,e=M(),e!==ht){for(r=[],n=G();n!==ht;)r.push(n),n=G();r!==ht?(di=t,e=Dn(e,r),t=e):(li=t,t=ht)}else li=t,t=ht;return t}function z(){var t,e;return gi++,t=q(),t===ht&&(t=F()),gi--,t===ht&&(e=ht,0===gi&&i(Nn)),t}function U(){var t,e;for(t=[],e=B(),e===ht&&(e=O(),e===ht&&(e=z()));e!==ht;)t.push(e),e=B(),e===ht&&(e=O(),e===ht&&(e=z()));return t}function X(){var t,e;return gi++,t=li,e=P(),e!==ht&&(di=t,e=On(e)),t=e,t===ht&&(t=li,e=V(),e!==ht&&(di=t,e=Hn(e)),t=e),gi--,t===ht&&(e=ht,0===gi&&i(Bn)),t}function P(){var e,r,n,o;return e=li,34===t.charCodeAt(li)?(r=rn,li++):(r=ht,0===gi&&i(nn)),r!==ht?(n=V(),n!==ht?(34===t.charCodeAt(li)?(o=rn,li++):(o=ht,0===gi&&i(nn)),o!==ht?(di=e,r=Rn(n),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),e}function V(){var t;return t=K(),t===ht&&(t=$()),t}function $(){var e,r,n;if(e=li,r=[],Wn.test(t.charAt(li))?(n=t.charAt(li),li++):(n=ht,0===gi&&i(Fn)),n!==ht)for(;n!==ht;)r.push(n),Wn.test(t.charAt(li))?(n=t.charAt(li),li++):(n=ht,0===gi&&i(Fn));else r=ht;return r!==ht&&(di=e,r=Mn(r)),e=r}function K(){var e,r,n,o,a;return e=li,r=li,n=$(),n!==ht?(46===t.charCodeAt(li)?(o=Gn,li++):(o=ht,0===gi&&i(qn)),o!==ht?(a=$(),a!==ht?(n=[n,o,a],r=n):(li=r,r=ht)):(li=r,r=ht)):(li=r,r=ht),r!==ht&&(di=e,r=zn(r)),e=r}function Z(){var t,e;return gi++,t=li,e=J(),e!==ht&&(di=t,e=Xn(e)),t=e,t===ht&&(t=li,e=Q(),e!==ht&&(di=t,e=Pn(e)),t=e),gi--,t===ht&&(e=ht,0===gi&&i(Un)),t}function J(){var e,r,n,o;return e=li,34===t.charCodeAt(li)?(r=rn,li++):(r=ht,0===gi&&i(nn)),r!==ht?(n=Q(),n!==ht?(34===t.charCodeAt(li)?(o=rn,li++):(o=ht,0===gi&&i(nn)),o!==ht?(di=e,r=On(n),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),e}function Q(){var e;return t.substr(li,4).toLowerCase()===Vn?(e=t.substr(li,4),li+=4):(e=ht,0===gi&&i($n)),e===ht&&(t.substr(li,5).toLowerCase()===Kn?(e=t.substr(li,5),li+=5):(e=ht,0===gi&&i(Zn)),e===ht&&(t.substr(li,2).toLowerCase()===Jn?(e=t.substr(li,2),li+=2):(e=ht,0===gi&&i(Qn)),e===ht&&(t.substr(li,3).toLowerCase()===Yn?(e=t.substr(li,3),li+=3):(e=ht,0===gi&&i(ti)),e===ht&&(48===t.charCodeAt(li)?(e=ei,li++):(e=ht,0===gi&&i(ri)),e===ht&&(49===t.charCodeAt(li)?(e=ni,li++):(e=ht,0===gi&&i(ii))))))),e}function Y(){var t,e;return gi++,t=tt(),t===ht&&(t=et()),gi--,t===ht&&(e=ht,0===gi&&i(oi)),t}function tt(){var e,r,n,o;return e=li,34===t.charCodeAt(li)?(r=rn,li++):(r=ht,0===gi&&i(nn)),r!==ht?(n=et(),n!==ht?(34===t.charCodeAt(li)?(o=rn,li++):(o=ht,0===gi&&i(nn)),o!==ht?(di=e,r=On(n),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),e}function et(){var e,r;return e=li,r=V(),r!==ht&&(di=e,r=ai(r)),e=r,e===ht&&(e=li,t.substr(li,4).toLowerCase()===ci?(r=t.substr(li,4),li+=4):(r=ht,0===gi&&i(si)),r!==ht&&(di=e,r=ui(r)),e=r),e}function rt(t,e){return t=t||{},e&&Object.getOwnPropertyNames(e).forEach(function(r){t[r]=e[r]}),t}function nt(t){var e={};return t[0].forEach(function(t){e=rt(e,t)}),rt(e,t[1])}function it(t){return["true","on","1"].indexOf(t.toLowerCase())>-1}function ot(t,e){var r={};return r[t.toLowerCase()]=e,r}function at(t,e,r){return void 0===e||"*"===e?!0:t.entities.some(function(t){return t.name===e})?!0:r[e]===!0}function ct(t){var e={};return e.name=t,e}function st(t,e,r){return t||(t={},t.entities=[]),r||(r={}),e&&e.arcs&&e.arcs.forEach(function(e){e.forEach(function(e){at(t,e.from,r)||(t.entities[t.entities.length]=ct(e.from)),e.arcs&&(r[e.to]=!0,rt(t,st(t,e,r)),delete r[e.to]),at(t,e.to,r)||(t.entities[t.entities.length]=ct(e.to))})}),t}function ut(t){return t&&t.options?!!t.options.watermark||!!t.options.width&&"auto"===t.options.width:!1}function lt(t){return t&&t.arcs?t.arcs.some(function(t){return t.some(function(t){return["alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"].indexOf(t.kind)>-1})}):!1}function dt(t,e){var r=ut(t),n=lt(e);return{extendedOptions:r,extendedArcTypes:n,extendedFeatures:r||n}}var pt,ft=arguments.length>1?arguments[1]:{},ht={},gt={program:a},bt=a,mt=function(t,e){e[1]=st(e[1],e[2]);var r=rt(e[0],rt(e[1],e[2]));return r=rt({meta:dt(e[0],e[2])},r),t.length>0&&(r=rt({precomment:t},r)),r},yt=function(t){return{options:t}},vt=function(t){return{entities:t}},xt=function(t){return{arcs:t}},wt=",",Ct={type:"literal",value:",",description:'","'},_t=function(t){return t},kt=";",At={type:"literal",value:";",description:'";"'},Et=function(t){return nt(t)},Lt="hscale",St={type:"literal",value:"hscale",description:'"hscale"'},It="arcgradient",jt={type:"literal",value:"arcgradient",description:'"arcgradient"'},Tt="=",Dt={type:"literal",value:"=",description:'"="'},Nt=function(t,e){return ot(t,e)},Bt="width",Ot={type:"literal",value:"width",description:'"width"'},Ht="wordwraparcs",Rt={type:"literal",value:"wordwraparcs",description:'"wordwraparcs"'},Wt=function(t,e){var r={};return r[t.toLowerCase()]=it(e),r},Ft="watermark",Mt={type:"literal",value:"watermark",description:'"watermark"'},Gt=function(t){return t},qt=function(t){return t[0].push(t[1]),t[0]},zt={type:"other",description:"entity"},Ut=":",Xt={type:"literal",value:":",description:'":"'},Pt=function(t,e){return e},Vt=function(t,e){var r={};return r.name=t,e&&(r.label=e),r},$t=function(t){return t},Kt=function(t){return[t]},Zt=function(t){return t[0].push(t[1][0]),t[0]},Jt=function(t){return t},Qt=function(t){return t},Yt=function(t){return t},te=function(t,e){return e},ee=function(t,e){return e&&(t.label=e),t},re=function(t){return{kind:t}},ne=function(t,e,r){return{kind:e,from:t,to:r}},ie="*",oe={type:"literal",value:"*",description:'"*"'},ae=function(t,e){return{kind:t,from:"*",to:e}},ce=function(t,e){return{kind:e,from:t,to:"*"}},se=function(t,e,r,n){return n},ue="{",le={type:"literal",value:"{",description:'"{"'},de="}",pe={type:"literal",value:"}",description:'"}"'},fe=function(t,e,r,n,i){var o={kind:e,from:t,to:r,arcs:i};return n&&(o.label=n),o},he={type:"other",description:"empty row"},ge="|||",be={type:"literal",value:"|||",description:'"|||"'},me="...",ye={type:"literal",value:"...",description:'"..."'},ve={type:"other",description:"---"},xe="---",we={type:"literal",value:"---",description:'"---"'},Ce=function(t){return t.toLowerCase()},_e={type:"other",description:"bi-directional arrow"},ke="--",Ae={type:"literal",value:"--",description:'"--"'},Ee="<->",Le={type:"literal",value:"<->",description:'"<->"'},Se="==",Ie={type:"literal",value:"==",description:'"=="'},je="<<=>>",Te={type:"literal",value:"<<=>>",description:'"<<=>>"'},De="<=>",Ne={type:"literal",value:"<=>",description:'"<=>"'},Be="..",Oe={type:"literal",value:"..",description:'".."'},He="<<>>",Re={type:"literal",value:"<<>>",description:'"<<>>"'},We="::",Fe={type:"literal",value:"::",description:'"::"'},Me="<:>",Ge={type:"literal",value:"<:>",description:'"<:>"'},qe={type:"other",description:"left to right arrow"},ze="->",Ue={type:"literal",value:"->",description:'"->"'},Xe="=>>",Pe={type:"literal",value:"=>>",description:'"=>>"'},Ve="=>",$e={type:"literal",value:"=>",description:'"=>"'},Ke=">>",Ze={type:"literal",value:">>",description:'">>"'},Je=":>",Qe={type:"literal",value:":>",description:'":>"'},Ye="-x",tr={type:"literal",value:"-x",description:'"-x"'},er={type:"other",description:"right to left arrow"},rr="<-",nr={type:"literal",value:"<-",description:'"<-"'},ir="<<=",or={type:"literal",value:"<<=",description:'"<<="'},ar="<=",cr={type:"literal",value:"<=",description:'"<="'},sr="<<",ur={type:"literal",value:"<<",description:'"<<"'},lr="<:",dr={type:"literal",value:"<:",description:'"<:"'},pr="x-",fr={type:"literal",value:"x-",description:'"x-"'},hr={type:"other",description:"box"},gr="note",br={type:"literal",value:"note",description:'"note"'},mr="abox",yr={type:"literal",value:"abox",description:'"abox"'},vr="rbox",xr={type:"literal",value:"rbox",description:'"rbox"'},wr="box",Cr={type:"literal",value:"box",description:'"box"'},_r={type:"other",description:"inline expression"},kr="alt",Ar={type:"literal",value:"alt",description:'"alt"'},Er="else",Lr={type:"literal",value:"else",description:'"else"'},Sr="opt",Ir={type:"literal",value:"opt",description:'"opt"'},jr="break",Tr={type:"literal",value:"break",description:'"break"'},Dr="par",Nr={type:"literal",value:"par",description:'"par"'},Br="seq",Or={type:"literal",value:"seq",description:'"seq"'},Hr="strict",Rr={type:"literal",value:"strict",description:'"strict"'},Wr="neg",Fr={type:"literal",value:"neg",description:'"neg"'},Mr="critical",Gr={type:"literal",value:"critical",description:'"critical"'},qr="ignore",zr={type:"literal",value:"ignore",description:'"ignore"'},Ur="consider",Xr={type:"literal",value:"consider",description:'"consider"'},Pr="assert",Vr={type:"literal",value:"assert",description:'"assert"'},$r="loop",Kr={type:"literal",value:"loop",description:'"loop"'},Zr="ref",Jr={type:"literal",value:"ref",description:'"ref"'},Qr="exc",Yr={type:"literal",value:"exc",description:'"exc"'},tn=function(t){return t.toLowerCase()},en={type:"other",description:"double quoted string"},rn='"',nn={type:"literal",value:'"',description:'"\\""'},on=function(t){return t.join("")},an='\\"',cn={type:"literal",value:'\\"',description:'"\\\\\\""'},sn={type:"any",description:"any character"},un=function(t){return t},ln=function(t){return t.join("").trim()},dn={type:"other",description:"identifier"},pn=/^[^;, "\t\n\r=\-><:{*]/,fn={type:"class",value:'[^;, \\"\\t\\n\\r=\\-><:\\{\\*]',description:'[^;, \\"\\t\\n\\r=\\-><:\\{\\*]'},hn=function(t){return t.join("")},gn={type:"other",description:"whitespace"},bn=/^[ \t]/,mn={type:"class",value:"[ \\t]",description:"[ \\t]"},yn={type:"other",description:"lineend"},vn=/^[\r\n]/,xn={type:"class",value:"[\\r\\n]",description:"[\\r\\n]"},wn="/*",Cn={type:"literal",value:"/*",description:'"/*"'},_n="*/",kn={type:"literal",value:"*/",description:'"*/"'},An=function(t,e,r){return t+e.join("")+r},En="//",Ln={type:"literal",value:"//",description:'"//"'},Sn="#",In={type:"literal",value:"#",description:'"#"'},jn=/^[^\r\n]/,Tn={type:"class",value:"[^\\r\\n]",description:"[^\\r\\n]"},Dn=function(t,e){return t+e.join("")},Nn={type:"other",description:"comment"},Bn={type:"other",description:"number"},On=function(t){return t},Hn=function(t){return t.toString()},Rn=function(t){return t.toString()},Wn=/^[0-9]/,Fn={type:"class",value:"[0-9]",description:"[0-9]"},Mn=function(t){return parseInt(t.join(""),10)},Gn=".",qn={type:"literal",value:".",description:'"."'},zn=function(t){return parseFloat(t.join(""))},Un={type:"other",description:"boolean"},Xn=function(t){return t},Pn=function(t){return t.toString()},Vn="true",$n={type:"literal",value:"true",description:'"true"'},Kn="false",Zn={type:"literal",value:"false",description:'"false"'},Jn="on",Qn={type:"literal",value:"on",description:'"on"'},Yn="off",ti={type:"literal",value:"off",description:'"off"'},ei="0",ri={type:"literal",value:"0",description:'"0"'},ni="1",ii={type:"literal",value:"1",description:'"1"'},oi={type:"other",description:"size"},ai=function(t){return t.toString()},ci="auto",si={type:"literal",value:"auto",description:'"auto"'},ui=function(t){return t.toLowerCase()},li=0,di=0,pi=[{line:1,column:1,seenCR:!1}],fi=0,hi=[],gi=0;if("startRule"in ft){if(!(ft.startRule in gt))throw new Error("Can't start parsing from rule \""+ft.startRule+'".');bt=gt[ft.startRule]}if(pt=bt(),pt!==ht&&li===t.length)return pt;throw pt!==ht&&li<t.length&&i({type:"end",description:"end of input"}),o(null,hi,fi<t.length?t.charAt(fi):null,fi<t.length?n(fi,fi+1):n(fi,fi))}return t(e,Error),{SyntaxError:e,parse:r}}),r("lib/mscgenjs-core/render/graphics/constants",[],function(){"use strict";return{SVGNS:"http://www.w3.org/2000/svg",XLINKNS:"http://www.w3.org/1999/xlink",LINE_WIDTH:2,FONT_SIZE:12}}),r("lib/mscgenjs-core/render/graphics/svglowlevelfactory",["./constants"],function(t){"use strict";function e(t,e,r){return r&&t.setAttribute(e,r),t}function r(t,r){return r&&Object.keys(r).forEach(function(n){e(t,n,r[n])}),t}function n(e,n){return r(i.createElementNS(t.SVGNS,e),n)}var i={};return{init:function(t){i=t},setAttribute:e,setAttributes:r,createElement:n}}),r("lib/mscgenjs-core/render/graphics/geometry",[],function(){"use strict";function t(t){return 360*t/(2*Math.PI)}function e(e){return 0-t(Math.atan(e.height/e.width))}function r(t){var e=-1;return t.xTo>t.xFrom&&(e=1),{dx:e,dy:e*(t.yTo-t.yFrom)/(t.xTo-t.xFrom)}}return{getDiagonalAngle:e,getDirection:r}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory",["./constants","./svglowlevelfactory","./geometry"],function(t,e,r){"use strict";function n(t,r,n,i){return o(e.createElement("path",{d:t,"class":r}),n,i)}function i(t,r){return e.createElement("polygon",{points:t,"class":r})}function o(t,r,n){var i="";return n&&(i+="fill:"+n+";"),r&&(i+="stroke:"+r+";"),e.setAttribute(t,"style",i)}function a(t,r){return e.createElement("line",{x1:t.xFrom.toString(),y1:t.yFrom.toString(),x2:t.xTo.toString(),y2:t.yTo.toString(),"class":r})}function c(e,r){var n=h.createElementNS(t.SVGNS,"a");return n.setAttributeNS(t.XLINKNS,"xlink:href",e),n.setAttributeNS(t.XLINKNS,"xlink:title",e),n.setAttributeNS(t.XLINKNS,"xlink:show","new"),n.appendChild(r),n}function s(e,r){var n=h.createElementNS(t.SVGNS,"tspan"),i=h.createTextNode(e);return n.appendChild(i),r?c(r,n):n}function u(t,r,n,i,o,a){var c=e.createElement("text",{x:r.x.toString(),y:r.y.toString(),"class":n});if(c.appendChild(s(t,i)),o){var u=s(" ["+o+"]",a);
u.setAttribute("style",g),c.appendChild(u)}return c}function l(e,r){var n=0;return r.indexOf("nodi")<0&&(n=e.xTo>e.xFrom?-7.5*t.LINE_WIDTH:7.5*t.LINE_WIDTH),n}function d(e,r){var n=0;return r.indexOf("nodi")<0&&r.indexOf("bidi")>-1&&(n=e.xTo>e.xFrom?7.5*t.LINE_WIDTH:-7.5*t.LINE_WIDTH),n}function p(e,i){var o=t.LINE_WIDTH,a=r.getDirection(e),c=l(e,i),s=d(e,i),u=(e.xTo-e.xFrom+c-s).toString(),p=(e.yTo-e.yFrom).toString(),f="l"+a.dx.toString()+","+a.dy.toString(),h=" l"+u+","+p;return n("M"+e.xFrom.toString()+","+(e.yFrom-7.5*t.LINE_WIDTH*a.dy).toString()+f+"M"+(e.xFrom+s).toString()+","+(e.yFrom-o).toString()+h+"M"+(e.xFrom+s).toString()+","+(e.yFrom+o).toString()+h+"M"+(e.xTo-a.dx).toString()+","+(e.yTo+7.5*t.LINE_WIDTH*a.dy).toString()+f,i)}function f(t,r,n,i){return e.createElement("marker",{orient:n,id:t,"class":r,viewBox:Boolean(i)?i:"0 0 10 10",refX:"9",refY:"3",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10"})}var h={},g="vertical-align:text-top;";return g+="font-size:0.7em;text-anchor:start;",{init:function(t){h=t,e.init(t)},createSVG:function(r,n){return e.createElement("svg",{version:"1.1",id:r,"class":n,xmlns:t.SVGNS,"xmlns:xlink":t.XLINKNS,width:"0",height:"0"})},createDesc:function(t){return e.createElement("desc",{id:t})},createDefs:function(){return e.createElement("defs")},createRect:function(t,r,n,i){return o(e.createElement("rect",{width:t.width,height:t.height,x:t.x,y:t.y,"class":r}),n,i)},createRBox:function(t,r,n,i){var a=6;return o(e.createElement("rect",{width:t.width,height:t.height,x:t.x,y:t.y,rx:a,ry:a,"class":r}),n,i)},createABox:function(t,e,r,i){var o=3;return n("M"+t.x+","+(t.y+t.height/2)+"l"+o+", -"+t.height/2+"l"+(t.width-2*o)+",0l"+o+","+t.height/2+"l-"+o+","+t.height/2+"l-"+(t.width-2*o)+",0 l-"+o+",-"+t.height/2,e,r,i)},createNote:function(e,r,i,o){var a=Math.max(9,Math.min(4.5*t.LINE_WIDTH,e.height/2)),c=a.toString(10);return n("M"+e.x+","+e.y+"l"+(e.width-a)+",0 l0,"+c+" l"+c+",0 m-"+c+",-"+c+" l"+c+","+c+" l0,"+(e.height-a)+" l-"+e.width+",0 l0,-"+(e.height+t.LINE_WIDTH/2)+" ",r,i,o)},createEdgeRemark:function(t,e,r,i,o){var a=o?o:7;return n("M"+t.x+","+t.y+" l"+t.width+",0  l0,"+(t.height-a)+" l-"+a.toString(10)+","+a.toString(10)+" l-"+(t.width-a)+",0 ",e,r,i)},createText:u,createDiagonalText:function(t,n,i){return e.setAttributes(u(t,{x:n.width/2,y:n.height/2},i),{transform:"rotate("+r.getDiagonalAngle(n).toString()+" "+(n.width/2).toString()+" "+(n.height/2).toString()+")"})},createLine:function(t,e,r){return Boolean(r)?p(t,e):a(t,e)},createUTurn:function(e,r,i,o,a){var c=a?e.x+7.5*t.LINE_WIDTH:e.x;return n("M"+e.x.toString()+", -"+e.y.toString()+" C"+(e.x+i).toString()+","+(e.y-7.5*t.LINE_WIDTH).toString()+" "+(e.x+i).toString()+","+(r+0).toString()+" "+c.toString()+","+r.toString(),o)},createGroup:function(t,r){return e.createElement("g",{id:t,"class":r})},createUse:function(r,n){var i=e.createElement("use",{x:r.x.toString(),y:r.y.toString()});return i.setAttributeNS(t.XLINKNS,"xlink:href","#"+n),i},createMarkerPath:function(t,r,i){var o=f(t,"arrow-marker","auto");return o.appendChild(e.setAttributes(n(r,"arrow-style"),{style:"stroke-dasharray:100,1;stroke:"+i||"black"})),o},createMarkerPolygon:function(t,r,n){var o=f(t,"arrow-marker","auto");return o.appendChild(e.setAttributes(i(r,"arrow-style"),{stroke:n||"black",fill:n||"black"})),o}}}),r("lib/mscgenjs-core/render/graphics/idmanager",[],function(){"use strict";var t="mscgen_js-svg-",e=t;return{setPrefix:function(r){e=t+r},get:function(t){return e+(t||"")}}}),function(){function t(t,e){return t.set(e[0],e[1]),t}function e(t,e){return t.add(e),t}function n(t,e,r){var n=r.length;switch(n){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function i(t,e){for(var r=-1,n=t?t.length:0;++r<n&&e(t[r],r,t)!==!1;);return t}function o(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function a(t,e,r,n){var i=-1,o=t?t.length:0;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r}function c(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function s(t){return t&&t.Object===Object?t:null}function u(t,e){return null==t?$t:t[e]}function l(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(r){}return e}function d(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}function p(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function f(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function h(){}function g(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function b(){this.__data__=yr?yr(null):{}}function m(t){return this.has(t)&&delete this.__data__[t]}function y(t){var e=this.__data__;if(yr){var r=e[t];return r===Qt?$t:r}return Qe.call(e,t)?e[t]:$t}function v(t){var e=this.__data__;return yr?e[t]!==$t:Qe.call(e,t)}function x(t,e){var r=this.__data__;return r[t]=yr&&e===$t?Qt:e,this}function w(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function C(){this.__data__=[]}function _(t){var e=this.__data__,r=G(e,t);if(0>r)return!1;var n=e.length-1;return r==n?e.pop():ur.call(e,r,1),!0}function k(t){var e=this.__data__,r=G(e,t);return 0>r?$t:e[r][1]}function A(t){return G(this.__data__,t)>-1}function E(t,e){var r=this.__data__,n=G(r,t);return 0>n?r.push([t,e]):r[n][1]=e,this}function L(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function S(){this.__data__={hash:new g,map:new(hr||w),string:new g}}function I(t){return dt(this,t)["delete"](t)}function j(t){return dt(this,t).get(t)}function T(t){return dt(this,t).has(t)}function D(t,e){return dt(this,t).set(t,e),this}function N(t){this.__data__=new w(t)}function B(){this.__data__=new w}function O(t){return this.__data__["delete"](t)}function H(t){return this.__data__.get(t)}function R(t){return this.__data__.has(t)}function W(t,e){var r=this.__data__;return r instanceof w&&r.__data__.length==Zt&&(r=this.__data__=new L(r.__data__)),r.set(t,e),this}function F(t,e,r,n){return t===$t||Tt(t,$e[r])&&!Qe.call(n,r)?e:t}function M(t,e,r){var n=t[e];Qe.call(t,e)&&Tt(n,r)&&(r!==$t||e in t)||(t[e]=r)}function G(t,e){for(var r=t.length;r--;)if(Tt(t[r][0],e))return r;return-1}function q(t,e){return t&&ct(e,Ut(e),t)}function z(t,e,r,n,o,a,c){var s;if(n&&(s=a?n(t,o,a,c):n(t)),s!==$t)return s;if(!Rt(t))return t;var u=Lr(t);if(u){if(s=bt(t),!e)return at(t,s)}else{var d=gt(t),p=d==se||d==ue;if(Sr(t))return Q(t,e);if(d==pe||d==ne||p&&!a){if(l(t))return a?t:{};if(s=mt(p?{}:t),!e)return st(t,q(s,t))}else{if(!We[d])return a?t:{};s=yt(t,d,z,e)}}c||(c=new N);var f=c.get(t);if(f)return f;if(c.set(t,s),!u)var h=r?lt(t):Ut(t);return i(h||t,function(i,o){h&&(o=i,i=t[o]),M(s,o,z(i,e,r,n,o,t,c))}),s}function U(t){return Rt(t)?cr(t):{}}function X(t,e,r,n,i){var a=-1,c=t.length;for(r||(r=xt),i||(i=[]);++a<c;){var s=t[a];e>0&&r(s)?e>1?X(s,e-1,r,n,i):o(i,s):n||(i[i.length]=s)}return i}function P(t,e,r){var n=e(t);return Lr(t)?n:o(n,r(t))}function V(t,e){return null!=t&&(Qe.call(t,e)||"object"==typeof t&&e in t&&null===ft(t))}function $(t){if(!Rt(t)||kt(t))return!1;var e=Ot(t)||l(t)?tr:Oe;return e.test(Et(t))}function K(t){return dr(Object(t))}function Z(t){t=null==t?t:Object(t);var e=[];for(var r in t)e.push(r);return e}function J(t){return function(e){return null==e?$t:e[t]}}function Q(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}function Y(t){var e=new t.constructor(t.byteLength);return new ir(e).set(new ir(t)),e}function tt(t,e){var r=e?Y(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function et(e,r,n){var i=r?n(p(e),!0):p(e);return a(i,t,new e.constructor)}function rt(t){var e=new t.constructor(t.source,De.exec(t));return e.lastIndex=t.lastIndex,e}function nt(t,r,n){var i=r?n(f(t),!0):f(t);return a(i,e,new t.constructor)}function it(t){return Ar?Object(Ar.call(t)):{}}function ot(t,e){var r=e?Y(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function at(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function ct(t,e,r,n){r||(r={});for(var i=-1,o=e.length;++i<o;){var a=e[i],c=n?n(r[a],t[a],a,r,t):t[a];M(r,a,c)}return r}function st(t,e){return ct(t,ht(t),e)}function ut(t){return It(function(e,r){var n=-1,i=r.length,o=i>1?r[i-1]:$t,a=i>2?r[2]:$t;for(o=t.length>3&&"function"==typeof o?(i--,o):$t,a&&Ct(r[0],r[1],a)&&(o=3>i?$t:o,i=1),e=Object(e);++n<i;){var c=r[n];c&&t(e,c,n,o)}return e})}function lt(t){return P(t,Ut,ht)}function dt(t,e){var r=t.__data__;return _t(e)?r["string"==typeof e?"string":"hash"]:r.map}function pt(t,e){var r=u(t,e);return $(r)?r:$t}function ft(t){return lr(Object(t))}function ht(t){return ar(Object(t))}function gt(t){return Ye.call(t)}function bt(t){var e=t.length,r=t.constructor(e);return e&&"string"==typeof t[0]&&Qe.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function mt(t){return"function"!=typeof t.constructor||At(t)?{}:U(ft(t))}function yt(t,e,r,n){var i=t.constructor;switch(e){case ve:return Y(t);case oe:case ae:return new i(+t);case xe:return tt(t,n);case we:case Ce:case _e:case ke:case Ae:case Ee:case Le:case Se:case Ie:return ot(t,n);case le:return et(t,n,r);case de:case be:return new i(t);case he:return rt(t);case ge:return nt(t,n,r);case me:return it(t)}}function vt(t){var e=t?t.length:$t;return Ht(e)&&(Lr(t)||Ft(t)||Dt(t))?c(e,String):null}function xt(t){return Lr(t)||Dt(t)}function wt(t,e){return e=null==e?te:e,!!e&&("number"==typeof t||Re.test(t))&&t>-1&&t%1==0&&e>t}function Ct(t,e,r){if(!Rt(r))return!1;var n=typeof e;return("number"==n?Nt(r)&&wt(e,r.length):"string"==n&&e in r)?Tt(r[e],t):!1}function _t(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function kt(t){return!!Ze&&Ze in t}function At(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||$e;return t===r}function Et(t){if(null!=t){try{return Je.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Lt(t){var e=t?t.length:0;return e?X(t,1):[]}function St(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(Jt);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a),a};return r.cache=new(St.Cache||L),r}function It(t,e){if("function"!=typeof t)throw new TypeError(Jt);return e=pr(e===$t?t.length-1:qt(e),0),function(){for(var r=arguments,i=-1,o=pr(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,r[0],a);case 2:return t.call(this,r[0],r[1],a)}var c=Array(e+1);for(i=-1;++i<e;)c[i]=r[i];return c[e]=a,n(t,this,c)}}function jt(t){return z(t,!0,!0)}function Tt(t,e){return t===e||t!==t&&e!==e}function Dt(t){return Bt(t)&&Qe.call(t,"callee")&&(!sr.call(t,"callee")||Ye.call(t)==ne)}function Nt(t){return null!=t&&Ht(Er(t))&&!Ot(t)}function Bt(t){return Wt(t)&&Nt(t)}function Ot(t){var e=Rt(t)?Ye.call(t):"";return e==se||e==ue}function Ht(t){return"number"==typeof t&&t>-1&&t%1==0&&te>=t}function Rt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Wt(t){return!!t&&"object"==typeof t}function Ft(t){return"string"==typeof t||!Lr(t)&&Wt(t)&&Ye.call(t)==be}function Mt(t){return"symbol"==typeof t||Wt(t)&&Ye.call(t)==me}function Gt(t){if(!t)return 0===t?t:0;if(t=zt(t),t===Yt||t===-Yt){var e=0>t?-1:1;return e*ee}return t===t?t:0}function qt(t){var e=Gt(t),r=e%1;return e===e?r?e-r:e:0}function zt(t){if("number"==typeof t)return t;if(Mt(t))return re;if(Rt(t)){var e=Ot(t.valueOf)?t.valueOf():t;t=Rt(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Te,"");var r=Be.test(t);return r||He.test(t)?Fe(t.slice(2),r?2:8):Ne.test(t)?re:+t}function Ut(t){var e=At(t);if(!e&&!Nt(t))return K(t);var r=vt(t),n=!!r,i=r||[],o=i.length;for(var a in t)!V(t,a)||n&&("length"==a||wt(a,o))||e&&"constructor"==a||i.push(a);return i}function Xt(t){for(var e=-1,r=At(t),n=Z(t),i=n.length,o=vt(t),a=!!o,c=o||[],s=c.length;++e<i;){var u=n[e];a&&("length"==u||wt(u,s))||"constructor"==u&&(r||!Qe.call(t,u))||c.push(u)}return c}function Pt(){return[]}function Vt(){return!1}var $t,Kt="4.13.1",Zt=200,Jt="Expected a function",Qt="__lodash_hash_undefined__",Yt=1/0,te=9007199254740991,ee=1.7976931348623157e308,re=NaN,ne="[object Arguments]",ie="[object Array]",oe="[object Boolean]",ae="[object Date]",ce="[object Error]",se="[object Function]",ue="[object GeneratorFunction]",le="[object Map]",de="[object Number]",pe="[object Object]",fe="[object Promise]",he="[object RegExp]",ge="[object Set]",be="[object String]",me="[object Symbol]",ye="[object WeakMap]",ve="[object ArrayBuffer]",xe="[object DataView]",we="[object Float32Array]",Ce="[object Float64Array]",_e="[object Int8Array]",ke="[object Int16Array]",Ae="[object Int32Array]",Ee="[object Uint8Array]",Le="[object Uint8ClampedArray]",Se="[object Uint16Array]",Ie="[object Uint32Array]",je=/[\\^$.*+?()[\]{}|]/g,Te=/^\s+|\s+$/g,De=/\w*$/,Ne=/^[-+]0x[0-9a-f]+$/i,Be=/^0b[01]+$/i,Oe=/^\[object .+?Constructor\]$/,He=/^0o[0-7]+$/i,Re=/^(?:0|[1-9]\d*)$/,We={};We[ne]=We[ie]=We[ve]=We[xe]=We[oe]=We[ae]=We[we]=We[Ce]=We[_e]=We[ke]=We[Ae]=We[le]=We[de]=We[pe]=We[he]=We[ge]=We[be]=We[me]=We[Ee]=We[Le]=We[Se]=We[Ie]=!0,We[ce]=We[se]=We[ye]=!1;var Fe=parseInt,Me="object"==typeof exports&&exports,Ge=Me&&"object"==typeof module&&module,qe=Ge&&Ge.exports===Me,ze=s("object"==typeof global&&global),Ue=s("object"==typeof self&&self),Xe=s("object"==typeof this&&this),Pe=ze||Ue||Xe||Function("return this")(),Ve=Array.prototype,$e=Object.prototype,Ke=Pe["__core-js_shared__"],Ze=function(){var t=/[^.]+$/.exec(Ke&&Ke.keys&&Ke.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Je=Function.prototype.toString,Qe=$e.hasOwnProperty,Ye=$e.toString,tr=RegExp("^"+Je.call(Qe).replace(je,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),er=qe?Pe.Buffer:$t,rr=Pe.Reflect,nr=Pe.Symbol,ir=Pe.Uint8Array,or=rr?rr.enumerate:$t,ar=Object.getOwnPropertySymbols,cr=Object.create,sr=$e.propertyIsEnumerable,ur=Ve.splice,lr=Object.getPrototypeOf,dr=Object.keys,pr=Math.max,fr=pt(Pe,"DataView"),hr=pt(Pe,"Map"),gr=pt(Pe,"Promise"),br=pt(Pe,"Set"),mr=pt(Pe,"WeakMap"),yr=pt(Object,"create"),vr=Et(fr),xr=Et(hr),wr=Et(gr),Cr=Et(br),_r=Et(mr),kr=nr?nr.prototype:$t,Ar=kr?kr.valueOf:$t;g.prototype.clear=b,g.prototype["delete"]=m,g.prototype.get=y,g.prototype.has=v,g.prototype.set=x,w.prototype.clear=C,w.prototype["delete"]=_,w.prototype.get=k,w.prototype.has=A,w.prototype.set=E,L.prototype.clear=S,L.prototype["delete"]=I,L.prototype.get=j,L.prototype.has=T,L.prototype.set=D,N.prototype.clear=B,N.prototype["delete"]=O,N.prototype.get=H,N.prototype.has=R,N.prototype.set=W,or&&!sr.call({valueOf:1},"valueOf")&&(Z=function(t){return d(or(t))});var Er=J("length");ar||(ht=Pt),(fr&&gt(new fr(new ArrayBuffer(1)))!=xe||hr&&gt(new hr)!=le||gr&&gt(gr.resolve())!=fe||br&&gt(new br)!=ge||mr&&gt(new mr)!=ye)&&(gt=function(t){var e=Ye.call(t),r=e==pe?t.constructor:$t,n=r?Et(r):$t;if(n)switch(n){case vr:return xe;case xr:return le;case wr:return fe;case Cr:return ge;case _r:return ye}return e}),St.Cache=L;var Lr=Array.isArray,Sr=er?function(t){return t instanceof er}:Vt,Ir=ut(function(t,e,r,n){ct(e,Xt(e),t,n)}),jr=It(function(t){return t.push($t,F),n(Ir,$t,t)});h.assignInWith=Ir,h.defaults=jr,h.flatten=Lt,h.keys=Ut,h.keysIn=Xt,h.memoize=St,h.rest=It,h.extendWith=Ir,h.cloneDeep=jt,h.eq=Tt,h.isArguments=Dt,h.isArray=Lr,h.isArrayLike=Nt,h.isArrayLikeObject=Bt,h.isBuffer=Sr,h.isFunction=Ot,h.isLength=Ht,h.isObject=Rt,h.isObjectLike=Wt,h.isString=Ft,h.isSymbol=Mt,h.stubArray=Pt,h.stubFalse=Vt,h.toFinite=Gt,h.toInteger=qt,h.toNumber=zt,h.VERSION=Kt,(Ue||{})._=h,"function"==typeof r&&"object"==typeof r.amd&&r.amd?r("lib/mscgenjs-core/lib/lodash/lodash.custom",[],function(){return h}):Ge?((Ge.exports=h)._=h,Me._=h):Pe._=h}.call(this),r("lib/mscgenjs-core/render/graphics/svgutensils",["./constants","./idmanager","./svgelementfactory","./svglowlevelfactory","../../lib/lodash/lodash.custom"],function(t,e,r,n,i){"use strict";function o(t){var n=r.createSVG(t,e.get());return f.body.appendChild(n),n}function a(t){var e=f.getElementById(h);e=e?e:o(h),e.appendChild(t);var r=t.getBBox();return e.removeChild(t),r}function c(t){var e=1e5;return Math.abs(t.height)>e||Math.abs(t.width)>e?{height:0,width:0,x:0,y:0}:t}function s(t){return"function"==typeof t.getBBox?c(a(t)):{height:15,width:15,x:2,y:2}}function u(e){var r=f.createElementNS(t.SVGNS,"tspan");return r.appendChild(f.createTextNode(e)),r}function l(t){var e=n.createElement("text",{x:"0",y:"0"});return e.appendChild(u(t)),e}function d(){return s(l("ÁjyÎ9ƒ@💩")).height}function p(t){e.setPrefix(t);var r=f.getElementById(e.get());if(r){var n=f.getElementById(t);n?n.removeChild(r):f.body.removeChild(r)}}var f={},h=e.get("bboxer");return{init:function(t){f=t},removeRenderedSVGFromElement:p,getBBox:s,calculateTextHeight:i.memoize(d),webkitNamespaceBugWorkaround:function(t){return t.replace(/ xlink=/g," xmlns:xlink=","g").replace(/ href=/g," xlink:href=","g")}}}),r("lib/mscgenjs-core/render/graphics/renderutensils",[],function(){"use strict";return{scaleCanvasToWidth:function(t,e){e.scale=t/e.width,e.width*=e.scale,e.height*=e.scale,e.horizontaltransform*=e.scale,e.verticaltransform*=e.scale,e.x=0-e.horizontaltransform,e.y=0-e.verticaltransform},determineDepthCorrection:function(t,e){return t?2*(2*(t+1)*e):0},determineArcXTo:function(t,e,r){return"-x"===t?e+.75*(r-e):r}}}),r("lib/mscgenjs-core/render/graphics/csstemplates",[],function(){"use strict";return{baseTemplate:"svg.<%=id%>{font-family:Helvetica,sans-serif;font-size:<%=fontSize%>px;font-weight:normal;font-style:normal;text-decoration:none;background-color:white;stroke:black;stroke-width:<%=lineWidth%>;color:black;}.<%=id%> rect{fill:none;stroke:black;}.<%=id%> rect.entity{fill:white;}.<%=id%> rect.label-text-background{fill:white;stroke:white;stroke-width:0;}.<%=id%> rect.bglayer{fill:white;stroke:white;stroke-width:0;}.<%=id%> line{stroke:black;}.<%=id%> line.return, .<%=id%> path.return{stroke-dasharray:5,2;}.<%=id%> line.comment{stroke-dasharray:5,2;}.<%=id%> line.inline_expression_divider{stroke-dasharray:10,5;}.<%=id%> text{color:inherit;stroke:none;text-anchor:middle;}.<%=id%> text.entity-text{text-decoration:underline;}.<%=id%> text.anchor-start{text-anchor:start;}.<%=id%> path{stroke:black;color:black;fill:none;}.<%=id%> .arrow-marker{overflow:visible;}.<%=id%> .arrow-style{stroke-width:1;}.<%=id%> .arcrowomit{stroke-dasharray:2,2;}.<%=id%> rect.box, .<%=id%> path.box{fill:white;}.<%=id%> .inherit{stroke:inherit;color:inherit;}.<%=id%> .inherit-fill{fill:inherit;}.<%=id%> .watermark{stroke:black;color:black;fill:black;font-size:48pt;font-weight:bold;opacity:0.14;}",additionalTemplates:[{name:"classic",css:".<%=id%> text.entity-text{text-decoration:none}.<%=id%> rect.entity{stroke:none;}.<%=id%> line,.<%=id%> rect,.<%=id%> path{stroke-width:1px}.<%=id%> .arrow-style{stroke-width:2;}.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{stroke-width: 1px}"},{name:"cygne",css:".<%=id%> line{stroke:#00A1DE}.<%=id%> text{fill:#005B82}.<%=id%> rect.entity,.<%=id%> rect.box,.<%=id%> path.box{fill:#00A1DE;stroke:#00A1DE}.<%=id%> text.box-text{fill:white}.<%=id%> text.entity-text{font-weight:bold;fill:white;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#E77B2F;stroke:white}.<%=id%> line.comment,.<%=id%> rect.inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> path.inline_expression_label{fill:white}"},{name:"grayscaled",css:"svg.<%=id%>{filter:grayscale(1);-webkit-filter:grayscale(1);}"},{name:"inverted",css:"svg.<%=id%>{filter:invert(1);-webkit-filter:invert(1);}"},{name:"lazy",css:".<%=id%> text.entity-text{font-weight:bold;text-decoration:none;}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#FFFFCC}.<%=id%> rect.label-text-background{opacity:0.9}.<%=id%> line.comment,.<%=id%> rect.inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{stroke:grey}"},{name:"pegasse",css:".<%=id%> line{stroke:rgba(0, 43, 84, 1)}.<%=id%> text{fill:rgba(0, 43, 84, 1)}.<%=id%> rect.entity,.<%=id%> rect.box,.<%=id%> path.box{fill:rgba(0, 43, 84, 1);stroke:rgba(0, 43, 84, 1)}.<%=id%> text.box-text{fill:white}.<%=id%> text.entity-text{font-weight:bold;fill:white;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:rgba(255, 50, 0, 1);stroke:white}.<%=id%> line.comment,.<%=id%> rect.inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> path.inline_expression_label{fill:white}"}]}}),r("lib/mscgenjs-core/render/graphics/renderskeleton",["./svgelementfactory","./constants","./csstemplates"],function(t,e,r){"use strict";function n(e,r){return r.forEach(function(r){"method"===r.type?e.appendChild(t.createMarkerPolygon(r.name,r.path,r.color)):e.appendChild(t.createMarkerPath(r.name,r.path,r.color))}),e}function i(t,e){var r=p.createElement("style");return r.setAttribute("type","text/css"),r.appendChild(p.createTextNode(d(t,e))),r}function o(e,r,o){var a=t.createDefs();return a.appendChild(i(o,e)),a=n(a,r),a.appendChild(t.createGroup(e+"__defs")),a}function a(e){var r=t.createGroup(e+"__body");return r.appendChild(t.createGroup(e+"__background")),r.appendChild(t.createGroup(e+"__arcspanlayer")),r.appendChild(t.createGroup(e+"__lifelinelayer")),r.appendChild(t.createGroup(e+"__sequencelayer")),r.appendChild(t.createGroup(e+"__notelayer")),r.appendChild(t.createGroup(e+"__watermark")),r}function c(e){return t.init(e.document),e.document}function s(e,r,n,i,s){p=c(e);var l=p.getElementById(r);null===l&&(l=p.body);var d=t.createSVG(n,n);return d.appendChild(u(e,n,s.source)),d.appendChild(o(n,i,s)),d.appendChild(a(n)),l.appendChild(d),p}function u(e,r,n){var i=t.createDesc(r+"__msc_source");return Boolean(n)&&i.appendChild(e.document.createTextNode("\n\n# Generated by mscgen_js - https://sverweij.github.io/mscgen_js\n"+n)),i}function l(t){var e="",n=[];return Boolean(t)?(Boolean(t.additionalTemplate)&&(n=r.additionalTemplates.filter(function(e){return e.name===t.additionalTemplate}),n.length>0&&(e=n[0].css)),Boolean(t.styleAdditions)&&(e+=t.styleAdditions),e):""}function d(t,n){return(r.baseTemplate+l(t)).replace(/<%=fontSize%>/g,e.FONT_SIZE).replace(/<%=lineWidth%>/g,e.LINE_WIDTH).replace(/<%=id%>/g,n)}var p={};return{bootstrap:s,init:c}}),r("lib/mscgenjs-core/render/text/asttransform",[],function(){"use strict";function t(t,e){t&&e&&t.forEach(function(t){e.forEach(function(e){e(t)})})}function e(t,e,r,n){n&&n.forEach(function(n){n(r,t,e)})}function r(t,r,i){r.forEach(function(o){e(t,r,o,i),o.arcs&&n(t,o.arcs,i)})}function n(t,e,n){t&&e&&n&&e.forEach(function(e){r(t,e,n)})}return{transform:function(e,r,i){return t(e.entities,r),n(e.entities,e.arcs,i),e}}}),r("lib/mscgenjs-core/render/text/arcmappings",[],function(){"use strict";var t={"->":"rvee","<->":"rvee","=>":"normal","<=>":"normal","-x":"oinvonormal"},e={box:"box",abox:"hexagon",rbox:"box",note:"note"},r={">>":"dashed","<<>>":"dashed","..":"dashed",":>":"bold","<:>":"bold","::":"bold",rbox:"rounded"},n={"|||":"emptyarc","...":"emptyarc","---":"emptyarc","->":"directional","=>":"directional","=>>":"directional",">>":"directional",":>":"directional","-x":"directional","<-":"directional","<=":"directional","<<=":"directional","<<":"directional","<:":"directional","x-":"directional",note:"box",box:"box",abox:"box",rbox:"box","<->":"bidirectional","<=>":"bidirectional","<<=>>":"bidirectional","<<>>":"bidirectional","<:>":"bidirectional","--":"nondirectional","==":"nondirectional","..":"nondirectional","::":"nondirectional",alt:"inline_expression","else":"inline_expression",opt:"inline_expression","break":"inline_expression",par:"inline_expression",seq:"inline_expression",strict:"inline_expression",neg:"inline_expression",critical:"inline_expression",ignore:"inline_expression",consider:"inline_expression",assert:"inline_expression",loop:"inline_expression",ref:"inline_expression",exc:"inline_expression"},i={"<-":"->","<=":"=>","<<=":"=>>","<<":">>","<:":":>","x-":"-x"},o={"|||":"empty-row","...":"omitted-row","---":"comment-row","->":"signal","=>":"method","=>>":"callback",">>":"return",":>":"emphasised","-x":"lost","<-":"signal","<=":"method","<<=":"callback","<<":"return","<:":"emphasised","x-":"lost","<->":"signal","<=>":"method","<<=>>":"callback","<<>>":"return","<:>":"emphasised","--":"signal","==":"method","..":"return","::":"emphasised"},a={"|||":"empty","...":"empty","---":"empty","->":"directional","=>":"directional","=>>":"directional",">>":"directional",":>":"directional","-x":"directional","<-":"directional","<=":"directional","<<=":"directional","<<":"directional","<:":"directional","x-":"directional",note:"box",box:"box",abox:"box",rbox:"box","<->":"bidirectional","<=>":"bidirectional","<<=>>":"bidirectional","<<>>":"bidirectional","<:>":"bidirectional","--":"nondirectional","==":"nondirectional","..":"nondirectional","::":"nondirectional",alt:"inline_expression","else":"inline_expression",opt:"inline_expression","break":"inline_expression",par:"inline_expression",seq:"inline_expression",strict:"inline_expression",neg:"inline_expression",critical:"inline_expression",ignore:"inline_expression",consider:"inline_expression",assert:"inline_expression",loop:"inline_expression",ref:"inline_expression",exc:"inline_expression"};return{getArrow:function(e){return t[e]},getShape:function(t){return e[t]},getStyle:function(t){return r[t]},getAggregate:function(t){return n[t]},getClass:function(t){return o[t]||t},getAggregateClass:function(t){return a[t]||t},getNormalizedKind:function(t){return i[t]||t}}}),r("lib/mscgenjs-core/render/text/textutensils",[],function(){"use strict";return{wrap:function(t,e){for(var r=0,n=[],i=0,o=0,a=0,c=0,s=t.replace(/[\t\n]+/g," ").replace(/\\n/g,"\n");c<=s.length;)c>=s.length?n.push(s.substring(i,c)):"\n"===s[c]?(r=0,a=c,n.push(s.substring(i,a)),i=a+1):r++>=e&&(a=s.substring(0,c).lastIndexOf(" "),-1===a||i>a?(r=1,a=c,o=c):(r=0,o=a+1),n.push(s.substring(i,a)),i=o),c++;return n},unescapeString:function(t){return t.replace(/\\"/g,'"')},escapeString:function(t){return t.replace(/\\"/g,'"').replace(/"/g,'\\"')}}}),r("lib/mscgenjs-core/render/text/flatten",["./asttransform","./arcmappings","../../lib/lodash/lodash.custom","./textutensils"],function(t,e,r,n){"use strict";function i(t){"undefined"==typeof t.label&&(t.label=t.name)}function o(t){Boolean(t.label)&&(t.label=n.unescapeString(t.label)),Boolean(t.id)&&(t.id=n.unescapeString(t.id))}function a(t){t.label=Boolean(t.label)?t.label:""}function c(t){if(t.kind&&e.getNormalizedKind(t.kind)!==t.kind){t.kind=e.getNormalizedKind(t.kind);var r=t.from;t.from=t.to,t.to=r}return t}function s(t,e){!t.linecolor&&e.arclinecolor&&(t.linecolor=e.arclinecolor),!t.textcolor&&e.arctextcolor&&(t.textcolor=e.arctextcolor),!t.textbgcolor&&e.arctextbgcolor&&(t.textbgcolor=e.arctextbgcolor)}function u(t,e){if(t&&t.from){var r=e.filter(function(e){return e.name===t.from});r.length>0&&s(t,r[0])}}function l(t){return t.arcs.reduce(function(t,e){return t+(Boolean(e[0].arcs)?l(e[0])+1:0)},t.arcs.length)}function d(t,n,i,o){var a=[],c=[],u=[];return t.forEach(function(t){if("inline_expression"===e.getAggregate(t.kind)){if(t.depth=n,Boolean(t.arcs)){var a=r.cloneDeep(t);a.numberofrows=l(a),delete a.arcs,c.push(a),t.arcs.forEach(function(t){u=u.concat(d(t,n+1,a.from,a.to)),t.forEach(function(t){s(t,a)})}),n>g&&(g=n)}else c.push(t);u.push([{kind:"|||",from:t.from,to:t.to}])}else i&&o&&"emptyarc"===e.getAggregate(t.kind)&&(t.from=i,t.to=o,t.depth=n),c.push(t)}),a.push(c),a.concat(u)}function p(t){var e={};return g=0,Boolean(t.options)&&(e.options=r.cloneDeep(t.options)),Boolean(t.entities)&&(e.entities=r.cloneDeep(t.entities)),e.arcs=[],t&&t.arcs&&t.arcs.forEach(function(t){d(t,0).forEach(function(t){e.arcs.push(t)})}),e.depth=g+1,e}function f(t,e){return t.filter(function(t){return e.from!==t.name}).map(function(t){return e.to=t.name,r.cloneDeep(e)})}function h(t){if(t.entities&&t.arcs){var e=[],n={};t.arcs.forEach(function(i,o){i.filter(function(t){return"*"===t.to}).forEach(function(a,c){n=r.cloneDeep(a),delete t.arcs[o][c],e=f(t.entities,n),i[c]=e.shift(),t.arcs[o]=i.concat(e)})})}return t}var g=0;return{swapRTLArc:c,unwind:p,explodeBroadcasts:h,flatten:function(e){return t.transform(p(e),[i,o],[c,u,o,a])},dotFlatten:function(e){return h(t.transform(e,[i],[c,u]))}}}),r("lib/mscgenjs-core/render/graphics/rowmemory",[],function(){"use strict";function t(t){return e[t]?e[t]:{y:r+1.5*n+t*n,height:n}}var e=[],r=0,n=0;return{clear:function(t,i){e=[],r=t,n=i},get:t,getLast:function(){return t(e.length-1)},set:function(r,n){var i=t(r-1);e[r]={y:i.y+(i.height+n)/2,height:n}}}}),r("lib/mscgenjs-core/render/graphics/markermanager",["../../lib/lodash/lodash.custom","../text/arcmappings"],function(t,e){"use strict";function r(t,e,r){return e&&r&&["<->","->"].indexOf(t>-1)?r>e?"signal":"signal-u":""}function n(t,e,r){return"<->"===t&&r>=e?"signal-l":"signal-lu"}function i(t,e,i,o,a){var c=[];return u[e]&&u[e].attributes&&(c=u[e].attributes.map(function(c){return{name:c.name,value:c.value.replace(/\{\{signal-marker-end\}\}/g,r(e,o,a)).replace(/\{\{signal-marker-start\}\}/g,n(e,o,a)).replace(/\{\{id\}\}/g,t).replace(/\{\{color\}\}/g,i||"black")}})),c}function o(t,r){return u[e.getNormalizedKind(t)].marker.name+(Boolean(r)?" "+r:" black")}function a(t,r){function n(e){a(t,e)}return Array.isArray(r)&&r.forEach(n),r.arcs&&r.arcs.forEach(n),r.kind&&u[e.getNormalizedKind(r.kind)]&&u[e.getNormalizedKind(r.kind)].marker&&t.indexOf(o(r.kind,r.linecolor))<0&&t.push(o(r.kind,r.linecolor)),t}function c(t){return{kind:t.split(" ")[0],color:t.split(" ")[1]}}function s(t){return t.arcs.reduce(a,[]).sort().map(c)}var u={"->":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}{{signal-marker-end}}-{{color}})"}],marker:{name:"signal"}},"<->":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}{{signal-marker-end}}-{{color}})"},{name:"marker-start",value:"url(#{{id}}{{signal-marker-start}}-{{color}})"}],marker:{name:"signal"}},"=>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"}],marker:{name:"callback",end:""}},"<<=>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"},{name:"marker-start",value:"url(#{{id}}callback-l-{{color}})"}],marker:{name:"callback",end:"",start:"-l"}},">>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"}],marker:{name:"callback",end:""}},"<<>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"},{name:"marker-start",value:"url(#{{id}}callback-l-{{color}})"}],marker:{name:"callback",end:"",start:"-l"}},"..":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"--":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"==":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"::":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"=>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"}],marker:{name:"method",end:""}},"<=>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"},{name:"marker-start",value:"url(#{{id}}method-l-{{color}})"}],marker:{name:"method",end:"",start:"-l"}},":>":{attributes:[{name:"style",value:"stroke:{{color}};"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"}],marker:{name:"method",end:""}},"<:>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"},{name:"marker-start",value:"url(#{{id}}method-l-{{color}})"
}],marker:{name:"method",end:"",start:"-l"}},"-x":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}lost-{{color}})"}],marker:{name:"lost",end:""}}},l={signal:{variants:[{name:"",path:"M9,3 l-8, 2"},{name:"-u",path:"M9,3 l-8,-2"},{name:"-l",path:"M9,3 l 8, 2"},{name:"-lu",path:"M9,3 l 8,-2"}]},method:{variants:[{name:"",path:"1,1  9,3  1,5"},{name:"-l",path:"17,1 9,3 17,5"}]},callback:{variants:[{name:"",path:"M 1,1 l 8,2 l-8,2"},{name:"-l",path:"M17,1 l-8,2 l 8,2"}]},lost:{variants:[{name:"",path:"M7,0 l5,6 M7,6 l5,-6"}]}};return{getAttributes:i,getMarkerDefs:function(e,r){return t.flatten(s(r).map(function(t){return l[t.kind].variants.map(function(r){return{name:e+t.kind+r.name+"-"+t.color,path:r.path,color:t.color,type:t.kind}})}))}}}),r("lib/mscgenjs-core/render/graphics/renderlabels",["./svgelementfactory","./svgutensils","./constants","../text/textutensils","../text/arcmappings"],function(t,e,r,n,i){"use strict";function o(t,e){e&&t.setAttribute("style","fill:"+e+";")}function a(t,e,r){o(t,e&&!r?"blue":r)}function c(r,n){var i=t.createRect(e.getBBox(r),"label-text-background");return n&&i.setAttribute("style","fill:"+n+"; stroke:"+n+";"),i}function s(e,r,n,i,o,a){var c={};return c=0===e?t.createText(r,{x:n,y:i},o,a.url,a.id,a.idurl):t.createText(r,{x:n,y:i},o,a.url)}function u(t,e,r){var n=e||t,o=i.getClass(n),a=i.getAggregateClass(n);return o===a?o+r:a+r+o+r}function l(t,n,i,c,l,d){var p=i+(l+.25)*e.calculateTextHeight(),f="";f=u(c.kind,d&&d.kind,"-text "),d&&(d.alignLeft&&(f+="anchor-start "),d.alignAround&&(p=i+(l+.25)*(e.calculateTextHeight()+r.LINE_WIDTH)));var h=s(l,t,n,p,f,c);return o(h,c.textcolor),a(h,c.url,c.textcolor),h}function d(n,i,o,a){var s=t.createGroup(a);if(n.label){var u=i.x+i.width/2,d=f(n.label,n.kind,i.width,r.FONT_SIZE,o?o.wordWrapArcs:!1),p={};o&&o.alignAbove&&d.forEach(function(){d.push("")});var h=i.y-(d.length-1)/2*(e.calculateTextHeight()+1);o&&o.alignAround&&(1===d.length&&d.push(""),h=i.y-(d.length-1)/2*(e.calculateTextHeight()+r.LINE_WIDTH+1)),d.forEach(function(t,e){""!==t&&(p=l(t,u,h,n,e,o),o&&o.ownBackground&&s.appendChild(c(p,n.textbgcolor)),s.appendChild(p)),h++})}return s}function p(t,e){var r=Math.abs(t),n=12;return 160>=r?r/(e/n*8):320>=r?r/(e/n*6.4):480>=r?r/(e/n*5.9):r/(e/n*5.6)}function f(t,e,r,o,a){return"box"===i.getAggregate(e)||"undefined"==typeof e||a?n.wrap(t,p(r,o)):t.split("\\n")}return{createLabel:d,splitLabel:f}}),r("lib/mscgenjs-core/render/graphics/entities",["./renderlabels","./constants"],function(t,e){"use strict";function r(t){return c[t]}var n=160,i=100,o=34,a={interEntitySpacing:n,height:o,width:i},c={};return{init:function(t){a.interEntitySpacing=n,a.height=o,a.width=i,t&&(a.interEntitySpacing=t*n,a.width=t*i),c={}},getX:r,setX:function(t,e){c[t.name]=e+a.width/2},getOAndD:function(t,e){return{from:r(r(t)<r(e)?t:e),to:r(r(e)>r(t)?e:t)}},setHeight:function(t){a.height=t},getDims:function(){return a},getNoEntityLines:function(r){return t.splitLabel(r,"box",a.width,e.FONT_SIZE).length}}}),r("lib/mscgenjs-core/render/graphics/renderast",["./svgelementfactory","./svglowlevelfactory","./svgutensils","./renderutensils","./renderskeleton","../text/flatten","../text/arcmappings","./rowmemory","./idmanager","./markermanager","./entities","./renderlabels","./constants","../../lib/lodash/lodash.custom"],function(t,e,r,n,i,o,a,c,s,u,l,d,p,f){"use strict";function h(t,e,n,i){var a=Object.seal(o.flatten(t)),c=i||{};c=f.defaults(c,{source:null,styleAdditions:null,mirrorEntitiesOnBottom:!1}),g(a,e,n,c),b(a),m(a);var s=e.document.getElementById(n);return s?r.webkitNamespaceBugWorkaround(s.innerHTML):r.webkitNamespaceBugWorkaround(e.document.body.innerHTML)}function g(t,e,n,o){s.setPrefix(n),Z.document=i.bootstrap(e,n,s.get(),u.getMarkerDefs(s.get(),t),o),Z.mirrorEntitiesOnBottom=Boolean(o.mirrorEntitiesOnBottom),r.init(Z.document),Z.layer=y(Z.document),Z.maxDepth=t.depth,x(Z,t.options)}function b(t){I(t.entities),c.clear(l.getDims().height,Z.arcRowHeight),N(t.arcs,t.entities),Z.mirrorEntitiesOnBottom&&S()}function m(t){var e=w(t);C(e),k(t.options,e),A(e)}function y(t){return{defs:t.getElementById(s.get("__defs")),lifeline:t.getElementById(s.get("__lifelinelayer")),sequence:t.getElementById(s.get("__sequencelayer")),notes:t.getElementById(s.get("__notelayer")),inline:t.getElementById(s.get("__arcspanlayer")),watermark:t.getElementById(s.get("__watermark"))}}function v(t,e){t.arcRowHeight=$,t.arcGradient=K,t.wordWrapArcs=!1,e&&(e.arcgradient&&(t.arcRowHeight=parseInt(e.arcgradient,10)+$,t.arcGradient=parseInt(e.arcgradient,10)+K),t.wordWrapArcs=Boolean(e.wordwraparcs))}function x(t,e){l.init(e&&e.hscale),v(t,e)}function w(t){var e=n.determineDepthCorrection(t.depth,p.LINE_WIDTH),r=c.getLast(),i={width:t.entities.length*l.getDims().interEntitySpacing+e,height:Boolean(Z.mirrorEntitiesOnBottom)?2*l.getDims().height+r.y+r.height+2*V:r.y+r.height/2+2*V,horizontaltransform:(l.getDims().interEntitySpacing+e-l.getDims().width)/2,autoscale:!!t.options&&!!t.options.width&&"auto"===t.options.width,verticaltransform:V,scale:1};return i.x=0-i.horizontaltransform,i.y=0-i.verticaltransform,i}function C(e){Z.document.getElementById(s.get("__background")).appendChild(t.createRect(e,"bglayer"))}function _(e,r){Z.layer.watermark.appendChild(t.createDiagonalText(e,r,"watermark"))}function k(t,e){t&&(t.watermark&&_(t.watermark,e),t.width&&"auto"!==t.width&&n.scaleCanvasToWidth(t.width,e))}function A(t){var r=Z.document.getElementById(s.get()),n=Z.document.getElementById(s.get("__body"));n.setAttribute("transform","translate("+t.horizontaltransform+","+t.verticaltransform+") scale("+t.scale+","+t.scale+")"),t.autoscale&&t.autoscale===!0?e.setAttributes(r,{width:"100%",height:"100%",viewBox:"0 0 "+t.width.toString()+" "+t.height.toString()}):e.setAttributes(r,{width:t.width.toString(),height:t.height.toString()})}function E(t){var e=t[0],n=2;return t.forEach(function(t){var r=l.getNoEntityLines(t.label);r>n&&(n=r,e=t)}),n>2?Math.max(l.getDims().height,r.getBBox(L(e)).height):l.getDims().height}function L(e,r){var n=t.createGroup(s.get(e.name)),i=l.getDims();return i.x=r?r:0,n.appendChild(t.createRect(i,"entity",e.linecolor,e.textbgcolor)),n.appendChild(d.createLabel(e,{x:i.x,y:i.height/2,width:i.width},{kind:"entity"})),n}function S(){var e=c.getLast().y+(c.getLast().height+Z.arcRowHeight)/2;Z.layer.lifeline.appendChild(t.createUse({x:0,y:e},s.get("arcrow"))),Z.layer.sequence.appendChild(t.createUse({x:0,y:e+Z.arcRowHeight/2},s.get("entities")))}function I(e){var r=0,n=t.createGroup(s.get("entities"));e&&(l.setHeight(E(e)+2*p.LINE_WIDTH),e.forEach(function(t){n.appendChild(L(t,r)),l.setX(t,r),r+=l.getDims().interEntitySpacing}),Z.layer.defs.appendChild(n),Z.layer.sequence.appendChild(t.createUse({x:0,y:0},s.get("entities")))),Z.arcEndX=r-l.getDims().interEntitySpacing+l.getDims().width}function j(t,e,r,n){var i=0,o=t.label,a=l.getX(t.from);t.label="",e.forEach(function(e,o){e.name!==t.from&&(i=l.getX(e.name),Z.layer.defs.appendChild(q(r+"bc"+o,t,a,i)),n.push({id:r+"bc"+o,layer:Z.layer.sequence}))}),t.label=o}function T(t,e,r,n){var i={};return t.from&&t.to&&("*"===t.to?(j(t,e,r,n),i=d.createLabel(t,{x:0,y:0,width:Z.arcEndX},{alignAround:!0,ownBackground:!0,wordWrapArcs:Z.wordWrapArcs},r+"_lbl"),n.push({id:r+"_lbl",layer:Z.layer.sequence})):(i=q(r,t,l.getX(t.from),l.getX(t.to)),n.push({id:r,layer:Z.layer.sequence}))),i}function D(e,n,i){var o="arcrow",u=[];e.forEach(function(t,e){var d=s.get(n.toString()+"_"+e.toString()),f={};switch(a.getAggregate(t.kind)){case"emptyarc":f=F(t,d),"..."===t.kind&&(o="arcrowomit"),u.push({id:d,layer:Z.layer.sequence});break;case"box":f=P(d,l.getOAndD(t.from,t.to),t),u.push({id:d,layer:Z.layer.notes});break;case"inline_expression":f=B(d+"_label",t),u.push({id:d+"_label",layer:Z.layer.notes}),J.push({id:d,arc:t,rownum:n});break;default:f=T(t,i,d,u)}c.set(n,Math.max(c.get(n).height,r.getBBox(f).height+2*p.LINE_WIDTH)),Z.layer.defs.appendChild(f)});var d="arcrow_"+n.toString();Z.layer.defs.appendChild(R(i,o,c.get(n).height,s.get(d))),Z.layer.lifeline.appendChild(t.createUse({x:0,y:c.get(n).y},s.get(d))),u.forEach(function(e){e.layer.appendChild(t.createUse({x:0,y:c.get(n).y},e.id))})}function N(e,r){if(J=[],Z.layer.defs.appendChild(R(r,s.get("arcrow"))),Z.layer.lifeline.appendChild(t.createUse({x:0,y:c.get(-1).y},s.get("arcrow"))),e){for(var n=0;n<e.length;n++)D(e[n],n,r);O(J)}}function B(e,n){var i=l.getOAndD(n.from,n.to),o=7,a=2*Z.maxDepth*p.LINE_WIDTH,c=i.to-i.from+(l.getDims().interEntitySpacing-2*p.LINE_WIDTH)-o-p.LINE_WIDTH,s=i.from-(l.getDims().interEntitySpacing-3*p.LINE_WIDTH-a)/2-2*(Z.maxDepth-n.depth)*p.LINE_WIDTH,u=t.createGroup(e);n.label=n.kind+(n.label?": "+n.label:"");var f=d.createLabel(n,{x:s+p.LINE_WIDTH-c/2,y:Z.arcRowHeight/4,width:c},{alignLeft:!0,ownBackground:!1,wordWrapArcs:Z.wordWrapArcs}),h=r.getBBox(f),g=Math.max(h.height+2*p.LINE_WIDTH,Z.arcRowHeight/2-2*p.LINE_WIDTH),b=Math.min(h.width+2*p.LINE_WIDTH,c),m=t.createEdgeRemark({width:b-p.LINE_WIDTH+o,height:g,x:s,y:0},"box inline_expression_label",n.linecolor,n.textbgcolor,o);return u.appendChild(m),u.appendChild(f),u}function O(e){e.forEach(function(e){Z.layer.defs.appendChild(H(e)),Z.layer.inline.appendChild(t.createUse({x:0,y:c.get(e.rownum).y},e.id))})}function H(t){var e=c.get(t.rownum).y,r=c.get(t.rownum+t.arc.numberofrows+1).y,n=r-e;return t.arc.label="",X(t.id,l.getOAndD(t.arc.from,t.arc.to),t.arc,n)}function R(e,r,n,i){i||(i=r),(!n||n<Z.arcRowHeight)&&(n=Z.arcRowHeight);var o=t.createGroup(i);return e.forEach(function(e){var i=t.createLine({xFrom:l.getX(e.name),yFrom:0-n/2,xTo:l.getX(e.name),yTo:n/2},r);e.linecolor&&i.setAttribute("style","stroke:"+e.linecolor+";"),o.appendChild(i)}),o}function W(e,r,n,i,o){var c=2*(Z.arcRowHeight/5),d=l.getDims().interEntitySpacing/2,f={},h="arc "+a.getAggregateClass(e)+" "+a.getClass(e);if(i){f=t.createGroup();var g=t.createUTurn({x:r,y:c/2},n+c-2*p.LINE_WIDTH,d-2*p.LINE_WIDTH,h,"::"!==e),b=t.createUTurn({x:r,y:c/2},n+c-p.LINE_WIDTH,d),m=t.createUTurn({x:r,y:c/2},n+c,d,h,"::"!==e);Boolean(o)&&g.setAttribute("style","stroke:"+o),u.getAttributes(s.get(),e,o,r,r).forEach(function(t){b.setAttribute(t.name,t.value)}),b.setAttribute("style","stroke:transparent;"),Boolean(o)&&m.setAttribute("style","stroke:"+o),f.appendChild(g),f.appendChild(m),f.appendChild(b),f.setAttribute("class",h)}else f=t.createUTurn({x:r,y:c/2},n+c,d,h,"-x"===e),u.getAttributes(s.get(),e,o,r,r).forEach(function(t){f.setAttribute(t.name,t.value)});return f}function F(t,e){return"---"===t.kind?U(e,t,l.getOAndD(t.from,t.to)):z(e,t,l.getOAndD(t.from,t.to))}function M(t){return t.arcskip?t.arcskip*Z.arcRowHeight:0}function G(t){return"<:>"===t?"bidi ":"::"===t?"nodi ":""}function q(e,r,i,o){var c=t.createGroup(e),f="arc ";f+=G(r.kind),f+=a.getAggregateClass(r.kind)+" "+a.getClass(r.kind);var h=[":>","::","<:>"].indexOf(r.kind)>-1,g=M(r),b=0===g?Z.arcGradient:g;if(o=n.determineArcXTo(r.kind,i,o),i===o){c.appendChild(W(r.kind,i,g,h,r.linecolor));var m=2*l.getDims().interEntitySpacing/3;c.appendChild(d.createLabel(r,{x:i+1.5*p.LINE_WIDTH-m/2,y:0-Z.arcRowHeight/5-p.LINE_WIDTH/2,width:m},{alignLeft:!0,alignAbove:!0,ownBackground:!0,wordWrapArcs:Z.wordWrapArcs}))}else{var y=t.createLine({xFrom:i,yFrom:0,xTo:o,yTo:b},f,h);u.getAttributes(s.get(),r.kind,r.linecolor,i,o).forEach(function(t){y.setAttribute(t.name,t.value)}),c.appendChild(y),c.appendChild(d.createLabel(r,{x:i,y:0,width:o-i},{alignAround:!0,ownBackground:!0,wordWrapArcs:Z.wordWrapArcs}))}return c}function z(e,r,n){var i=0,o=Z.arcEndX,a=t.createGroup(e);return r.from&&r.to&&(i=n.from,o=n.to-n.from),a.appendChild(d.createLabel(r,{x:i,y:0,width:o},{ownBackground:!0,wordWrapArcs:Z.wordWrapArcs},e+"_lbl")),a}function U(e,r,n){var i=0,o=Z.arcEndX,a="comment",c=t.createGroup(e);if(r.from&&r.to){var s=1*Z.maxDepth*p.LINE_WIDTH,u=2*(Z.maxDepth-r.depth)*p.LINE_WIDTH;i=n.from-(l.getDims().interEntitySpacing+2*p.LINE_WIDTH)/2-(u-s),o=n.to+(l.getDims().interEntitySpacing+2*p.LINE_WIDTH)/2+(u-s),a="inline_expression_divider"}var d=t.createLine({xFrom:i,yFrom:0,xTo:o,yTo:0},a);return c.appendChild(d),c.appendChild(z(e+"_txt",r,n)),r.linecolor&&d.setAttribute("style","stroke:"+r.linecolor+";"),c}function X(e,r,n,i){var o=2*Z.maxDepth*p.LINE_WIDTH,a=r.to-r.from+l.getDims().interEntitySpacing-2*p.LINE_WIDTH-o,c=r.from-(l.getDims().interEntitySpacing-2*p.LINE_WIDTH-o)/2,s=t.createGroup(e),u=2*(Z.maxDepth-n.depth)*p.LINE_WIDTH;return s.appendChild(t.createRect({width:a+2*u,height:i?i:Z.arcRowHeight-2*p.LINE_WIDTH,x:c-u,y:0},"box inline_expression "+n.kind,n.linecolor,n.textbgcolor)),s}function P(e,n,i){var o=2*Z.maxDepth*p.LINE_WIDTH,a=n.to-n.from+l.getDims().interEntitySpacing-2*p.LINE_WIDTH-o,c=n.from-(l.getDims().interEntitySpacing-2*p.LINE_WIDTH-o)/2,s=t.createGroup(e),u={},f=d.createLabel(i,{x:c,y:0,width:a}),h=r.getBBox(f),g=Math.max(h.height+2*p.LINE_WIDTH,Z.arcRowHeight-2*p.LINE_WIDTH),b={width:a,height:g,x:c,y:0-g/2};switch(i.kind){case"rbox":u=t.createRBox(b,"box rbox",i.linecolor,i.textbgcolor);break;case"abox":u=t.createABox(b,"box abox",i.linecolor,i.textbgcolor);break;case"note":u=t.createNote(b,"box note",i.linecolor,i.textbgcolor);break;default:u=t.createRect(b,"box",i.linecolor,i.textbgcolor)}return s.appendChild(u),s.appendChild(f),s}var V=3,$=38,K=0,Z=Object.seal({arcRowHeight:$,arcGradient:K,arcEndX:0,wordWrapArcs:!1,mirrorEntitiesOnBottom:!1,maxDepth:0,document:{},layer:{defs:{},lifeline:{},sequence:{},notes:{},inline:{},watermark:{}}}),J=[];return{clean:function(t,e){Z.document=i.init(e),r.init(Z.document),r.removeRenderedSVGFromElement(t)},renderAST:function(t,e,r,n,i){return h(t,n,r,{source:e,styleAdditions:i})},renderASTNew:h}}),r("utl/exporter",[],function(){"use strict";function t(t,e,r){return t.pathname+"?lang="+r+"&msc="+encodeURIComponent(e)}function e(e,n,i){return t(e,n,i).length<r}var r=4094;return{toLocationString:function(r,n,i){var o="# source too long for an URL";return e(r,n,i)&&(o=n),t(r,o,i)}}}),r("embedding/config",[],function(){"use strict";function t(t,e){Object.getOwnPropertyNames(e).forEach(function(r){t[r]=e[r]})}var e={defaultLanguage:"mscgen",parentElementPrefix:"mscgen_js-parent_",clickable:!1,clickURL:"https://sverweij.github.io/mscgen_js/",loadFromSrcAttribute:!1};return{getConfig:function(){return"undefined"!=typeof mscgen_js_config&&mscgen_js_config&&"object"==typeof mscgen_js_config&&t(e,mscgen_js_config),e}}}),r("utl/tpl",[],function(){"use strict";return{applyTemplate:function(t,e){var r=t;return e&&Object.keys(e).forEach(function(t){r=r.replace(new RegExp("{"+t+"}","g"),e[t])}),r}}}),r("embedding/error-rendering",["../utl/tpl"],function(t){"use strict";function e(t,e){for(var r=t.toString(),n=e-r.length,i=0;n>i;i++)r=" "+r;return r}function r(t,r){return e(r,3)+" "+t}function n(e,r){return e.split("").reduce(function(e,n,o){return o===r?e+t.applyTemplate(s,{"char":i(n)}):e+i(n)},"")}function i(t){return t.replace(/</g,"&lt;")}var o="<pre><div style='color: #d00'># ERROR on line {line}, column {col} - {message}</div>",a="<pre><div style='color: #d00'># ERROR {message}</div>",c="<mark>{line}\n</mark>",s="<span style='text-decoration:underline'>{char}</span>";return{formatNumber:e,deHTMLize:i,renderError:function(e,s,u){var l=Boolean(s)?t.applyTemplate(o,{message:u,line:s.start.line,col:s.start.column}):t.applyTemplate(a,{message:u});return e.split("\n").reduce(function(e,o,a){return s&&a===s.start.line-1?e+t.applyTemplate(c,{line:r(n(o,s.start.column-1),a+1)}):e+i(r(o,a+1))+"\n"},l)+"</pre>"}}}),r("utl/domutl",[],function(){"use strict";return{ajax:function(t,e,r){var n=new XMLHttpRequest;n.onreadystatechange=function(t){t.target.readyState===XMLHttpRequest.DONE&&(200===n.status?e(t):r(t))},n.open("GET",t),n.responseType="text";try{n.send()}catch(i){r(i)}}}}),e(["lib/mscgenjs-core/parse/xuparser","lib/mscgenjs-core/parse/msgennyparser","lib/mscgenjs-core/render/graphics/renderast","utl/exporter","embedding/config","embedding/error-rendering","utl/domutl","utl/tpl"],function(t,e,r,n,i,o,a,c){"use strict";function s(){u();var t=document.getElementsByClassName("mscgen_js");l(t,0),l(document.getElementsByTagName("mscgen"),t.length)}function u(){for(var t=document.scripts,e=0;e<t.length;e++)E[t[e].type]&&!t[e].hasAttribute("data-renderedby")&&(t[e].insertAdjacentHTML("afterend",c.applyTemplate(C,{src:t[e].src?c.applyTemplate(_,{src:t[e].src}):"",lang:E[t[e].type]||i.getConfig().defaultLanguage,msc:t[e].textContent.replace(/</g,"&lt;"),mirrorEntities:y(t[e])?"data-mirror-entities='true'":"",namedStyle:v(t[e])})),t[e].setAttribute("data-renderedby","mscgen_js"))}function l(t,e){for(var r=0;r<t.length;r++)d(t[r],e+r)}function d(t,e){t.hasAttribute("data-renderedby")||f(t,e)}function p(t,e){t.innerHTML=c.applyTemplate("<div style='color: #d00'>{string}</div>",{string:e})}function f(t,e){b(t,e),t.setAttribute("data-renderedby","mscgen_js"),i.getConfig().loadFromSrcAttribute&&t.getAttribute("data-src")?a.ajax(t.getAttribute("data-src"),function(e){h(t,e.target.response)},function(){p(t,c.applyTemplate(k,{url:t.getAttribute("data-src")}))}):!i.getConfig().loadFromSrcAttribute&&t.getAttribute("data-src")?p(t,c.applyTemplate(A,{url:t.getAttribute("data-src")})):h(t,t.textContent)}function h(t,e){var r=m(t),n=x(e,r);n.entities?w(n,t.id,e,r,y(t),v(t)):t.innerHTML=o.renderError(e,n.location,n.message)}function g(t,e,r){var o={pathname:"index.html"},a=document.createElement("a");return a.setAttribute("href",i.getConfig().clickURL+n.toLocationString(o,t,e)),a.setAttribute("id",r+"link"),a.setAttribute("style","text-decoration: none;"),a.setAttribute("title","click to edit in the mscgen_js interpreter"),a}function b(t,e){t.id||(t.id=i.getConfig().parentElementPrefix+e.toString())}function m(t){var e=t.getAttribute("data-language");return e||(e=i.getConfig().defaultLanguage),e}function y(t){var e=t.getAttribute("data-mirror-entities");return e&&"true"===e?!0:!1}function v(t){return t.getAttribute("data-named-style")}function x(r,n){var i={};try{i="msgenny"===n?e.parse(r):"json"===n?JSON.parse(r):t.parse(r)}catch(o){return o}return i}function w(t,e,n,o,a,c){var s=document.getElementById(e);s.innerHTML="",!0===i.getConfig().clickable&&(s.appendChild(g(n,o,e)),e+="link"),r.clean(e,window),r.renderASTNew(t,window,e,{source:n,additionalTemplate:c,mirrorEntitiesOnBottom:a})}var C="<span class='mscgen_js' {src} data-language='{lang}' data-named-style='{namedStyle}' {mirrorEntities}>{msc}<span>",_="data-src='{src}' ",k="ERROR: Could not find or open the URL '{url}' specified in the <code>data-src</code> attribute.",A="ERROR: Won't load the chart specified in <code>data-src='{url}'</code>, because loading from separate files is switched off in the mscgen_js configuration. <br><br>See <a href='https://sverweij.github.io/mscgen_js/embed.html#loading-from-separate-files'>Loading charts from separate files</a> in the mscgen_js embedding guide how to enable it.",E={"text/x-mscgen":"mscgen","text/x-msgenny":"msgenny","text/x-xu":"xu"};s()}),r("mscgen-inpage",function(){})}();