/**
 * @license almond 0.3.2 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */

/*
 This file is part of mscgen_js.

 mscgen_js is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 mscgen_js is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with mscgen_js.  If not, see <http://www.gnu.org/licenses/>.
 */

/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="umd" include="memoize,cloneDeep,flatten,defaults" --development --output lib/lodash/lodash.custom.js`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

!function(){var e,t,r;!function(n){function i(e,t){return x.call(e,t)}function o(e,t){var r,n,i,o,a,c,s,u,l,d,p,f,h=t&&t.split("/"),g=y.map,b=g&&g["*"]||{};if(e){for(e=e.split("/"),a=e.length-1,y.nodeIdCompat&&C.test(e[a])&&(e[a]=e[a].replace(C,"")),"."===e[0].charAt(0)&&h&&(f=h.slice(0,h.length-1),e=f.concat(e)),l=0;l<e.length;l++)if(p=e[l],"."===p)e.splice(l,1),l-=1;else if(".."===p){if(0===l||1===l&&".."===e[2]||".."===e[l-1])continue;l>0&&(e.splice(l-1,2),l-=2)}e=e.join("/")}if((h||b)&&g){for(r=e.split("/"),l=r.length;l>0;l-=1){if(n=r.slice(0,l).join("/"),h)for(d=h.length;d>0;d-=1)if(i=g[h.slice(0,d).join("/")],i&&(i=i[n])){o=i,c=l;break}if(o)break;!s&&b&&b[n]&&(s=b[n],u=l)}!o&&s&&(o=s,c=u),o&&(r.splice(0,c,o),e=r.join("/"))}return e}function a(e,t){return function(){var r=w.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),f.apply(n,r.concat([e,t]))}}function c(e){return function(t){return o(t,e)}}function s(e){return function(t){b[e]=t}}function u(e){if(i(m,e)){var t=m[e];delete m[e],v[e]=!0,p.apply(n,t)}if(!i(b,e)&&!i(v,e))throw new Error("No "+e);return b[e]}function l(e){var t,r=e?e.indexOf("!"):-1;return r>-1&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}function d(e){return function(){return y&&y.config&&y.config[e]||{}}}var p,f,h,g,b={},m={},y={},v={},x=Object.prototype.hasOwnProperty,w=[].slice,C=/\.js$/;h=function(e,t){var r,n=l(e),i=n[0];return e=n[1],i&&(i=o(i,t),r=u(i)),i?e=r&&r.normalize?r.normalize(e,c(t)):o(e,t):(e=o(e,t),n=l(e),i=n[0],e=n[1],i&&(r=u(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:r}},g={require:function(e){return a(e)},exports:function(e){var t=b[e];return"undefined"!=typeof t?t:b[e]={}},module:function(e){return{id:e,uri:"",exports:b[e],config:d(e)}}},p=function(e,t,r,o){var c,l,d,p,f,y,x=[],w=typeof r;if(o=o||e,"undefined"===w||"function"===w){for(t=!t.length&&r.length?["require","exports","module"]:t,f=0;f<t.length;f+=1)if(p=h(t[f],o),l=p.f,"require"===l)x[f]=g.require(e);else if("exports"===l)x[f]=g.exports(e),y=!0;else if("module"===l)c=x[f]=g.module(e);else if(i(b,l)||i(m,l)||i(v,l))x[f]=u(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,a(o,!0),s(l),{}),x[f]=b[l]}d=r?r.apply(b[e],x):void 0,e&&(c&&c.exports!==n&&c.exports!==b[e]?b[e]=c.exports:d===n&&y||(b[e]=d))}else e&&(b[e]=r)},e=t=f=function(e,t,r,i,o){if("string"==typeof e)return g[e]?g[e](t):u(h(e,t).f);if(!e.splice){if(y=e,y.deps&&f(y.deps,y.callback),!t)return;t.splice?(e=t,t=r,r=null):e=n}return t=t||function(){},"function"==typeof r&&(r=i,i=o),i?p(n,e,t,r):setTimeout(function(){p(n,e,t,r)},4),f},f.config=function(e){return f(e)},e._defined=b,r=function(e,t,r){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(r=t,t=[]),i(b,e)||i(m,e)||(m[e]=[e,t,r])},r.amd={jQuery:!0}}(),r("../node_modules/almond/almond",function(){}),r("lib/mscgenjs-core/parse/xuparser",[],function(){"use strict";function e(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function t(e,r,n,i){this.message=e,this.expected=r,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}function r(e){function r(){return o(no,ro)}function n(t){throw c(t,null,e.substring(no,ro),o(no,ro))}function i(t){var r,n,i=io[t];if(i)return i;for(r=t-1;!io[r];)r--;for(i=io[r],i={line:i.line,column:i.column,seenCR:i.seenCR};t>r;)n=e.charAt(r),"\n"===n?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):"\r"===n||"\u2028"===n||"\u2029"===n?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1),r++;return io[t]=i,i}function o(e,t){var r=i(e),n=i(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function a(e){oo>ro||(ro>oo&&(oo=ro,ao=[]),ao.push(e))}function c(e,r,n,i){function o(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}function a(e,t){function r(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+t(e)})}var n,i,o,a=new Array(e.length);for(o=0;o<e.length;o++)a[o]=e[o].description;return n=e.length>1?a.slice(0,-1).join(", ")+" or "+a[e.length-1]:a[0],i=t?'"'+r(t)+'"':"end of input","Expected "+n+" but "+i+" found."}return null!==r&&o(r),new t(null!==e?e:a(r,n),r,n,i)}function s(){var t,r,n,i,o,c,s,d,p,f;return t=ro,r=K(),r!==xe?(n=u(),n!==xe?(i=K(),i!==xe?(123===e.charCodeAt(ro)?(o=ke,ro++):(o=xe,0===co&&a(_e)),o!==xe?(c=K(),c!==xe?(s=l(),s!==xe?(d=K(),d!==xe?(125===e.charCodeAt(ro)?(p=Ae,ro++):(p=xe,0===co&&a(Ee)),p!==xe?(f=K(),f!==xe?(no=t,r=Le(r,s),t=r):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe),t}function u(){var t;return e.substr(ro,3).toLowerCase()===Te?(t=e.substr(ro,3),ro+=3):(t=xe,0===co&&a(je)),t===xe&&(e.substr(ro,2).toLowerCase()===Ie?(t=e.substr(ro,2),ro+=2):(t=xe,0===co&&a(Se))),t}function l(){var e,t,r,n,i;return e=ro,t=ro,r=d(),r!==xe&&(no=t,r=De(r)),t=r,t===xe&&(t=null),t!==xe?(r=ro,n=f(),n!==xe&&(no=r,n=Ne(n)),r=n,r===xe&&(r=null),r!==xe?(n=ro,i=g(),i!==xe&&(no=n,i=Be(i)),n=i,n===xe&&(n=null),n!==xe?(t=[t,r,n],e=t):(ro=e,e=xe)):(ro=e,e=xe)):(ro=e,e=xe),e}function d(){var t,r,n,i,o,c;for(t=ro,r=ro,n=[],i=ro,o=p(),o!==xe?(44===e.charCodeAt(ro)?(c=Fe,ro++):(c=xe,0===co&&a(Oe)),c!==xe?(no=i,o=He(o),i=o):(ro=i,i=xe)):(ro=i,i=xe);i!==xe;)n.push(i),i=ro,o=p(),o!==xe?(44===e.charCodeAt(ro)?(c=Fe,ro++):(c=xe,0===co&&a(Oe)),c!==xe?(no=i,o=He(o),i=o):(ro=i,i=xe)):(ro=i,i=xe);return n!==xe?(i=ro,o=p(),o!==xe?(59===e.charCodeAt(ro)?(c=Re,ro++):(c=xe,0===co&&a(We)),c!==xe?(no=i,o=He(o),i=o):(ro=i,i=xe)):(ro=i,i=xe),i!==xe?(n=[n,i],r=n):(ro=r,r=xe)):(ro=r,r=xe),r!==xe&&(no=t,r=Me(r)),t=r}function p(){var t,r,n,i,o,c,s,u;return co++,t=ro,r=K(),r!==xe?(e.substr(ro,6).toLowerCase()===qe?(n=e.substr(ro,6),ro+=6):(n=xe,0===co&&a(ze)),n===xe&&(e.substr(ro,11).toLowerCase()===Xe?(n=e.substr(ro,11),ro+=11):(n=xe,0===co&&a(Ue))),n!==xe?(i=K(),i!==xe?(61===e.charCodeAt(ro)?(o=Pe,ro++):(o=xe,0===co&&a(Ve)),o!==xe?(c=K(),c!==xe?(s=$(),s!==xe?(u=K(),u!==xe?(no=t,r=Ke(n,s),t=r):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe),t===xe&&(t=ro,r=K(),r!==xe?(e.substr(ro,5).toLowerCase()===$e?(n=e.substr(ro,5),ro+=5):(n=xe,0===co&&a(Ze)),n!==xe?(i=K(),i!==xe?(61===e.charCodeAt(ro)?(o=Pe,ro++):(o=xe,0===co&&a(Ve)),o!==xe?(c=K(),c!==xe?(s=ne(),s!==xe?(u=K(),u!==xe?(no=t,r=Ke(n,s),t=r):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe),t===xe&&(t=ro,r=K(),r!==xe?(e.substr(ro,12).toLowerCase()===Ye?(n=e.substr(ro,12),ro+=12):(n=xe,0===co&&a(Je)),n!==xe?(i=K(),i!==xe?(61===e.charCodeAt(ro)?(o=Pe,ro++):(o=xe,0===co&&a(Ve)),o!==xe?(c=K(),c!==xe?(s=ee(),s!==xe?(u=K(),u!==xe?(no=t,r=Qe(n,s),t=r):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe),t===xe&&(t=ro,r=K(),r!==xe?(e.substr(ro,9).toLowerCase()===et?(n=e.substr(ro,9),ro+=9):(n=xe,0===co&&a(tt)),n!==xe?(i=K(),i!==xe?(61===e.charCodeAt(ro)?(o=Pe,ro++):(o=xe,0===co&&a(Ve)),o!==xe?(c=K(),c!==xe?(s=B(),s!==xe?(u=K(),u!==xe?(no=t,r=Ke(n,s),t=r):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)))),co--,t===xe&&(r=xe,0===co&&a(Ge)),t}function f(){var t,r,n,i,o,c;for(t=ro,r=ro,n=[],i=ro,o=h(),o!==xe?(44===e.charCodeAt(ro)?(c=Fe,ro++):(c=xe,0===co&&a(Oe)),c!==xe?(no=i,o=rt(o),i=o):(ro=i,i=xe)):(ro=i,i=xe);i!==xe;)n.push(i),i=ro,o=h(),o!==xe?(44===e.charCodeAt(ro)?(c=Fe,ro++):(c=xe,0===co&&a(Oe)),c!==xe?(no=i,o=rt(o),i=o):(ro=i,i=xe)):(ro=i,i=xe);return n!==xe?(i=ro,o=h(),o!==xe?(59===e.charCodeAt(ro)?(c=Re,ro++):(c=xe,0===co&&a(We)),c!==xe?(no=i,o=rt(o),i=o):(ro=i,i=xe)):(ro=i,i=xe),i!==xe?(n=[n,i],r=n):(ro=r,r=xe)):(ro=r,r=xe),r!==xe&&(no=t,r=nt(r)),t=r}function h(){var t,r,n,i,o,c,s,u;return co++,t=ro,r=K(),r!==xe?(n=B(),n!==xe?(i=K(),i!==xe?(o=ro,91===e.charCodeAt(ro)?(c=ot,ro++):(c=xe,0===co&&a(at)),c!==xe?(s=S(),s!==xe?(93===e.charCodeAt(ro)?(u=ct,ro++):(u=xe,0===co&&a(st)),u!==xe?(no=o,c=ut(n,s),o=c):(ro=o,o=xe)):(ro=o,o=xe)):(ro=o,o=xe),o===xe&&(o=null),o!==xe?(c=K(),c!==xe?(no=t,r=lt(n,o),t=r):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe),t===xe&&(t=ro,r=K(),r!==xe?(n=H(),n!==xe?(i=K(),i!==xe?(o=ro,91===e.charCodeAt(ro)?(c=ot,ro++):(c=xe,0===co&&a(at)),c!==xe?(s=S(),s!==xe?(93===e.charCodeAt(ro)?(u=ct,ro++):(u=xe,0===co&&a(st)),u!==xe?(no=o,c=ut(n,s),o=c):(ro=o,o=xe)):(ro=o,o=xe)):(ro=o,o=xe),o===xe&&(o=null),o!==xe?(c=K(),c!==xe?(no=t,r=dt(n,o),t=r):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)),co--,t===xe&&(r=xe,0===co&&a(it)),t}function g(){var t,r,n,i,o;if(t=[],r=ro,n=b(),n!==xe?(i=K(),i!==xe?(59===e.charCodeAt(ro)?(o=Re,ro++):(o=xe,0===co&&a(We)),o!==xe?(no=r,n=pt(n),r=n):(ro=r,r=xe)):(ro=r,r=xe)):(ro=r,r=xe),r!==xe)for(;r!==xe;)t.push(r),r=ro,n=b(),n!==xe?(i=K(),i!==xe?(59===e.charCodeAt(ro)?(o=Re,ro++):(o=xe,0===co&&a(We)),o!==xe?(no=r,n=pt(n),r=n):(ro=r,r=xe)):(ro=r,r=xe)):(ro=r,r=xe);else t=xe;return t}function b(){var t,r,n,i,o,c,s;for(t=ro,r=ro,n=[],i=ro,o=m(),o!==xe?(c=K(),c!==xe?(44===e.charCodeAt(ro)?(s=Fe,ro++):(s=xe,0===co&&a(Oe)),s!==xe?(no=i,o=pt(o),i=o):(ro=i,i=xe)):(ro=i,i=xe)):(ro=i,i=xe);i!==xe;)n.push(i),i=ro,o=m(),o!==xe?(c=K(),c!==xe?(44===e.charCodeAt(ro)?(s=Fe,ro++):(s=xe,0===co&&a(Oe)),s!==xe?(no=i,o=pt(o),i=o):(ro=i,i=xe)):(ro=i,i=xe)):(ro=i,i=xe);return n!==xe?(i=ro,o=m(),o!==xe&&(no=i,o=ft(o)),i=o,i!==xe?(n=[n,i],r=n):(ro=r,r=xe)):(ro=r,r=xe),r!==xe&&(no=t,r=ht(r)),t=r}function m(){var e;return e=y(),e===xe&&(e=C()),e}function y(){var t,r,n,i,o,c;return t=ro,r=ro,n=v(),n!==xe&&(no=r,n=pt(n)),r=n,r===xe&&(r=ro,n=w(),n!==xe&&(no=r,n=pt(n)),r=n,r===xe&&(r=ro,n=x(),n!==xe&&(no=r,n=pt(n)),r=n)),r!==xe?(n=ro,91===e.charCodeAt(ro)?(i=ot,ro++):(i=xe,0===co&&a(at)),i!==xe?(o=S(),o!==xe?(93===e.charCodeAt(ro)?(c=ct,ro++):(c=xe,0===co&&a(st)),c!==xe?(no=n,i=gt(r,o),n=i):(ro=n,n=xe)):(ro=n,n=xe)):(ro=n,n=xe),n===xe&&(n=null),n!==xe?(no=t,r=bt(r,n),t=r):(ro=t,t=xe)):(ro=t,t=xe),t}function v(){var e,t,r,n;return e=ro,t=K(),t!==xe?(r=k(),r!==xe?(n=K(),n!==xe?(no=e,t=mt(r),e=t):(ro=e,e=xe)):(ro=e,e=xe)):(ro=e,e=xe),e}function x(){var e,t,r,n;return e=ro,t=K(),t!==xe?(r=_(),r!==xe?(n=K(),n!==xe?(no=e,t=mt(r),e=t):(ro=e,e=xe)):(ro=e,e=xe)):(ro=e,e=xe),e}function w(){var t,r,n,i,o,c,s,u;return t=ro,r=K(),r!==xe?(n=O(),n!==xe?(i=K(),i!==xe?(o=A(),o!==xe?(c=K(),c!==xe?(s=O(),s!==xe?(u=K(),u!==xe?(no=t,r=yt(n,o,s),t=r):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe),t===xe&&(t=ro,r=K(),r!==xe?(42===e.charCodeAt(ro)?(n=vt,ro++):(n=xe,0===co&&a(xt)),n!==xe?(i=K(),i!==xe?(o=T(),o!==xe?(c=K(),c!==xe?(s=O(),s!==xe?(u=K(),u!==xe?(no=t,r=wt(o,s),t=r):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe),t===xe&&(t=ro,r=K(),r!==xe?(n=O(),n!==xe?(i=K(),i!==xe?(o=L(),o!==xe?(c=K(),c!==xe?(42===e.charCodeAt(ro)?(s=vt,ro++):(s=xe,0===co&&a(xt)),s!==xe?(u=K(),u!==xe?(no=t,r=Ct(n,o),t=r):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe),t===xe&&(t=ro,r=K(),r!==xe?(n=O(),n!==xe?(i=K(),i!==xe?(o=E(),o!==xe?(c=K(),c!==xe?(42===e.charCodeAt(ro)?(s=vt,ro++):(s=xe,0===co&&a(xt)),s!==xe?(u=K(),u!==xe?(no=t,r=Ct(n,o),t=r):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)))),t}function C(){var t,r,n,i,o,c,s,u,l,d,p,f,h,b,m,y;return t=ro,r=K(),r!==xe?(n=O(),n!==xe?(i=K(),i!==xe?(o=I(),o!==xe?(c=K(),c!==xe?(s=O(),s!==xe?(u=K(),u!==xe?(l=ro,91===e.charCodeAt(ro)?(d=ot,ro++):(d=xe,0===co&&a(at)),d!==xe?(p=S(),p!==xe?(93===e.charCodeAt(ro)?(f=ct,ro++):(f=xe,0===co&&a(st)),f!==xe?(no=l,d=kt(n,o,s,p),l=d):(ro=l,l=xe)):(ro=l,l=xe)):(ro=l,l=xe),l===xe&&(l=null),l!==xe?(d=K(),d!==xe?(123===e.charCodeAt(ro)?(p=ke,ro++):(p=xe,0===co&&a(_e)),p!==xe?(f=K(),f!==xe?(h=g(),h===xe&&(h=null),h!==xe?(b=K(),b!==xe?(125===e.charCodeAt(ro)?(m=Ae,ro++):(m=xe,0===co&&a(Ee)),m!==xe?(y=K(),y!==xe?(no=t,r=_t(n,o,s,l,h),t=r):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe),t}function k(){var t,r;return co++,e.substr(ro,3)===Et?(t=Et,ro+=3):(t=xe,0===co&&a(Lt)),t===xe&&(e.substr(ro,3)===Tt?(t=Tt,ro+=3):(t=xe,0===co&&a(jt))),co--,t===xe&&(r=xe,0===co&&a(At)),t}function _(){var t,r;return co++,e.substr(ro,3)===St?(t=St,ro+=3):(t=xe,0===co&&a(Dt)),co--,t===xe&&(r=xe,0===co&&a(It)),t}function A(){var e,t;return e=ro,t=E(),t===xe&&(t=L(),t===xe&&(t=T(),t===xe&&(t=j()))),t!==xe&&(no=e,t=Nt(t)),e=t}function E(){var t,r;return co++,e.substr(ro,2)===Ft?(t=Ft,ro+=2):(t=xe,0===co&&a(Ot)),t===xe&&(e.substr(ro,3)===Ht?(t=Ht,ro+=3):(t=xe,0===co&&a(Rt)),t===xe&&(e.substr(ro,2)===Wt?(t=Wt,ro+=2):(t=xe,0===co&&a(Mt)),t===xe&&(e.substr(ro,5)===Gt?(t=Gt,ro+=5):(t=xe,0===co&&a(qt)),t===xe&&(e.substr(ro,3)===zt?(t=zt,ro+=3):(t=xe,0===co&&a(Xt)),t===xe&&(e.substr(ro,2)===Ut?(t=Ut,ro+=2):(t=xe,0===co&&a(Pt)),t===xe&&(e.substr(ro,4)===Vt?(t=Vt,ro+=4):(t=xe,0===co&&a(Kt)),t===xe&&(e.substr(ro,2)===$t?(t=$t,ro+=2):(t=xe,0===co&&a(Zt)),t===xe&&(e.substr(ro,3)===Yt?(t=Yt,ro+=3):(t=xe,0===co&&a(Jt)))))))))),co--,t===xe&&(r=xe,0===co&&a(Bt)),t}function L(){var t,r;return co++,e.substr(ro,2)===er?(t=er,ro+=2):(t=xe,0===co&&a(tr)),t===xe&&(e.substr(ro,3)===rr?(t=rr,ro+=3):(t=xe,0===co&&a(nr)),t===xe&&(e.substr(ro,2)===ir?(t=ir,ro+=2):(t=xe,0===co&&a(or)),t===xe&&(e.substr(ro,2)===ar?(t=ar,ro+=2):(t=xe,0===co&&a(cr)),t===xe&&(e.substr(ro,2)===sr?(t=sr,ro+=2):(t=xe,0===co&&a(ur)),t===xe&&(e.substr(ro,2).toLowerCase()===lr?(t=e.substr(ro,2),ro+=2):(t=xe,0===co&&a(dr))))))),co--,t===xe&&(r=xe,0===co&&a(Qt)),t}function T(){var t,r;return co++,e.substr(ro,2)===fr?(t=fr,ro+=2):(t=xe,0===co&&a(hr)),t===xe&&(e.substr(ro,3)===gr?(t=gr,ro+=3):(t=xe,0===co&&a(br)),t===xe&&(e.substr(ro,2)===mr?(t=mr,ro+=2):(t=xe,0===co&&a(yr)),t===xe&&(e.substr(ro,2)===vr?(t=vr,ro+=2):(t=xe,0===co&&a(xr)),t===xe&&(e.substr(ro,2)===wr?(t=wr,ro+=2):(t=xe,0===co&&a(Cr)),t===xe&&(e.substr(ro,2).toLowerCase()===kr?(t=e.substr(ro,2),ro+=2):(t=xe,0===co&&a(_r))))))),co--,t===xe&&(r=xe,0===co&&a(pr)),t}function j(){var t,r;return co++,e.substr(ro,4).toLowerCase()===Er?(t=e.substr(ro,4),ro+=4):(t=xe,0===co&&a(Lr)),t===xe&&(e.substr(ro,4).toLowerCase()===Tr?(t=e.substr(ro,4),ro+=4):(t=xe,0===co&&a(jr)),t===xe&&(e.substr(ro,4).toLowerCase()===Ir?(t=e.substr(ro,4),ro+=4):(t=xe,0===co&&a(Sr)),t===xe&&(e.substr(ro,3).toLowerCase()===Dr?(t=e.substr(ro,3),ro+=3):(t=xe,0===co&&a(Nr))))),co--,t===xe&&(r=xe,0===co&&a(Ar)),t}function I(){var t,r;return co++,t=ro,e.substr(ro,3).toLowerCase()===Fr?(r=e.substr(ro,3),ro+=3):(r=xe,0===co&&a(Or)),r===xe&&(e.substr(ro,4).toLowerCase()===Hr?(r=e.substr(ro,4),ro+=4):(r=xe,0===co&&a(Rr)),r===xe&&(e.substr(ro,3).toLowerCase()===Wr?(r=e.substr(ro,3),ro+=3):(r=xe,0===co&&a(Mr)),r===xe&&(e.substr(ro,5).toLowerCase()===Gr?(r=e.substr(ro,5),ro+=5):(r=xe,0===co&&a(qr)),r===xe&&(e.substr(ro,3).toLowerCase()===zr?(r=e.substr(ro,3),ro+=3):(r=xe,0===co&&a(Xr)),r===xe&&(e.substr(ro,3).toLowerCase()===Ur?(r=e.substr(ro,3),ro+=3):(r=xe,0===co&&a(Pr)),r===xe&&(e.substr(ro,6).toLowerCase()===Vr?(r=e.substr(ro,6),ro+=6):(r=xe,0===co&&a(Kr)),r===xe&&(e.substr(ro,3).toLowerCase()===$r?(r=e.substr(ro,3),ro+=3):(r=xe,0===co&&a(Zr)),r===xe&&(e.substr(ro,8).toLowerCase()===Yr?(r=e.substr(ro,8),ro+=8):(r=xe,0===co&&a(Jr)),r===xe&&(e.substr(ro,6).toLowerCase()===Qr?(r=e.substr(ro,6),ro+=6):(r=xe,0===co&&a(en)),r===xe&&(e.substr(ro,8).toLowerCase()===tn?(r=e.substr(ro,8),ro+=8):(r=xe,0===co&&a(rn)),r===xe&&(e.substr(ro,6).toLowerCase()===nn?(r=e.substr(ro,6),ro+=6):(r=xe,0===co&&a(on)),r===xe&&(e.substr(ro,4).toLowerCase()===an?(r=e.substr(ro,4),ro+=4):(r=xe,0===co&&a(cn)),r===xe&&(e.substr(ro,3).toLowerCase()===sn?(r=e.substr(ro,3),ro+=3):(r=xe,0===co&&a(un)),r===xe&&(e.substr(ro,3).toLowerCase()===ln?(r=e.substr(ro,3),ro+=3):(r=xe,0===co&&a(dn)))))))))))))))),r!==xe&&(no=t,r=pn(r)),t=r,co--,t===xe&&(r=xe,0===co&&a(Br)),t}function S(){var t,r,n,i,o,c;for(t=ro,r=ro,n=[],i=ro,o=D(),o!==xe?(44===e.charCodeAt(ro)?(c=Fe,ro++):(c=xe,0===co&&a(Oe)),c!==xe?(no=i,o=pt(o),i=o):(ro=i,i=xe)):(ro=i,i=xe);i!==xe;)n.push(i),i=ro,o=D(),o!==xe?(44===e.charCodeAt(ro)?(c=Fe,ro++):(c=xe,0===co&&a(Oe)),c!==xe?(no=i,o=pt(o),i=o):(ro=i,i=xe)):(ro=i,i=xe);return n!==xe?(i=ro,o=D(),o!==xe&&(no=i,o=pt(o)),i=o,i!==xe?(n=[n,i],r=n):(ro=r,r=xe)):(ro=r,r=xe),r!==xe&&(no=t,r=Me(r)),t=r}function D(){var t,r,n,i,o,c,s,u;return t=ro,r=K(),r!==xe?(n=N(),n!==xe?(i=K(),i!==xe?(61===e.charCodeAt(ro)?(o=Pe,ro++):(o=xe,0===co&&a(Ve)),o!==xe?(c=K(),c!==xe?(s=O(),s!==xe?(u=K(),u!==xe?(no=t,r=fn(n,s),t=r):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe),t}function N(){var t,r;return co++,e.substr(ro,5).toLowerCase()===gn?(t=e.substr(ro,5),ro+=5):(t=xe,0===co&&a(bn)),t===xe&&(e.substr(ro,5).toLowerCase()===mn?(t=e.substr(ro,5),ro+=5):(t=xe,0===co&&a(yn)),t===xe&&(e.substr(ro,2).toLowerCase()===vn?(t=e.substr(ro,2),ro+=2):(t=xe,0===co&&a(xn)),t===xe&&(e.substr(ro,3).toLowerCase()===wn?(t=e.substr(ro,3),ro+=3):(t=xe,0===co&&a(Cn)),t===xe&&(e.substr(ro,9).toLowerCase()===kn?(t=e.substr(ro,9),ro+=9):(t=xe,0===co&&a(_n)),t===xe&&(e.substr(ro,10).toLowerCase()===An?(t=e.substr(ro,10),ro+=10):(t=xe,0===co&&a(En)),t===xe&&(e.substr(ro,9).toLowerCase()===Ln?(t=e.substr(ro,9),ro+=9):(t=xe,0===co&&a(Tn)),t===xe&&(e.substr(ro,10).toLowerCase()===jn?(t=e.substr(ro,10),ro+=10):(t=xe,0===co&&a(In)),t===xe&&(e.substr(ro,11).toLowerCase()===Sn?(t=e.substr(ro,11),ro+=11):(t=xe,0===co&&a(Dn)),t===xe&&(e.substr(ro,12).toLowerCase()===Nn?(t=e.substr(ro,12),ro+=12):(t=xe,0===co&&a(Bn)),t===xe&&(e.substr(ro,12).toLowerCase()===Fn?(t=e.substr(ro,12),ro+=12):(t=xe,0===co&&a(On)),t===xe&&(e.substr(ro,13).toLowerCase()===Hn?(t=e.substr(ro,13),ro+=13):(t=xe,0===co&&a(Rn)),t===xe&&(e.substr(ro,12).toLowerCase()===Wn?(t=e.substr(ro,12),ro+=12):(t=xe,0===co&&a(Mn)),t===xe&&(e.substr(ro,13).toLowerCase()===Gn?(t=e.substr(ro,13),ro+=13):(t=xe,0===co&&a(qn)),t===xe&&(e.substr(ro,14).toLowerCase()===zn?(t=e.substr(ro,14),ro+=14):(t=xe,0===co&&a(Xn)),t===xe&&(e.substr(ro,15).toLowerCase()===Un?(t=e.substr(ro,15),ro+=15):(t=xe,0===co&&a(Pn)),t===xe&&(e.substr(ro,7).toLowerCase()===Vn?(t=e.substr(ro,7),ro+=7):(t=xe,0===co&&a(Kn)))))))))))))))))),co--,t===xe&&(r=xe,0===co&&a(hn)),t}function B(){var t,r,n,i;return co++,t=ro,34===e.charCodeAt(ro)?(r=Zn,ro++):(r=xe,0===co&&a(Yn)),r!==xe?(n=F(),n!==xe?(34===e.charCodeAt(ro)?(i=Zn,ro++):(i=xe,0===co&&a(Yn)),i!==xe?(no=t,r=Jn(n),t=r):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe),co--,t===xe&&(r=xe,0===co&&a($n)),t}function F(){var t,r,n,i;for(t=[],r=ro,n=ro,co++,34===e.charCodeAt(ro)?(i=Zn,ro++):(i=xe,0===co&&a(Yn)),co--,i===xe?n=void 0:(ro=n,n=xe),n!==xe?(e.substr(ro,2)===Qn?(i=Qn,ro+=2):(i=xe,0===co&&a(ei)),i===xe&&(e.length>ro?(i=e.charAt(ro),ro++):(i=xe,0===co&&a(ti))),i!==xe?(no=r,n=ri(i),r=n):(ro=r,r=xe)):(ro=r,r=xe);r!==xe;)t.push(r),r=ro,n=ro,co++,34===e.charCodeAt(ro)?(i=Zn,ro++):(i=xe,0===co&&a(Yn)),co--,i===xe?n=void 0:(ro=n,n=xe),n!==xe?(e.substr(ro,2)===Qn?(i=Qn,ro+=2):(i=xe,0===co&&a(ei)),i===xe&&(e.length>ro?(i=e.charAt(ro),ro++):(i=xe,0===co&&a(ti))),i!==xe?(no=r,n=ri(i),r=n):(ro=r,r=xe)):(ro=r,r=xe);return t}function O(){var e,t;return co++,e=H(),e===xe&&(e=B()),co--,e===xe&&(t=xe,0===co&&a(ni)),e}function H(){var t,r,n;if(t=ro,r=[],ii.test(e.charAt(ro))?(n=e.charAt(ro),ro++):(n=xe,0===co&&a(oi)),n!==xe)for(;n!==xe;)r.push(n),ii.test(e.charAt(ro))?(n=e.charAt(ro),ro++):(n=xe,0===co&&a(oi));else r=xe;return r!==xe&&(no=t,r=ai(r)),t=r}function R(){var t,r;return co++,t=ro,si.test(e.charAt(ro))?(r=e.charAt(ro),ro++):(r=xe,0===co&&a(ui)),r!==xe&&(no=t,r=ri(r)),t=r,co--,t===xe&&(r=xe,0===co&&a(ci)),t}function W(){var t,r;return co++,t=ro,di.test(e.charAt(ro))?(r=e.charAt(ro),ro++):(r=xe,0===co&&a(pi)),r!==xe&&(no=t,r=ri(r)),t=r,co--,t===xe&&(r=xe,0===co&&a(li)),t}function M(){var t;return e.substr(ro,2)===fi?(t=fi,ro+=2):(t=xe,0===co&&a(hi)),t}function G(){var t;return e.substr(ro,2)===gi?(t=gi,ro+=2):(t=xe,0===co&&a(bi)),t}function q(){var t,r,n;return t=ro,r=ro,co++,e.substr(ro,2)===gi?(n=gi,ro+=2):(n=xe,0===co&&a(bi)),co--,n===xe?r=void 0:(ro=r,r=xe),r!==xe?(e.length>ro?(n=e.charAt(ro),ro++):(n=xe,0===co&&a(ti)),n!==xe?(no=t,r=ri(n),t=r):(ro=t,t=xe)):(ro=t,t=xe),t}function z(){var e,t,r,n;if(e=ro,t=M(),t!==xe){for(r=[],n=q();n!==xe;)r.push(n),n=q();r!==xe?(n=G(),n!==xe?(no=e,t=mi(t,r,n),e=t):(ro=e,e=xe)):(ro=e,e=xe)}else ro=e,e=xe;return e}function X(){var t;return e.substr(ro,2)===yi?(t=yi,ro+=2):(t=xe,0===co&&a(vi)),t===xe&&(35===e.charCodeAt(ro)?(t=xi,ro++):(t=xe,0===co&&a(wi))),t}function U(){var t;return Ci.test(e.charAt(ro))?(t=e.charAt(ro),ro++):(t=xe,0===co&&a(ki)),t}function P(){var e,t,r,n;if(e=ro,t=X(),t!==xe){for(r=[],n=U();n!==xe;)r.push(n),n=U();r!==xe?(no=e,t=_i(t,r),e=t):(ro=e,e=xe)}else ro=e,e=xe;return e}function V(){var e,t;return co++,e=P(),e===xe&&(e=z()),co--,e===xe&&(t=xe,0===co&&a(Ai)),e}function K(){var e,t;for(e=[],t=R(),t===xe&&(t=W(),t===xe&&(t=V()));t!==xe;)e.push(t),t=R(),t===xe&&(t=W(),t===xe&&(t=V()));return e}function $(){var e,t;return co++,e=ro,t=Z(),t!==xe&&(no=e,t=Li(t)),e=t,e===xe&&(e=ro,t=Y(),t!==xe&&(no=e,t=Ti(t)),e=t),co--,e===xe&&(t=xe,0===co&&a(Ei)),e}function Z(){var t,r,n,i;return t=ro,34===e.charCodeAt(ro)?(r=Zn,ro++):(r=xe,0===co&&a(Yn)),r!==xe?(n=Y(),n!==xe?(34===e.charCodeAt(ro)?(i=Zn,ro++):(i=xe,0===co&&a(Yn)),i!==xe?(no=t,r=ji(n),t=r):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe),t}function Y(){var e;return e=Q(),e===xe&&(e=J()),e}function J(){var t,r,n;if(t=ro,r=[],Ii.test(e.charAt(ro))?(n=e.charAt(ro),ro++):(n=xe,0===co&&a(Si)),n!==xe)for(;n!==xe;)r.push(n),Ii.test(e.charAt(ro))?(n=e.charAt(ro),ro++):(n=xe,0===co&&a(Si));else r=xe;return r!==xe&&(no=t,r=Di(r)),t=r}function Q(){var t,r,n,i,o;return t=ro,r=ro,n=J(),n!==xe?(46===e.charCodeAt(ro)?(i=Ni,ro++):(i=xe,0===co&&a(Bi)),i!==xe?(o=J(),o!==xe?(n=[n,i,o],r=n):(ro=r,r=xe)):(ro=r,r=xe)):(ro=r,r=xe),r!==xe&&(no=t,r=Fi(r)),t=r}function ee(){var e,t;return co++,e=ro,t=te(),t!==xe&&(no=e,t=Hi(t)),e=t,e===xe&&(e=ro,t=re(),t!==xe&&(no=e,t=Ri(t)),e=t),co--,e===xe&&(t=xe,0===co&&a(Oi)),e}function te(){var t,r,n,i;return t=ro,34===e.charCodeAt(ro)?(r=Zn,ro++):(r=xe,0===co&&a(Yn)),r!==xe?(n=re(),n!==xe?(34===e.charCodeAt(ro)?(i=Zn,ro++):(i=xe,0===co&&a(Yn)),i!==xe?(no=t,r=Li(n),t=r):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe),t}function re(){var t;return e.substr(ro,4).toLowerCase()===Wi?(t=e.substr(ro,4),ro+=4):(t=xe,0===co&&a(Mi)),t===xe&&(e.substr(ro,5).toLowerCase()===Gi?(t=e.substr(ro,5),ro+=5):(t=xe,0===co&&a(qi)),t===xe&&(e.substr(ro,2).toLowerCase()===zi?(t=e.substr(ro,2),ro+=2):(t=xe,0===co&&a(Xi)),t===xe&&(e.substr(ro,3).toLowerCase()===Ui?(t=e.substr(ro,3),ro+=3):(t=xe,0===co&&a(Pi)),t===xe&&(48===e.charCodeAt(ro)?(t=Vi,ro++):(t=xe,0===co&&a(Ki)),t===xe&&(49===e.charCodeAt(ro)?(t=$i,ro++):(t=xe,0===co&&a(Zi))))))),t}function ne(){var e,t;return co++,e=ie(),e===xe&&(e=oe()),co--,e===xe&&(t=xe,0===co&&a(Yi)),e}function ie(){var t,r,n,i;return t=ro,34===e.charCodeAt(ro)?(r=Zn,ro++):(r=xe,0===co&&a(Yn)),r!==xe?(n=oe(),n!==xe?(34===e.charCodeAt(ro)?(i=Zn,ro++):(i=xe,0===co&&a(Yn)),i!==xe?(no=t,r=Li(n),t=r):(ro=t,t=xe)):(ro=t,t=xe)):(ro=t,t=xe),t}function oe(){var t,r;return t=ro,r=Y(),r!==xe&&(no=t,r=Ji(r)),t=r,t===xe&&(t=ro,e.substr(ro,4).toLowerCase()===Qi?(r=e.substr(ro,4),ro+=4):(r=xe,0===co&&a(eo)),r!==xe&&(no=t,r=to(r)),t=r),t}function ae(e,t){return e=e||{},t&&Object.getOwnPropertyNames(t).forEach(function(r){e[r]=t[r]}),e}function ce(e){var t={};return e[0].forEach(function(e){t=ae(t,e)}),ae(t,e[1])}function se(e){return["true","on","1"].indexOf(e.toLowerCase())>-1}function ue(e,t){var r={};return r[e.toLowerCase()]=t,r}function le(e,t){return void 0===t||"*"===t||e.entities.some(function(e){return e.name===t})}function de(e){return["box","abox","rbox","note","msc","hscale","width","arcgradient","wordwraparcs","label","color","idurl","id","url","linecolor","linecolour","textcolor","textcolour","textbgcolor","textbgcolour","arclinecolor","arclinecolour","arctextcolor","arctextcolour","arctextbgcolor","arctextbgcolour","arcskip"].indexOf(e)>-1}function pe(e,t){return"Entity '"+e+"' in arc '"+t.from+" "+t.kind+" "+t.to+"' is not defined."}function fe(e,t){this.name="EntityNotDefinedError",this.message=pe(e,t),t.location&&(this.location=t.location,this.location.start.line++,this.location.end.line++)}function he(e,t){return e||(e={},e.entities=[]),t&&t.arcs&&t.arcs.forEach(function(t){t.forEach(function(t){if(t.from&&!le(e,t.from))throw new fe(t.from,t);if(t.to&&!le(e,t.to))throw new fe(t.to,t);t.location&&delete t.location,t.arcs&&he(e,t)})}),e}function ge(e){return e&&e.options?!!e.options.watermark||!!e.options.width&&"auto"===e.options.width:!1}function be(e){return e&&e.arcs?e.arcs.some(function(e){return e.some(function(e){return["alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"].indexOf(e.kind)>-1})}):!1}function me(e,t){var r=ge(e),n=be(t);return{extendedOptions:r,extendedArcTypes:n,extendedFeatures:r||n}}var ye,ve=arguments.length>1?arguments[1]:{},xe={},we={program:s},Ce=s,ke="{",_e={type:"literal",value:"{",description:'"{"'},Ae="}",Ee={type:"literal",value:"}",description:'"}"'},Le=function(e,t){t[1]=he(t[1],t[2]);var r=ae(t[0],ae(t[1],t[2]));return r=ae({meta:me(t[0],t[2])},r),e.length>0&&(r=ae({precomment:e},r)),r},Te="msc",je={type:"literal",value:"msc",description:'"msc"'},Ie="xu",Se={type:"literal",value:"xu",description:'"xu"'},De=function(e){return{options:e}},Ne=function(e){return{entities:e}},Be=function(e){return{arcs:e}},Fe=",",Oe={type:"literal",value:",",description:'","'},He=function(e){return e},Re=";",We={type:"literal",value:";",description:'";"'},Me=function(e){return ce(e)},Ge={type:"other",description:"option"},qe="hscale",ze={type:"literal",value:"hscale",description:'"hscale"'},Xe="arcgradient",Ue={type:"literal",value:"arcgradient",description:'"arcgradient"'},Pe="=",Ve={type:"literal",value:"=",description:'"="'},Ke=function(e,t){return ue(e,t)},$e="width",Ze={type:"literal",value:"width",description:'"width"'},Ye="wordwraparcs",Je={type:"literal",value:"wordwraparcs",description:'"wordwraparcs"'},Qe=function(e,t){var r={};return r[e.toLowerCase()]=se(t),r},et="watermark",tt={type:"literal",value:"watermark",description:'"watermark"'},rt=function(e){return e},nt=function(e){return e[0].push(e[1]),e[0]},it={type:"other",description:"entity"},ot="[",at={type:"literal",value:"[",description:'"["'},ct="]",st={type:"literal",value:"]",description:'"]"'},ut=function(e,t){return t},lt=function(e,t){return ae({name:e},t)},dt=function(e,t){return de(e)&&n("MscGen keywords aren't allowed as entity names (embed them in quotes if you need them)"),ae({name:e},t)},pt=function(e){return e},ft=function(e){return[e]},ht=function(e){return e[0].push(e[1][0]),e[0]},gt=function(e,t){return t},bt=function(e,t){return ae(e,t)},mt=function(e){return{kind:e}},yt=function(e,t,n){return{kind:t,from:e,to:n,location:r()}},vt="*",xt={type:"literal",value:"*",description:'"*"'},wt=function(e,t){return{kind:e,from:"*",to:t,location:r()}},Ct=function(e,t){return{kind:t,from:e,to:"*",location:r()}},kt=function(e,t,r,n){return n},_t=function(e,t,n,i,o){var a={kind:t,from:e,to:n,location:r(),arcs:o};return ae(a,i)},At={type:"other",description:"empty row"},Et="|||",Lt={type:"literal",value:"|||",description:'"|||"'},Tt="...",jt={type:"literal",value:"...",description:'"..."'},It={type:"other",description:"---"},St="---",Dt={type:"literal",value:"---",description:'"---"'},Nt=function(e){return e.toLowerCase()},Bt={type:"other",description:"bi-directional arrow"},Ft="--",Ot={type:"literal",value:"--",description:'"--"'},Ht="<->",Rt={type:"literal",value:"<->",description:'"<->"'},Wt="==",Mt={type:"literal",value:"==",description:'"=="'},Gt="<<=>>",qt={type:"literal",value:"<<=>>",description:'"<<=>>"'},zt="<=>",Xt={type:"literal",value:"<=>",description:'"<=>"'},Ut="..",Pt={type:"literal",value:"..",description:'".."'},Vt="<<>>",Kt={type:"literal",value:"<<>>",description:'"<<>>"'},$t="::",Zt={type:"literal",value:"::",description:'"::"'},Yt="<:>",Jt={type:"literal",value:"<:>",description:'"<:>"'},Qt={type:"other",description:"left to right arrow"},er="->",tr={type:"literal",value:"->",description:'"->"'},rr="=>>",nr={type:"literal",value:"=>>",description:'"=>>"'},ir="=>",or={type:"literal",value:"=>",description:'"=>"'},ar=">>",cr={type:"literal",value:">>",description:'">>"'},sr=":>",ur={type:"literal",value:":>",description:'":>"'},lr="-x",dr={type:"literal",value:"-x",description:'"-x"'},pr={type:"other",description:"right to left arrow"},fr="<-",hr={type:"literal",value:"<-",description:'"<-"'},gr="<<=",br={type:"literal",value:"<<=",description:'"<<="'},mr="<=",yr={type:"literal",value:"<=",description:'"<="'},vr="<<",xr={type:"literal",value:"<<",description:'"<<"'},wr="<:",Cr={type:"literal",value:"<:",description:'"<:"'},kr="x-",_r={type:"literal",value:"x-",description:'"x-"'},Ar={type:"other",description:"box"},Er="note",Lr={type:"literal",value:"note",description:'"note"'},Tr="abox",jr={type:"literal",value:"abox",description:'"abox"'},Ir="rbox",Sr={type:"literal",value:"rbox",description:'"rbox"'},Dr="box",Nr={type:"literal",value:"box",description:'"box"'},Br={type:"other",description:"inline expression"},Fr="alt",Or={type:"literal",value:"alt",description:'"alt"'},Hr="else",Rr={type:"literal",value:"else",description:'"else"'},Wr="opt",Mr={type:"literal",value:"opt",description:'"opt"'},Gr="break",qr={type:"literal",value:"break",description:'"break"'},zr="par",Xr={type:"literal",value:"par",description:'"par"'},Ur="seq",Pr={type:"literal",value:"seq",description:'"seq"'},Vr="strict",Kr={type:"literal",value:"strict",description:'"strict"'},$r="neg",Zr={type:"literal",value:"neg",description:'"neg"'},Yr="critical",Jr={type:"literal",value:"critical",description:'"critical"'},Qr="ignore",en={type:"literal",value:"ignore",description:'"ignore"'},tn="consider",rn={type:"literal",value:"consider",description:'"consider"'},nn="assert",on={type:"literal",value:"assert",description:'"assert"'},an="loop",cn={type:"literal",value:"loop",description:'"loop"'},sn="ref",un={type:"literal",value:"ref",description:'"ref"'},ln="exc",dn={type:"literal",value:"exc",description:'"exc"'},pn=function(e){return e.toLowerCase()},fn=function(e,t){var r={};return r[e.toLowerCase().replace("colour","color")]=t,r},hn={type:"other",description:"attribute name"},gn="label",bn={type:"literal",value:"label",description:'"label"'},mn="idurl",yn={type:"literal",value:"idurl",description:'"idurl"'},vn="id",xn={type:"literal",value:"id",description:'"id"'},wn="url",Cn={type:"literal",value:"url",description:'"url"'},kn="linecolor",_n={type:"literal",value:"linecolor",description:'"linecolor"'},An="linecolour",En={type:"literal",value:"linecolour",description:'"linecolour"'},Ln="textcolor",Tn={type:"literal",value:"textcolor",description:'"textcolor"'},jn="textcolour",In={type:"literal",value:"textcolour",description:'"textcolour"'},Sn="textbgcolor",Dn={type:"literal",value:"textbgcolor",description:'"textbgcolor"'},Nn="textbgcolour",Bn={type:"literal",value:"textbgcolour",description:'"textbgcolour"'},Fn="arclinecolor",On={type:"literal",value:"arclinecolor",description:'"arclinecolor"'},Hn="arclinecolour",Rn={type:"literal",value:"arclinecolour",description:'"arclinecolour"'
},Wn="arctextcolor",Mn={type:"literal",value:"arctextcolor",description:'"arctextcolor"'},Gn="arctextcolour",qn={type:"literal",value:"arctextcolour",description:'"arctextcolour"'},zn="arctextbgcolor",Xn={type:"literal",value:"arctextbgcolor",description:'"arctextbgcolor"'},Un="arctextbgcolour",Pn={type:"literal",value:"arctextbgcolour",description:'"arctextbgcolour"'},Vn="arcskip",Kn={type:"literal",value:"arcskip",description:'"arcskip"'},$n={type:"other",description:"double quoted string"},Zn='"',Yn={type:"literal",value:'"',description:'"\\""'},Jn=function(e){return e.join("")},Qn='\\"',ei={type:"literal",value:'\\"',description:'"\\\\\\""'},ti={type:"any",description:"any character"},ri=function(e){return e},ni={type:"other",description:"identifier"},ii=/^[A-Za-z_0-9]/,oi={type:"class",value:"[A-Za-z_0-9]",description:"[A-Za-z_0-9]"},ai=function(e){return e.join("")},ci={type:"other",description:"whitespace"},si=/^[ \t]/,ui={type:"class",value:"[ \\t]",description:"[ \\t]"},li={type:"other",description:"lineend"},di=/^[\r\n]/,pi={type:"class",value:"[\\r\\n]",description:"[\\r\\n]"},fi="/*",hi={type:"literal",value:"/*",description:'"/*"'},gi="*/",bi={type:"literal",value:"*/",description:'"*/"'},mi=function(e,t,r){return e+t.join("")+r},yi="//",vi={type:"literal",value:"//",description:'"//"'},xi="#",wi={type:"literal",value:"#",description:'"#"'},Ci=/^[^\r\n]/,ki={type:"class",value:"[^\\r\\n]",description:"[^\\r\\n]"},_i=function(e,t){return e+t.join("")},Ai={type:"other",description:"comment"},Ei={type:"other",description:"number"},Li=function(e){return e},Ti=function(e){return e.toString()},ji=function(e){return e.toString()},Ii=/^[0-9]/,Si={type:"class",value:"[0-9]",description:"[0-9]"},Di=function(e){return parseInt(e.join(""),10)},Ni=".",Bi={type:"literal",value:".",description:'"."'},Fi=function(e){return parseFloat(e.join(""))},Oi={type:"other",description:"boolean"},Hi=function(e){return e},Ri=function(e){return e.toString()},Wi="true",Mi={type:"literal",value:"true",description:'"true"'},Gi="false",qi={type:"literal",value:"false",description:'"false"'},zi="on",Xi={type:"literal",value:"on",description:'"on"'},Ui="off",Pi={type:"literal",value:"off",description:'"off"'},Vi="0",Ki={type:"literal",value:"0",description:'"0"'},$i="1",Zi={type:"literal",value:"1",description:'"1"'},Yi={type:"other",description:"size"},Ji=function(e){return e.toString()},Qi="auto",eo={type:"literal",value:"auto",description:'"auto"'},to=function(e){return e.toLowerCase()},ro=0,no=0,io=[{line:1,column:1,seenCR:!1}],oo=0,ao=[],co=0;if("startRule"in ve){if(!(ve.startRule in we))throw new Error("Can't start parsing from rule \""+ve.startRule+'".');Ce=we[ve.startRule]}if(ye=Ce(),ye!==xe&&ro===e.length)return ye;throw ye!==xe&&ro<e.length&&a({type:"end",description:"end of input"}),c(null,ao,oo<e.length?e.charAt(oo):null,oo<e.length?o(oo,oo+1):o(oo,oo))}return e(t,Error),{SyntaxError:t,parse:r}}),r("lib/mscgenjs-core/parse/msgennyparser",[],function(){"use strict";function e(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function t(e,r,n,i){this.message=e,this.expected=r,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}function r(e){function r(t){var r,n,i=pi[t];if(i)return i;for(r=t-1;!pi[r];)r--;for(i=pi[r],i={line:i.line,column:i.column,seenCR:i.seenCR};t>r;)n=e.charAt(r),"\n"===n?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):"\r"===n||"\u2028"===n||"\u2029"===n?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1),r++;return pi[t]=i,i}function n(e,t){var n=r(e),i=r(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:i.line,column:i.column}}}function i(e){fi>li||(li>fi&&(fi=li,hi=[]),hi.push(e))}function o(e,r,n,i){function o(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}function a(e,t){function r(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+t(e)})}var n,i,o,a=new Array(e.length);for(o=0;o<e.length;o++)a[o]=e[o].description;return n=e.length>1?a.slice(0,-1).join(", ")+" or "+a[e.length-1]:a[0],i=t?'"'+r(t)+'"':"end of input","Expected "+n+" but "+i+" found."}return null!==r&&o(r),new t(null!==e?e:a(r,n),r,n,i)}function a(){var e,t,r,n;return e=li,t=X(),t!==he?(r=c(),r!==he?(n=X(),n!==he?(di=e,t=me(t,r),e=t):(li=e,e=he)):(li=e,e=he)):(li=e,e=he),e}function c(){var e,t,r,n,i;return e=li,t=li,r=s(),r!==he&&(di=t,r=ye(r)),t=r,t===he&&(t=null),t!==he?(r=li,n=l(),n!==he&&(di=r,n=ve(n)),r=n,r===he&&(r=null),r!==he?(n=li,i=p(),i!==he&&(di=n,i=xe(i)),n=i,n===he&&(n=null),n!==he?(t=[t,r,n],e=t):(li=e,e=he)):(li=e,e=he)):(li=e,e=he),e}function s(){var t,r,n,o,a,c;for(t=li,r=li,n=[],o=li,a=u(),a!==he?(44===e.charCodeAt(li)?(c=we,li++):(c=he,0===gi&&i(Ce)),c!==he?(di=o,a=ke(a),o=a):(li=o,o=he)):(li=o,o=he);o!==he;)n.push(o),o=li,a=u(),a!==he?(44===e.charCodeAt(li)?(c=we,li++):(c=he,0===gi&&i(Ce)),c!==he?(di=o,a=ke(a),o=a):(li=o,o=he)):(li=o,o=he);return n!==he?(o=li,a=u(),a!==he?(59===e.charCodeAt(li)?(c=_e,li++):(c=he,0===gi&&i(Ae)),c!==he?(di=o,a=ke(a),o=a):(li=o,o=he)):(li=o,o=he),o!==he?(n=[n,o],r=n):(li=r,r=he)):(li=r,r=he),r!==he&&(di=t,r=Ee(r)),t=r}function u(){var t,r,n,o,a,c,s,u;return t=li,r=X(),r!==he?(e.substr(li,6).toLowerCase()===Le?(n=e.substr(li,6),li+=6):(n=he,0===gi&&i(Te)),n===he&&(e.substr(li,11).toLowerCase()===je?(n=e.substr(li,11),li+=11):(n=he,0===gi&&i(Ie))),n!==he?(o=X(),o!==he?(61===e.charCodeAt(li)?(a=Se,li++):(a=he,0===gi&&i(De)),a!==he?(c=X(),c!==he?(s=U(),s!==he?(u=X(),u!==he?(di=t,r=Ne(n,s),t=r):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he),t===he&&(t=li,r=X(),r!==he?(e.substr(li,5).toLowerCase()===Be?(n=e.substr(li,5),li+=5):(n=he,0===gi&&i(Fe)),n!==he?(o=X(),o!==he?(61===e.charCodeAt(li)?(a=Se,li++):(a=he,0===gi&&i(De)),a!==he?(c=X(),c!==he?(s=Q(),s!==he?(u=X(),u!==he?(di=t,r=Ne(n,s),t=r):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he),t===he&&(t=li,r=X(),r!==he?(e.substr(li,12).toLowerCase()===Oe?(n=e.substr(li,12),li+=12):(n=he,0===gi&&i(He)),n!==he?(o=X(),o!==he?(61===e.charCodeAt(li)?(a=Se,li++):(a=he,0===gi&&i(De)),a!==he?(c=X(),c!==he?(s=Z(),s!==he?(u=X(),u!==he?(di=t,r=Re(n,s),t=r):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he),t===he&&(t=li,r=X(),r!==he?(e.substr(li,9).toLowerCase()===We?(n=e.substr(li,9),li+=9):(n=he,0===gi&&i(Me)),n!==he?(o=X(),o!==he?(61===e.charCodeAt(li)?(a=Se,li++):(a=he,0===gi&&i(De)),a!==he?(c=X(),c!==he?(s=j(),s!==he?(u=X(),u!==he?(di=t,r=Ne(n,s),t=r):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)))),t}function l(){var t,r,n,o,a,c;for(t=li,r=li,n=[],o=li,a=d(),a!==he?(44===e.charCodeAt(li)?(c=we,li++):(c=he,0===gi&&i(Ce)),c!==he?(di=o,a=Ge(a),o=a):(li=o,o=he)):(li=o,o=he);o!==he;)n.push(o),o=li,a=d(),a!==he?(44===e.charCodeAt(li)?(c=we,li++):(c=he,0===gi&&i(Ce)),c!==he?(di=o,a=Ge(a),o=a):(li=o,o=he)):(li=o,o=he);return n!==he?(o=li,a=d(),a!==he?(59===e.charCodeAt(li)?(c=_e,li++):(c=he,0===gi&&i(Ae)),c!==he?(di=o,a=Ge(a),o=a):(li=o,o=he)):(li=o,o=he),o!==he?(n=[n,o],r=n):(li=r,r=he)):(li=r,r=he),r!==he&&(di=t,r=qe(r)),t=r}function d(){var t,r,n,o,a,c,s,u,l;return gi++,t=li,r=X(),r!==he?(n=N(),n!==he?(o=X(),o!==he?(a=li,58===e.charCodeAt(li)?(c=Xe,li++):(c=he,0===gi&&i(Ue)),c!==he?(s=X(),s!==he?(u=T(),u!==he?(l=X(),l!==he?(di=a,c=Pe(n,u),a=c):(li=a,a=he)):(li=a,a=he)):(li=a,a=he)):(li=a,a=he),a===he&&(a=null),a!==he?(di=t,r=Ve(n,a),t=r):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he),gi--,t===he&&(r=he,0===gi&&i(ze)),t}function p(){var t,r,n,o,a;if(t=[],r=li,n=f(),n!==he?(o=X(),o!==he?(59===e.charCodeAt(li)?(a=_e,li++):(a=he,0===gi&&i(Ae)),a!==he?(di=r,n=Ke(n),r=n):(li=r,r=he)):(li=r,r=he)):(li=r,r=he),r!==he)for(;r!==he;)t.push(r),r=li,n=f(),n!==he?(o=X(),o!==he?(59===e.charCodeAt(li)?(a=_e,li++):(a=he,0===gi&&i(Ae)),a!==he?(di=r,n=Ke(n),r=n):(li=r,r=he)):(li=r,r=he)):(li=r,r=he);else t=he;return t}function f(){var t,r,n,o,a,c;for(t=li,r=li,n=[],o=li,a=h(),a!==he?(44===e.charCodeAt(li)?(c=we,li++):(c=he,0===gi&&i(Ce)),c!==he?(di=o,a=Ke(a),o=a):(li=o,o=he)):(li=o,o=he);o!==he;)n.push(o),o=li,a=h(),a!==he?(44===e.charCodeAt(li)?(c=we,li++):(c=he,0===gi&&i(Ce)),c!==he?(di=o,a=Ke(a),o=a):(li=o,o=he)):(li=o,o=he);return n!==he?(o=li,a=h(),a!==he&&(di=o,a=$e(a)),o=a,o!==he?(n=[n,o],r=n):(li=r,r=he)):(li=r,r=he),r!==he&&(di=t,r=Ze(r)),t=r}function h(){var e;return e=g(),e===he&&(e=v()),e}function g(){var t,r,n,o,a,c,s;return t=li,r=li,n=b(),n!==he&&(di=r,n=Ye(n)),r=n,r===he&&(r=li,n=y(),n!==he&&(di=r,n=Je(n)),r=n,r===he&&(r=li,n=m(),n!==he&&(di=r,n=Qe(n)),r=n)),r!==he?(n=li,58===e.charCodeAt(li)?(o=Xe,li++):(o=he,0===gi&&i(Ue)),o!==he?(a=X(),a!==he?(c=T(),c!==he?(s=X(),s!==he?(di=n,o=et(r,c),n=o):(li=n,n=he)):(li=n,n=he)):(li=n,n=he)):(li=n,n=he),n===he&&(n=null),n!==he?(di=t,r=tt(r,n),t=r):(li=t,t=he)):(li=t,t=he),t}function b(){var e,t,r,n;return e=li,t=X(),t!==he?(r=x(),r!==he?(n=X(),n!==he?(di=e,t=rt(r),e=t):(li=e,e=he)):(li=e,e=he)):(li=e,e=he),e}function m(){var e,t,r,n;return e=li,t=X(),t!==he?(r=w(),r!==he?(n=X(),n!==he?(di=e,t=rt(r),e=t):(li=e,e=he)):(li=e,e=he)):(li=e,e=he),e}function y(){var t,r,n,o,a,c,s,u;return t=li,r=X(),r!==he?(n=N(),n!==he?(o=X(),o!==he?(a=C(),a!==he?(c=X(),c!==he?(s=N(),s!==he?(u=X(),u!==he?(di=t,r=nt(n,a,s),t=r):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he),t===he&&(t=li,r=X(),r!==he?(42===e.charCodeAt(li)?(n=it,li++):(n=he,0===gi&&i(ot)),n!==he?(o=X(),o!==he?(a=A(),a!==he?(c=X(),c!==he?(s=N(),s!==he?(u=X(),u!==he?(di=t,r=at(a,s),t=r):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he),t===he&&(t=li,r=X(),r!==he?(n=N(),n!==he?(o=X(),o!==he?(a=_(),a!==he?(c=X(),c!==he?(42===e.charCodeAt(li)?(s=it,li++):(s=he,0===gi&&i(ot)),s!==he?(u=X(),u!==he?(di=t,r=ct(n,a),t=r):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he),t===he&&(t=li,r=X(),r!==he?(n=N(),n!==he?(o=X(),o!==he?(a=k(),a!==he?(c=X(),c!==he?(42===e.charCodeAt(li)?(s=it,li++):(s=he,0===gi&&i(ot)),s!==he?(u=X(),u!==he?(di=t,r=ct(n,a),t=r):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)))),t}function v(){var t,r,n,o,a,c,s,u,l,d,f,h,g,b,m;return t=li,r=X(),r!==he?(n=N(),n!==he?(o=X(),o!==he?(a=L(),a!==he?(c=X(),c!==he?(s=N(),s!==he?(u=X(),u!==he?(l=li,58===e.charCodeAt(li)?(d=Xe,li++):(d=he,0===gi&&i(Ue)),d!==he?(f=X(),f!==he?(h=T(),h!==he?(g=X(),g!==he?(di=l,d=st(n,a,s,h),l=d):(li=l,l=he)):(li=l,l=he)):(li=l,l=he)):(li=l,l=he),l===he&&(l=null),l!==he?(123===e.charCodeAt(li)?(d=ut,li++):(d=he,0===gi&&i(lt)),d!==he?(f=X(),f!==he?(h=p(),h===he&&(h=null),h!==he?(g=X(),g!==he?(125===e.charCodeAt(li)?(b=dt,li++):(b=he,0===gi&&i(pt)),b!==he?(m=X(),m!==he?(di=t,r=ft(n,a,s,l,h),t=r):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he)):(li=t,t=he),t}function x(){var t,r;return gi++,e.substr(li,3)===gt?(t=gt,li+=3):(t=he,0===gi&&i(bt)),t===he&&(e.substr(li,3)===mt?(t=mt,li+=3):(t=he,0===gi&&i(yt))),gi--,t===he&&(r=he,0===gi&&i(ht)),t}function w(){var t,r;return gi++,e.substr(li,3)===xt?(t=xt,li+=3):(t=he,0===gi&&i(wt)),gi--,t===he&&(r=he,0===gi&&i(vt)),t}function C(){var e,t;return e=li,t=k(),t===he&&(t=_(),t===he&&(t=A(),t===he&&(t=E()))),t!==he&&(di=e,t=Ct(t)),e=t}function k(){var t,r;return gi++,e.substr(li,2)===_t?(t=_t,li+=2):(t=he,0===gi&&i(At)),t===he&&(e.substr(li,3)===Et?(t=Et,li+=3):(t=he,0===gi&&i(Lt)),t===he&&(e.substr(li,2)===Tt?(t=Tt,li+=2):(t=he,0===gi&&i(jt)),t===he&&(e.substr(li,5)===It?(t=It,li+=5):(t=he,0===gi&&i(St)),t===he&&(e.substr(li,3)===Dt?(t=Dt,li+=3):(t=he,0===gi&&i(Nt)),t===he&&(e.substr(li,2)===Bt?(t=Bt,li+=2):(t=he,0===gi&&i(Ft)),t===he&&(e.substr(li,4)===Ot?(t=Ot,li+=4):(t=he,0===gi&&i(Ht)),t===he&&(e.substr(li,2)===Rt?(t=Rt,li+=2):(t=he,0===gi&&i(Wt)),t===he&&(e.substr(li,3)===Mt?(t=Mt,li+=3):(t=he,0===gi&&i(Gt)))))))))),gi--,t===he&&(r=he,0===gi&&i(kt)),t}function _(){var t,r;return gi++,e.substr(li,2)===zt?(t=zt,li+=2):(t=he,0===gi&&i(Xt)),t===he&&(e.substr(li,3)===Ut?(t=Ut,li+=3):(t=he,0===gi&&i(Pt)),t===he&&(e.substr(li,2)===Vt?(t=Vt,li+=2):(t=he,0===gi&&i(Kt)),t===he&&(e.substr(li,2)===$t?(t=$t,li+=2):(t=he,0===gi&&i(Zt)),t===he&&(e.substr(li,2)===Yt?(t=Yt,li+=2):(t=he,0===gi&&i(Jt)),t===he&&(e.substr(li,2).toLowerCase()===Qt?(t=e.substr(li,2),li+=2):(t=he,0===gi&&i(er))))))),gi--,t===he&&(r=he,0===gi&&i(qt)),t}function A(){var t,r;return gi++,e.substr(li,2)===rr?(t=rr,li+=2):(t=he,0===gi&&i(nr)),t===he&&(e.substr(li,3)===ir?(t=ir,li+=3):(t=he,0===gi&&i(or)),t===he&&(e.substr(li,2)===ar?(t=ar,li+=2):(t=he,0===gi&&i(cr)),t===he&&(e.substr(li,2)===sr?(t=sr,li+=2):(t=he,0===gi&&i(ur)),t===he&&(e.substr(li,2)===lr?(t=lr,li+=2):(t=he,0===gi&&i(dr)),t===he&&(e.substr(li,2).toLowerCase()===pr?(t=e.substr(li,2),li+=2):(t=he,0===gi&&i(fr))))))),gi--,t===he&&(r=he,0===gi&&i(tr)),t}function E(){var t,r;return gi++,e.substr(li,4).toLowerCase()===gr?(t=e.substr(li,4),li+=4):(t=he,0===gi&&i(br)),t===he&&(e.substr(li,4).toLowerCase()===mr?(t=e.substr(li,4),li+=4):(t=he,0===gi&&i(yr)),t===he&&(e.substr(li,4).toLowerCase()===vr?(t=e.substr(li,4),li+=4):(t=he,0===gi&&i(xr)),t===he&&(e.substr(li,3).toLowerCase()===wr?(t=e.substr(li,3),li+=3):(t=he,0===gi&&i(Cr))))),gi--,t===he&&(r=he,0===gi&&i(hr)),t}function L(){var t,r;return gi++,t=li,e.substr(li,3).toLowerCase()===_r?(r=e.substr(li,3),li+=3):(r=he,0===gi&&i(Ar)),r===he&&(e.substr(li,4).toLowerCase()===Er?(r=e.substr(li,4),li+=4):(r=he,0===gi&&i(Lr)),r===he&&(e.substr(li,3).toLowerCase()===Tr?(r=e.substr(li,3),li+=3):(r=he,0===gi&&i(jr)),r===he&&(e.substr(li,5).toLowerCase()===Ir?(r=e.substr(li,5),li+=5):(r=he,0===gi&&i(Sr)),r===he&&(e.substr(li,3).toLowerCase()===Dr?(r=e.substr(li,3),li+=3):(r=he,0===gi&&i(Nr)),r===he&&(e.substr(li,3).toLowerCase()===Br?(r=e.substr(li,3),li+=3):(r=he,0===gi&&i(Fr)),r===he&&(e.substr(li,6).toLowerCase()===Or?(r=e.substr(li,6),li+=6):(r=he,0===gi&&i(Hr)),r===he&&(e.substr(li,3).toLowerCase()===Rr?(r=e.substr(li,3),li+=3):(r=he,0===gi&&i(Wr)),r===he&&(e.substr(li,8).toLowerCase()===Mr?(r=e.substr(li,8),li+=8):(r=he,0===gi&&i(Gr)),r===he&&(e.substr(li,6).toLowerCase()===qr?(r=e.substr(li,6),li+=6):(r=he,0===gi&&i(zr)),r===he&&(e.substr(li,8).toLowerCase()===Xr?(r=e.substr(li,8),li+=8):(r=he,0===gi&&i(Ur)),r===he&&(e.substr(li,6).toLowerCase()===Pr?(r=e.substr(li,6),li+=6):(r=he,0===gi&&i(Vr)),r===he&&(e.substr(li,4).toLowerCase()===Kr?(r=e.substr(li,4),li+=4):(r=he,0===gi&&i($r)),r===he&&(e.substr(li,3).toLowerCase()===Zr?(r=e.substr(li,3),li+=3):(r=he,0===gi&&i(Yr)),r===he&&(e.substr(li,3).toLowerCase()===Jr?(r=e.substr(li,3),li+=3):(r=he,0===gi&&i(Qr)))))))))))))))),r!==he&&(di=t,r=en(r)),t=r,gi--,t===he&&(r=he,0===gi&&i(kr)),t}function T(){var e;return e=j(),e===he&&(e=S()),e}function j(){var t,r,n,o;return gi++,t=li,34===e.charCodeAt(li)?(r=rn,li++):(r=he,0===gi&&i(nn)),r!==he?(n=I(),n!==he?(34===e.charCodeAt(li)?(o=rn,li++):(o=he,0===gi&&i(nn)),o!==he?(di=t,r=on(n),t=r):(li=t,t=he)):(li=t,t=he)):(li=t,t=he),gi--,t===he&&(r=he,0===gi&&i(tn)),t}function I(){var t,r,n,o;for(t=[],r=li,n=li,gi++,34===e.charCodeAt(li)?(o=rn,li++):(o=he,0===gi&&i(nn)),gi--,o===he?n=void 0:(li=n,n=he),n!==he?(e.substr(li,2)===an?(o=an,li+=2):(o=he,0===gi&&i(cn)),o===he&&(e.length>li?(o=e.charAt(li),li++):(o=he,0===gi&&i(sn))),o!==he?(di=r,n=un(o),r=n):(li=r,r=he)):(li=r,r=he);r!==he;)t.push(r),r=li,n=li,gi++,34===e.charCodeAt(li)?(o=rn,li++):(o=he,0===gi&&i(nn)),gi--,o===he?n=void 0:(li=n,n=he),n!==he?(e.substr(li,2)===an?(o=an,li+=2):(o=he,0===gi&&i(cn)),o===he&&(e.length>li?(o=e.charAt(li),li++):(o=he,0===gi&&i(sn))),o!==he?(di=r,n=un(o),r=n):(li=r,r=he)):(li=r,r=he);return t}function S(){var e,t;return e=li,t=D(),t!==he&&(di=e,t=ln(t)),e=t}function D(){var t,r,n,o;for(t=[],r=li,n=li,gi++,44===e.charCodeAt(li)?(o=we,li++):(o=he,0===gi&&i(Ce)),o===he&&(59===e.charCodeAt(li)?(o=_e,li++):(o=he,0===gi&&i(Ae)),o===he&&(123===e.charCodeAt(li)?(o=ut,li++):(o=he,0===gi&&i(lt)))),gi--,o===he?n=void 0:(li=n,n=he),n!==he?(e.length>li?(o=e.charAt(li),li++):(o=he,0===gi&&i(sn)),o!==he?(di=r,n=un(o),r=n):(li=r,r=he)):(li=r,r=he);r!==he;)t.push(r),r=li,n=li,gi++,44===e.charCodeAt(li)?(o=we,li++):(o=he,0===gi&&i(Ce)),o===he&&(59===e.charCodeAt(li)?(o=_e,li++):(o=he,0===gi&&i(Ae)),o===he&&(123===e.charCodeAt(li)?(o=ut,li++):(o=he,0===gi&&i(lt)))),gi--,o===he?n=void 0:(li=n,n=he),n!==he?(e.length>li?(o=e.charAt(li),li++):(o=he,0===gi&&i(sn)),o!==he?(di=r,n=un(o),r=n):(li=r,r=he)):(li=r,r=he);return t}function N(){var t,r,n;if(gi++,t=li,r=[],pn.test(e.charAt(li))?(n=e.charAt(li),li++):(n=he,0===gi&&i(fn)),n!==he)for(;n!==he;)r.push(n),pn.test(e.charAt(li))?(n=e.charAt(li),li++):(n=he,0===gi&&i(fn));else r=he;return r!==he&&(di=t,r=hn(r)),t=r,t===he&&(t=j()),gi--,t===he&&(r=he,0===gi&&i(dn)),t}function B(){var t,r;return gi++,t=li,bn.test(e.charAt(li))?(r=e.charAt(li),li++):(r=he,0===gi&&i(mn)),r!==he&&(di=t,r=un(r)),t=r,gi--,t===he&&(r=he,0===gi&&i(gn)),t}function F(){var t,r;return gi++,t=li,vn.test(e.charAt(li))?(r=e.charAt(li),li++):(r=he,0===gi&&i(xn)),r!==he&&(di=t,r=un(r)),t=r,gi--,t===he&&(r=he,0===gi&&i(yn)),t}function O(){var t;return e.substr(li,2)===wn?(t=wn,li+=2):(t=he,0===gi&&i(Cn)),t}function H(){var t;return e.substr(li,2)===kn?(t=kn,li+=2):(t=he,0===gi&&i(_n)),t}function R(){var t,r,n;return t=li,r=li,gi++,e.substr(li,2)===kn?(n=kn,li+=2):(n=he,0===gi&&i(_n)),gi--,n===he?r=void 0:(li=r,r=he),r!==he?(e.length>li?(n=e.charAt(li),li++):(n=he,0===gi&&i(sn)),n!==he?(di=t,r=un(n),t=r):(li=t,t=he)):(li=t,t=he),t}function W(){var e,t,r,n;if(e=li,t=O(),t!==he){for(r=[],n=R();n!==he;)r.push(n),n=R();r!==he?(n=H(),n!==he?(di=e,t=An(t,r,n),e=t):(li=e,e=he)):(li=e,e=he)}else li=e,e=he;return e}function M(){var t;return e.substr(li,2)===En?(t=En,li+=2):(t=he,0===gi&&i(Ln)),t===he&&(35===e.charCodeAt(li)?(t=Tn,li++):(t=he,0===gi&&i(jn))),t}function G(){var t;return In.test(e.charAt(li))?(t=e.charAt(li),li++):(t=he,0===gi&&i(Sn)),t}function q(){var e,t,r,n;if(e=li,t=M(),t!==he){for(r=[],n=G();n!==he;)r.push(n),n=G();r!==he?(di=e,t=Dn(t,r),e=t):(li=e,e=he)}else li=e,e=he;return e}function z(){var e,t;return gi++,e=q(),e===he&&(e=W()),gi--,e===he&&(t=he,0===gi&&i(Nn)),e}function X(){var e,t;for(e=[],t=B(),t===he&&(t=F(),t===he&&(t=z()));t!==he;)e.push(t),t=B(),t===he&&(t=F(),t===he&&(t=z()));return e}function U(){var e,t;return gi++,e=li,t=P(),t!==he&&(di=e,t=Fn(t)),e=t,e===he&&(e=li,t=V(),t!==he&&(di=e,t=On(t)),e=t),gi--,e===he&&(t=he,0===gi&&i(Bn)),e}function P(){var t,r,n,o;return t=li,34===e.charCodeAt(li)?(r=rn,li++):(r=he,0===gi&&i(nn)),r!==he?(n=V(),n!==he?(34===e.charCodeAt(li)?(o=rn,li++):(o=he,0===gi&&i(nn)),o!==he?(di=t,r=Hn(n),t=r):(li=t,t=he)):(li=t,t=he)):(li=t,t=he),t}function V(){var e;return e=$(),e===he&&(e=K()),e}function K(){var t,r,n;if(t=li,r=[],Rn.test(e.charAt(li))?(n=e.charAt(li),li++):(n=he,0===gi&&i(Wn)),n!==he)for(;n!==he;)r.push(n),Rn.test(e.charAt(li))?(n=e.charAt(li),li++):(n=he,0===gi&&i(Wn));else r=he;return r!==he&&(di=t,r=Mn(r)),t=r}function $(){var t,r,n,o,a;return t=li,r=li,n=K(),n!==he?(46===e.charCodeAt(li)?(o=Gn,li++):(o=he,0===gi&&i(qn)),o!==he?(a=K(),a!==he?(n=[n,o,a],r=n):(li=r,r=he)):(li=r,r=he)):(li=r,r=he),r!==he&&(di=t,r=zn(r)),t=r}function Z(){var e,t;return gi++,e=li,t=Y(),t!==he&&(di=e,t=Un(t)),e=t,e===he&&(e=li,t=J(),t!==he&&(di=e,t=Pn(t)),e=t),gi--,e===he&&(t=he,0===gi&&i(Xn)),e}function Y(){var t,r,n,o;return t=li,34===e.charCodeAt(li)?(r=rn,li++):(r=he,0===gi&&i(nn)),r!==he?(n=J(),n!==he?(34===e.charCodeAt(li)?(o=rn,li++):(o=he,0===gi&&i(nn)),o!==he?(di=t,r=Fn(n),t=r):(li=t,t=he)):(li=t,t=he)):(li=t,t=he),t}function J(){var t;return e.substr(li,4).toLowerCase()===Vn?(t=e.substr(li,4),li+=4):(t=he,0===gi&&i(Kn)),t===he&&(e.substr(li,5).toLowerCase()===$n?(t=e.substr(li,5),li+=5):(t=he,0===gi&&i(Zn)),t===he&&(e.substr(li,2).toLowerCase()===Yn?(t=e.substr(li,2),li+=2):(t=he,0===gi&&i(Jn)),t===he&&(e.substr(li,3).toLowerCase()===Qn?(t=e.substr(li,3),li+=3):(t=he,0===gi&&i(ei)),t===he&&(48===e.charCodeAt(li)?(t=ti,li++):(t=he,0===gi&&i(ri)),t===he&&(49===e.charCodeAt(li)?(t=ni,li++):(t=he,0===gi&&i(ii))))))),t}function Q(){var e,t;return gi++,e=ee(),e===he&&(e=te()),gi--,e===he&&(t=he,0===gi&&i(oi)),e}function ee(){var t,r,n,o;return t=li,34===e.charCodeAt(li)?(r=rn,li++):(r=he,0===gi&&i(nn)),r!==he?(n=te(),n!==he?(34===e.charCodeAt(li)?(o=rn,li++):(o=he,0===gi&&i(nn)),o!==he?(di=t,r=Fn(n),t=r):(li=t,t=he)):(li=t,t=he)):(li=t,t=he),t}function te(){var t,r;return t=li,r=V(),r!==he&&(di=t,r=ai(r)),t=r,t===he&&(t=li,e.substr(li,4).toLowerCase()===ci?(r=e.substr(li,4),li+=4):(r=he,0===gi&&i(si)),r!==he&&(di=t,r=ui(r)),t=r),t}function re(e,t){return e=e||{},t&&Object.getOwnPropertyNames(t).forEach(function(r){e[r]=t[r]}),e}function ne(e){var t={};return e[0].forEach(function(e){t=re(t,e)}),re(t,e[1])}function ie(e){return["true","on","1"].indexOf(e.toLowerCase())>-1}function oe(e,t){var r={};return r[e.toLowerCase()]=t,r}function ae(e,t,r){return void 0===t||"*"===t?!0:e.entities.some(function(e){return e.name===t})?!0:r[t]===!0}function ce(e){var t={};return t.name=e,t}function se(e,t,r){return e||(e={},e.entities=[]),r||(r={}),t&&t.arcs&&t.arcs.forEach(function(t){t.forEach(function(t){ae(e,t.from,r)||(e.entities[e.entities.length]=ce(t.from)),t.arcs&&(r[t.to]=!0,re(e,se(e,t,r)),delete r[t.to]),ae(e,t.to,r)||(e.entities[e.entities.length]=ce(t.to))})}),e}function ue(e){return e&&e.options?!!e.options.watermark||!!e.options.width&&"auto"===e.options.width:!1}function le(e){return e&&e.arcs?e.arcs.some(function(e){return e.some(function(e){return["alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"].indexOf(e.kind)>-1})}):!1}function de(e,t){var r=ue(e),n=le(t);return{extendedOptions:r,extendedArcTypes:n,extendedFeatures:r||n}}var pe,fe=arguments.length>1?arguments[1]:{},he={},ge={program:a},be=a,me=function(e,t){t[1]=se(t[1],t[2]);var r=re(t[0],re(t[1],t[2]));return r=re({meta:de(t[0],t[2])},r),e.length>0&&(r=re({precomment:e},r)),r},ye=function(e){return{options:e}},ve=function(e){return{entities:e}},xe=function(e){return{arcs:e}},we=",",Ce={type:"literal",value:",",description:'","'},ke=function(e){return e},_e=";",Ae={type:"literal",value:";",description:'";"'},Ee=function(e){return ne(e)},Le="hscale",Te={type:"literal",value:"hscale",description:'"hscale"'},je="arcgradient",Ie={type:"literal",value:"arcgradient",description:'"arcgradient"'},Se="=",De={type:"literal",value:"=",description:'"="'},Ne=function(e,t){return oe(e,t)},Be="width",Fe={type:"literal",value:"width",description:'"width"'},Oe="wordwraparcs",He={type:"literal",value:"wordwraparcs",description:'"wordwraparcs"'},Re=function(e,t){var r={};return r[e.toLowerCase()]=ie(t),r},We="watermark",Me={type:"literal",value:"watermark",description:'"watermark"'},Ge=function(e){return e},qe=function(e){return e[0].push(e[1]),e[0]},ze={type:"other",description:"entity"},Xe=":",Ue={type:"literal",value:":",description:'":"'},Pe=function(e,t){return t},Ve=function(e,t){var r={};return r.name=e,t&&(r.label=t),r},Ke=function(e){return e},$e=function(e){return[e]},Ze=function(e){return e[0].push(e[1][0]),e[0]},Ye=function(e){return e},Je=function(e){return e},Qe=function(e){return e},et=function(e,t){return t},tt=function(e,t){return t&&(e.label=t),e},rt=function(e){return{kind:e}},nt=function(e,t,r){return{kind:t,from:e,to:r}},it="*",ot={type:"literal",value:"*",description:'"*"'},at=function(e,t){return{kind:e,from:"*",to:t}},ct=function(e,t){return{kind:t,from:e,to:"*"}},st=function(e,t,r,n){return n},ut="{",lt={type:"literal",value:"{",description:'"{"'},dt="}",pt={type:"literal",value:"}",description:'"}"'},ft=function(e,t,r,n,i){var o={kind:t,from:e,to:r,arcs:i};return n&&(o.label=n),o},ht={type:"other",description:"empty row"},gt="|||",bt={type:"literal",value:"|||",description:'"|||"'},mt="...",yt={type:"literal",value:"...",description:'"..."'},vt={type:"other",description:"---"},xt="---",wt={type:"literal",value:"---",description:'"---"'},Ct=function(e){return e.toLowerCase()},kt={type:"other",description:"bi-directional arrow"},_t="--",At={type:"literal",value:"--",description:'"--"'},Et="<->",Lt={type:"literal",value:"<->",description:'"<->"'},Tt="==",jt={type:"literal",value:"==",description:'"=="'},It="<<=>>",St={type:"literal",value:"<<=>>",description:'"<<=>>"'},Dt="<=>",Nt={type:"literal",value:"<=>",description:'"<=>"'},Bt="..",Ft={type:"literal",value:"..",description:'".."'},Ot="<<>>",Ht={type:"literal",value:"<<>>",description:'"<<>>"'},Rt="::",Wt={type:"literal",value:"::",description:'"::"'},Mt="<:>",Gt={type:"literal",value:"<:>",description:'"<:>"'},qt={type:"other",description:"left to right arrow"},zt="->",Xt={type:"literal",value:"->",description:'"->"'},Ut="=>>",Pt={type:"literal",value:"=>>",description:'"=>>"'},Vt="=>",Kt={type:"literal",value:"=>",description:'"=>"'},$t=">>",Zt={type:"literal",value:">>",description:'">>"'},Yt=":>",Jt={type:"literal",value:":>",description:'":>"'},Qt="-x",er={type:"literal",value:"-x",description:'"-x"'},tr={type:"other",description:"right to left arrow"},rr="<-",nr={type:"literal",value:"<-",description:'"<-"'},ir="<<=",or={type:"literal",value:"<<=",description:'"<<="'},ar="<=",cr={type:"literal",value:"<=",description:'"<="'},sr="<<",ur={type:"literal",value:"<<",description:'"<<"'},lr="<:",dr={type:"literal",value:"<:",description:'"<:"'},pr="x-",fr={type:"literal",value:"x-",description:'"x-"'},hr={type:"other",description:"box"},gr="note",br={type:"literal",value:"note",description:'"note"'},mr="abox",yr={type:"literal",value:"abox",description:'"abox"'},vr="rbox",xr={type:"literal",value:"rbox",description:'"rbox"'},wr="box",Cr={type:"literal",value:"box",description:'"box"'},kr={type:"other",description:"inline expression"},_r="alt",Ar={type:"literal",value:"alt",description:'"alt"'},Er="else",Lr={type:"literal",value:"else",description:'"else"'},Tr="opt",jr={type:"literal",value:"opt",description:'"opt"'},Ir="break",Sr={type:"literal",value:"break",description:'"break"'},Dr="par",Nr={type:"literal",value:"par",description:'"par"'},Br="seq",Fr={type:"literal",value:"seq",description:'"seq"'},Or="strict",Hr={type:"literal",value:"strict",description:'"strict"'},Rr="neg",Wr={type:"literal",value:"neg",description:'"neg"'},Mr="critical",Gr={type:"literal",value:"critical",description:'"critical"'},qr="ignore",zr={type:"literal",value:"ignore",description:'"ignore"'},Xr="consider",Ur={type:"literal",value:"consider",description:'"consider"'},Pr="assert",Vr={type:"literal",value:"assert",description:'"assert"'},Kr="loop",$r={type:"literal",value:"loop",description:'"loop"'},Zr="ref",Yr={type:"literal",value:"ref",description:'"ref"'},Jr="exc",Qr={type:"literal",value:"exc",description:'"exc"'},en=function(e){return e.toLowerCase()},tn={type:"other",description:"double quoted string"},rn='"',nn={type:"literal",value:'"',description:'"\\""'},on=function(e){return e.join("")},an='\\"',cn={type:"literal",value:'\\"',description:'"\\\\\\""'},sn={type:"any",description:"any character"},un=function(e){return e},ln=function(e){return e.join("").trim()},dn={type:"other",description:"identifier"},pn=/^[^;, "\t\n\r=\-><:{*]/,fn={type:"class",value:'[^;, \\"\\t\\n\\r=\\-><:\\{\\*]',description:'[^;, \\"\\t\\n\\r=\\-><:\\{\\*]'},hn=function(e){return e.join("")},gn={type:"other",description:"whitespace"},bn=/^[ \t]/,mn={type:"class",value:"[ \\t]",description:"[ \\t]"},yn={type:"other",description:"lineend"},vn=/^[\r\n]/,xn={type:"class",value:"[\\r\\n]",description:"[\\r\\n]"},wn="/*",Cn={type:"literal",value:"/*",description:'"/*"'},kn="*/",_n={type:"literal",value:"*/",description:'"*/"'},An=function(e,t,r){return e+t.join("")+r},En="//",Ln={type:"literal",value:"//",description:'"//"'},Tn="#",jn={type:"literal",value:"#",description:'"#"'},In=/^[^\r\n]/,Sn={type:"class",value:"[^\\r\\n]",description:"[^\\r\\n]"},Dn=function(e,t){return e+t.join("")},Nn={type:"other",description:"comment"},Bn={type:"other",description:"number"},Fn=function(e){return e},On=function(e){return e.toString()},Hn=function(e){return e.toString()},Rn=/^[0-9]/,Wn={type:"class",value:"[0-9]",description:"[0-9]"},Mn=function(e){return parseInt(e.join(""),10)},Gn=".",qn={type:"literal",value:".",description:'"."'},zn=function(e){return parseFloat(e.join(""))},Xn={type:"other",description:"boolean"},Un=function(e){return e},Pn=function(e){return e.toString()},Vn="true",Kn={type:"literal",value:"true",description:'"true"'},$n="false",Zn={type:"literal",value:"false",description:'"false"'},Yn="on",Jn={type:"literal",value:"on",description:'"on"'},Qn="off",ei={type:"literal",value:"off",description:'"off"'},ti="0",ri={type:"literal",value:"0",description:'"0"'},ni="1",ii={type:"literal",value:"1",description:'"1"'},oi={type:"other",description:"size"},ai=function(e){return e.toString()},ci="auto",si={type:"literal",value:"auto",description:'"auto"'},ui=function(e){return e.toLowerCase()},li=0,di=0,pi=[{line:1,column:1,seenCR:!1}],fi=0,hi=[],gi=0;if("startRule"in fe){if(!(fe.startRule in ge))throw new Error("Can't start parsing from rule \""+fe.startRule+'".');be=ge[fe.startRule]}if(pe=be(),pe!==he&&li===e.length)return pe;throw pe!==he&&li<e.length&&i({type:"end",description:"end of input"}),o(null,hi,fi<e.length?e.charAt(fi):null,fi<e.length?n(fi,fi+1):n(fi,fi))}return e(t,Error),{SyntaxError:t,parse:r}}),r("lib/mscgenjs-core/render/graphics/constants",[],function(){"use strict";return{SVGNS:"http://www.w3.org/2000/svg",XLINKNS:"http://www.w3.org/1999/xlink",LINE_WIDTH:2,FONT_SIZE:12}}),r("lib/mscgenjs-core/render/graphics/svglowlevelfactory",["./constants"],function(e){"use strict";function t(e,t,r){return r&&e.setAttribute(t,r),e}function r(e,r){return r&&Object.keys(r).forEach(function(n){t(e,n,r[n])}),e}function n(t,n){return r(i.createElementNS(e.SVGNS,t),n)}var i={};return{init:function(e){i=e},setAttribute:t,setAttributes:r,createElement:n}}),r("lib/mscgenjs-core/render/graphics/geometry",[],function(){"use strict";function e(e){return 360*e/(2*Math.PI)}function t(e){var t=Math.abs(e.xTo-e.xFrom),r=Math.abs(e.yTo-e.yFrom);return Math.sqrt(t*t+r*r)}function r(e,r){var n=t(e);return n>0?Math.floor(n/r):0}function n(e){var t=e.xTo>e.xFrom?1:-1;return{signX:t,signY:e.yTo>e.yFrom?1:-1,dy:t*(e.yTo-e.yFrom)/(e.xTo-e.xFrom)}}function i(e){return Math.round(2*Math.random()*e)-e}function o(e,o,a){if(0>=o)throw new Error("pInterval must be > 0");o=Math.min(t(e),o);for(var c=[],s=r(e,o),u=n(e),l=u.signX*Math.sqrt(Math.pow(o,2)/(1+Math.pow(u.dy,2))),d=u.signY*(Math.abs(u.dy)===1/0?o:Math.sqrt(Math.pow(u.dy,2)*Math.pow(o,2)/(1+Math.pow(u.dy,2)))),p={},f=1;s>=f;f++)p={controlX:e.xFrom+(f-.5)*l+i(a),controlY:e.yFrom+(f-.5)*d+i(a),x:e.xFrom+f*l,y:e.yFrom+f*d},o>t({xFrom:p.x,yFrom:p.y,xTo:e.xTo,yTo:e.yTo})&&(p.x=e.xTo,p.y=e.yTo),c.push(p);return c}return{getDiagonalAngle:function(t){return 0-e(Math.atan(t.height/t.width))},getDirection:n,getLineLength:t,getNumberOfSegments:r,getBetweenPoints:o}}),function(){function e(e,t){return e.set(t[0],t[1]),e}function t(e,t){return e.add(t),e}function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2]);
}return e.apply(t,r)}function i(e,t){for(var r=-1,n=e?e.length:0;++r<n&&t(e[r],r,e)!==!1;);return e}function o(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function a(e,t,r,n){var i=-1,o=e?e.length:0;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function c(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function s(e,t){return null==e?Me:e[t]}function u(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(r){}return t}function l(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function d(e,t){return function(r){return e(t(r))}}function p(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function f(){}function h(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function g(){this.__data__=tr?tr(null):{}}function b(e){return this.has(e)&&delete this.__data__[e]}function m(e){var t=this.__data__;if(tr){var r=t[e];return r===Xe?Me:r}return Ft.call(t,e)?t[e]:Me}function y(e){var t=this.__data__;return tr?t[e]!==Me:Ft.call(t,e)}function v(e,t){var r=this.__data__;return r[e]=tr&&t===Me?Xe:t,this}function x(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function w(){this.__data__=[]}function C(e){var t=this.__data__,r=G(t,e);if(0>r)return!1;var n=t.length-1;return r==n?t.pop():Xt.call(t,r,1),!0}function k(e){var t=this.__data__,r=G(t,e);return 0>r?Me:t[r][1]}function _(e){return G(this.__data__,e)>-1}function A(e,t){var r=this.__data__,n=G(r,e);return 0>n?r.push([e,t]):r[n][1]=t,this}function E(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function L(){this.__data__={hash:new h,map:new(Yt||x),string:new h}}function T(e){return de(this,e)["delete"](e)}function j(e){return de(this,e).get(e)}function I(e){return de(this,e).has(e)}function S(e,t){return de(this,e).set(e,t),this}function D(e){this.__data__=new x(e)}function N(){this.__data__=new x}function B(e){return this.__data__["delete"](e)}function F(e){return this.__data__.get(e)}function O(e){return this.__data__.has(e)}function H(e,t){var r=this.__data__;if(r instanceof x){var n=r.__data__;if(!Yt||n.length<qe-1)return n.push([e,t]),this;r=this.__data__=new E(n)}return r.set(e,t),this}function R(e,t){var r=dr(e)||Fe(e)||Te(e)?c(e.length,String):[],n=r.length,i=!!n;for(var o in e)!t&&!Ft.call(e,o)||i&&("length"==o||me(o,n))||r.push(o);return r}function W(e,t,r,n){return e===Me||Le(e,St[r])&&!Ft.call(n,r)?t:e}function M(e,t,r){var n=e[t];Ft.call(e,t)&&Le(n,r)&&(r!==Me||t in e)||(e[t]=r)}function G(e,t){for(var r=e.length;r--;)if(Le(e[r][0],t))return r;return-1}function q(e,t){return e&&ce(t,Oe(t),e)}function z(e,t,r,n,o,a,c){var s;if(n&&(s=a?n(e,o,a,c):n(e)),s!==Me)return s;if(!Ne(e))return e;var l=dr(e);if(l){if(s=fe(e),!t)return ae(e,s)}else{var d=lr(e),p=d==Ye||d==Je;if(pr(e))return J(e,t);if(d==tt||d==Pe||p&&!a){if(u(e))return a?e:{};if(s=he(p?{}:e),!t)return se(e,q(s,e))}else{if(!kt[d])return a?e:{};s=ge(e,d,z,t)}}c||(c=new D);var f=c.get(e);if(f)return f;if(c.set(e,s),!l)var h=r?le(e):Oe(e);return i(h||e,function(i,o){h&&(o=i,i=e[o]),M(s,o,z(i,t,r,n,o,e,c))}),s}function X(e){return Ne(e)?qt(e):{}}function U(e,t,r,n,i){var a=-1,c=e.length;for(r||(r=be),i||(i=[]);++a<c;){var s=e[a];t>0&&r(s)?t>1?U(s,t-1,r,n,i):o(i,s):n||(i[i.length]=s)}return i}function P(e,t,r){var n=t(e);return dr(e)?n:o(n,r(e))}function V(e){return Ot.call(e)}function K(e){if(!Ne(e)||xe(e))return!1;var t=Se(e)||u(e)?Ht:wt;return t.test(ke(e))}function $(e){if(!we(e))return Kt(e);var t=[];for(var r in Object(e))Ft.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Z(e){if(!Ne(e))return Ce(e);var t=we(e),r=[];for(var n in e)("constructor"!=n||!t&&Ft.call(e,n))&&r.push(n);return r}function Y(e,t){return t=$t(t===Me?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=$t(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var c=Array(t+1);++i<t;)c[i]=r[i];return c[t]=a,n(e,this,c)}}function J(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}function Q(e){var t=new e.constructor(e.byteLength);return new Mt(t).set(new Mt(e)),t}function ee(e,t){var r=t?Q(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function te(t,r,n){var i=r?n(l(t),!0):l(t);return a(i,e,new t.constructor)}function re(e){var t=new e.constructor(e.source,xt.exec(e));return t.lastIndex=e.lastIndex,t}function ne(e,r,n){var i=r?n(p(e),!0):p(e);return a(i,t,new e.constructor)}function ie(e){return sr?Object(sr.call(e)):{}}function oe(e,t){var r=t?Q(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function ae(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function ce(e,t,r,n){r||(r={});for(var i=-1,o=t.length;++i<o;){var a=t[i],c=n?n(r[a],e[a],a,r,e):Me;M(r,a,c===Me?e[a]:c)}return r}function se(e,t){return ce(e,ur(e),t)}function ue(e){return Y(function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:Me,a=i>2?r[2]:Me;for(o=e.length>3&&"function"==typeof o?(i--,o):Me,a&&ye(r[0],r[1],a)&&(o=3>i?Me:o,i=1),t=Object(t);++n<i;){var c=r[n];c&&e(t,c,n,o)}return t})}function le(e){return P(e,Oe,ur)}function de(e,t){var r=e.__data__;return ve(t)?r["string"==typeof t?"string":"hash"]:r.map}function pe(e,t){var r=s(e,t);return K(r)?r:Me}function fe(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&Ft.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function he(e){return"function"!=typeof e.constructor||we(e)?{}:X(Gt(e))}function ge(e,t,r,n){var i=e.constructor;switch(t){case st:return Q(e);case Ke:case $e:return new i(+e);case ut:return ee(e,n);case lt:case dt:case pt:case ft:case ht:case gt:case bt:case mt:case yt:return oe(e,n);case Qe:return te(e,n,r);case et:case ot:return new i(e);case nt:return re(e);case it:return ne(e,n,r);case at:return ie(e)}}function be(e){return dr(e)||Te(e)||!!(Ut&&e&&e[Ut])}function me(e,t){return t=null==t?Ue:t,!!t&&("number"==typeof e||Ct.test(e))&&e>-1&&e%1==0&&t>e}function ye(e,t,r){if(!Ne(r))return!1;var n=typeof t;return("number"==n?je(r)&&me(t,r.length):"string"==n&&t in r)?Le(r[t],e):!1}function ve(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function xe(e){return!!Nt&&Nt in e}function we(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||St;return e===r}function Ce(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}function ke(e){if(null!=e){try{return Bt.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function _e(e){var t=e?e.length:0;return t?U(e,1):[]}function Ae(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(ze);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a),a};return r.cache=new(Ae.Cache||E),r}function Ee(e){return z(e,!0,!0)}function Le(e,t){return e===t||e!==e&&t!==t}function Te(e){return Ie(e)&&Ft.call(e,"callee")&&(!zt.call(e,"callee")||Ot.call(e)==Pe)}function je(e){return null!=e&&De(e.length)&&!Se(e)}function Ie(e){return Be(e)&&je(e)}function Se(e){var t=Ne(e)?Ot.call(e):"";return t==Ye||t==Je}function De(e){return"number"==typeof e&&e>-1&&e%1==0&&Ue>=e}function Ne(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Be(e){return!!e&&"object"==typeof e}function Fe(e){return"string"==typeof e||!dr(e)&&Be(e)&&Ot.call(e)==ot}function Oe(e){return je(e)?R(e):$(e)}function He(e){return je(e)?R(e,!0):Z(e)}function Re(){return[]}function We(){return!1}var Me,Ge="4.14.2",qe=200,ze="Expected a function",Xe="__lodash_hash_undefined__",Ue=9007199254740991,Pe="[object Arguments]",Ve="[object Array]",Ke="[object Boolean]",$e="[object Date]",Ze="[object Error]",Ye="[object Function]",Je="[object GeneratorFunction]",Qe="[object Map]",et="[object Number]",tt="[object Object]",rt="[object Promise]",nt="[object RegExp]",it="[object Set]",ot="[object String]",at="[object Symbol]",ct="[object WeakMap]",st="[object ArrayBuffer]",ut="[object DataView]",lt="[object Float32Array]",dt="[object Float64Array]",pt="[object Int8Array]",ft="[object Int16Array]",ht="[object Int32Array]",gt="[object Uint8Array]",bt="[object Uint8ClampedArray]",mt="[object Uint16Array]",yt="[object Uint32Array]",vt=/[\\^$.*+?()[\]{}|]/g,xt=/\w*$/,wt=/^\[object .+?Constructor\]$/,Ct=/^(?:0|[1-9]\d*)$/,kt={};kt[Pe]=kt[Ve]=kt[st]=kt[ut]=kt[Ke]=kt[$e]=kt[lt]=kt[dt]=kt[pt]=kt[ft]=kt[ht]=kt[Qe]=kt[et]=kt[tt]=kt[nt]=kt[it]=kt[ot]=kt[at]=kt[gt]=kt[bt]=kt[mt]=kt[yt]=!0,kt[Ze]=kt[Ye]=kt[ct]=!1;var _t="object"==typeof global&&global&&global.Object===Object&&global,At="object"==typeof self&&self&&self.Object===Object&&self,Et=_t||At||Function("return this")(),Lt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Tt=Lt&&"object"==typeof module&&module&&!module.nodeType&&module,jt=Tt&&Tt.exports===Lt,It=Array.prototype,St=Object.prototype,Dt=Et["__core-js_shared__"],Nt=function(){var e=/[^.]+$/.exec(Dt&&Dt.keys&&Dt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Bt=Function.prototype.toString,Ft=St.hasOwnProperty,Ot=St.toString,Ht=RegExp("^"+Bt.call(Ft).replace(vt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Rt=jt?Et.Buffer:Me,Wt=Et.Symbol,Mt=Et.Uint8Array,Gt=d(Object.getPrototypeOf,Object),qt=Object.create,zt=St.propertyIsEnumerable,Xt=It.splice,Ut=Wt?Wt.isConcatSpreadable:Me,Pt=Object.getOwnPropertySymbols,Vt=Rt?Rt.isBuffer:Me,Kt=d(Object.keys,Object),$t=Math.max,Zt=pe(Et,"DataView"),Yt=pe(Et,"Map"),Jt=pe(Et,"Promise"),Qt=pe(Et,"Set"),er=pe(Et,"WeakMap"),tr=pe(Object,"create"),rr=ke(Zt),nr=ke(Yt),ir=ke(Jt),or=ke(Qt),ar=ke(er),cr=Wt?Wt.prototype:Me,sr=cr?cr.valueOf:Me;h.prototype.clear=g,h.prototype["delete"]=b,h.prototype.get=m,h.prototype.has=y,h.prototype.set=v,x.prototype.clear=w,x.prototype["delete"]=C,x.prototype.get=k,x.prototype.has=_,x.prototype.set=A,E.prototype.clear=L,E.prototype["delete"]=T,E.prototype.get=j,E.prototype.has=I,E.prototype.set=S,D.prototype.clear=N,D.prototype["delete"]=B,D.prototype.get=F,D.prototype.has=O,D.prototype.set=H;var ur=Pt?d(Pt,Object):Re,lr=V;(Zt&&lr(new Zt(new ArrayBuffer(1)))!=ut||Yt&&lr(new Yt)!=Qe||Jt&&lr(Jt.resolve())!=rt||Qt&&lr(new Qt)!=it||er&&lr(new er)!=ct)&&(lr=function(e){var t=Ot.call(e),r=t==tt?e.constructor:Me,n=r?ke(r):Me;if(n)switch(n){case rr:return ut;case nr:return Qe;case ir:return rt;case or:return it;case ar:return ct}return t}),Ae.Cache=E;var dr=Array.isArray,pr=Vt||We,fr=ue(function(e,t,r,n){ce(t,He(t),e,n)}),hr=Y(function(e){return e.push(Me,W),n(fr,Me,e)});f.assignInWith=fr,f.defaults=hr,f.flatten=_e,f.keys=Oe,f.keysIn=He,f.memoize=Ae,f.extendWith=fr,f.cloneDeep=Ee,f.eq=Le,f.isArguments=Te,f.isArray=dr,f.isArrayLike=je,f.isArrayLikeObject=Ie,f.isBuffer=pr,f.isFunction=Se,f.isLength=De,f.isObject=Ne,f.isObjectLike=Be,f.isString=Fe,f.stubArray=Re,f.stubFalse=We,f.VERSION=Ge,"function"==typeof r&&"object"==typeof r.amd&&r.amd?(Et._=f,r("lib/mscgenjs-core/lib/lodash/lodash.custom",[],function(){return f})):Tt?((Tt.exports=f)._=f,Lt._=f):Et._=f}.call(this),r("lib/mscgenjs-core/render/graphics/svgelementfactory",["./constants","./svglowlevelfactory","./geometry","../../lib/lodash/lodash.custom"],function(e,t,r,n){"use strict";function i(e,t){return e.toString()+","+t.toString()+" "}function o(e,t,r){return e+i(t,r)}function a(e,r,n,i){return s(t.createElement("path",{d:e,"class":r}),n,i)}function c(e,r){return t.createElement("polygon",{points:e,"class":r})}function s(e,r,n){var i="";return n&&(i+="fill:"+n+";"),r&&(i+="stroke:"+r+";"),t.setAttribute(e,"style",i)}function u(e,r){return t.createElement("line",{x1:e.xFrom.toString(),y1:e.yFrom.toString(),x2:e.xTo.toString(),y2:e.yTo.toString(),"class":r?r["class"]:null})}function l(t,r){var n=m.createElementNS(e.SVGNS,"a");return n.setAttributeNS(e.XLINKNS,"xlink:href",t),n.setAttributeNS(e.XLINKNS,"xlink:title",t),n.setAttributeNS(e.XLINKNS,"xlink:show","new"),n.appendChild(r),n}function d(t,r){var n=m.createElementNS(e.SVGNS,"tspan"),i=m.createTextNode(t);return n.appendChild(i),r?l(r,n):n}function p(e,r,i){var o=n.defaults(i,{"class":null,url:null,id:null,idurl:null}),a=t.createElement("text",{x:r.x.toString(),y:r.y.toString(),"class":o["class"]});if(a.appendChild(d(e,o.url)),o.id){var c=d(" ["+o.id+"]",o.idurl);c.setAttribute("style",y),a.appendChild(c)}return a}function f(t,r){var n=0;return r.indexOf("nodi")<0&&(n=t.xTo>t.xFrom?-7.5*e.LINE_WIDTH:7.5*e.LINE_WIDTH),n}function h(t,r){var n=0;return r.indexOf("nodi")<0&&r.indexOf("bidi")>-1&&(n=t.xTo>t.xFrom?7.5*e.LINE_WIDTH:-7.5*e.LINE_WIDTH),n}function g(t,n){var i=e.LINE_WIDTH,c=n?n["class"]:null,s=r.getDirection(t),u=f(t,c),l=h(t,c),d=(t.xTo-t.xFrom+u-l).toString(),p=(t.yTo-t.yFrom).toString(),g=o("l",s.signX,s.dy),b=o("l",d,p);return a(o("M",t.xFrom,t.yFrom-7.5*e.LINE_WIDTH*s.dy)+g+o("M",t.xFrom+l,t.yFrom-i)+b+o("M",t.xFrom+l,t.yFrom+i)+b+o("M",t.xTo-s.signX,t.yTo+7.5*e.LINE_WIDTH*s.dy)+g,c)}function b(e,r,n,i){return t.createElement("marker",{orient:n,id:e,"class":r,viewBox:Boolean(i)?i:"0 0 10 10",refX:"9",refY:"3",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10"})}var m={},y="vertical-align:text-top;";return y+="font-size:0.7em;text-anchor:start;",{init:function(e){m=e,t.init(e)},createSVG:function(r,n){return t.createElement("svg",{version:"1.1",id:r,"class":n,xmlns:e.SVGNS,"xmlns:xlink":e.XLINKNS,width:"0",height:"0"})},createDesc:function(e){return t.createElement("desc",{id:e})},createDefs:function(){return t.createElement("defs")},createRect:function(e,r,n,i){return s(t.createElement("rect",{width:e.width,height:e.height,x:e.x,y:e.y,"class":r}),n,i)},createRBox:function(e,r,n,i){var o=6;return s(t.createElement("rect",{width:e.width,height:e.height,x:e.x,y:e.y,rx:o,ry:o,"class":r}),n,i)},createABox:function(e,t,r,n){var i=3;return a("M"+e.x+","+(e.y+e.height/2)+"l"+i+", -"+e.height/2+"l"+(e.width-2*i)+",0l"+i+","+e.height/2+"l-"+i+","+e.height/2+"l-"+(e.width-2*i)+",0 z",t,r,n)},createNote:function(t,r,n,i){var o=Math.max(9,Math.min(4.5*e.LINE_WIDTH,t.height/2)),c=o.toString(10);return a("M"+t.x+","+t.y+"l"+(t.width-o)+",0 l0,"+c+" l"+c+",0 m-"+c+",-"+c+" l"+c+","+c+" l0,"+(t.height-o)+" l-"+t.width+",0 l0,-"+t.height+" z",r,n,i)},createEdgeRemark:function(e,t,r,n,i){var o=i?i:7;return a("M"+e.x+","+e.y+" l"+e.width+",0  l0,"+(e.height-o)+" l-"+o.toString(10)+","+o.toString(10)+" l-"+(e.width-o)+",0 ",t,r,n)},createText:p,createDiagonalText:function(e,n,i){return t.setAttributes(p(e,{x:n.width/2,y:n.height/2},{"class":i}),{transform:"rotate("+r.getDiagonalAngle(n).toString()+" "+(n.width/2).toString()+" "+(n.height/2).toString()+")"})},createLine:function(e,t){return Boolean(t)&&Boolean(t.doubleLine)?g(e,t):u(e,t)},createUTurn:function(t,r,n,c,s){var u=s?t.x+7.5*e.LINE_WIDTH:t.x;return a(o("M",t.x,-t.y)+o("C",t.x+n,t.y-7.5*e.LINE_WIDTH)+i(t.x+n,r+0)+i(u,r),c)},createGroup:function(e,r){return t.createElement("g",{id:e,"class":r})},createUse:function(r,n){var i=t.createElement("use",{x:r.x.toString(),y:r.y.toString()});return i.setAttributeNS(e.XLINKNS,"xlink:href","#"+n),i},createMarkerPath:function(e,r,n){var i=b(e,"arrow-marker","auto");return i.appendChild(t.setAttributes(a(r,"arrow-style"),{style:"stroke-dasharray:100,1;stroke:"+n||"black"})),i},createMarkerPolygon:function(e,r,n){var i=b(e,"arrow-marker","auto");return i.appendChild(t.setAttributes(c(r,"arrow-style"),{stroke:n||"black",fill:n||"black"})),i}}}),r("lib/mscgenjs-core/render/graphics/idmanager",[],function(){"use strict";var e="mscgen_js-svg-",t=e;return{setPrefix:function(r){t=e+r},get:function(e){return t+(e||"")}}}),r("lib/mscgenjs-core/render/graphics/svgutensils",["./constants","./idmanager","./svgelementfactory","./svglowlevelfactory","../../lib/lodash/lodash.custom"],function(e,t,r,n,i){"use strict";function o(e){var n=r.createSVG(e,t.get());return f.body.appendChild(n),n}function a(e){var t=f.getElementById(h);t=t?t:o(h),t.appendChild(e);var r=e.getBBox();return t.removeChild(e),r}function c(e){var t=1e5;return Math.abs(e.height)>t||Math.abs(e.width)>t?{height:0,width:0,x:0,y:0}:e}function s(e){return"function"==typeof e.getBBox?c(a(e)):{height:15,width:15,x:2,y:2}}function u(t){var r=f.createElementNS(e.SVGNS,"tspan");return r.appendChild(f.createTextNode(t)),r}function l(e){var t=n.createElement("text",{x:"0",y:"0"});return t.appendChild(u(e)),t}function d(){return s(l("ÁjyÎ9ƒ@💩")).height}function p(e){t.setPrefix(e);var r=f.getElementById(t.get());if(r){var n=f.getElementById(e);n?n.removeChild(r):f.body.removeChild(r)}}var f={},h=t.get("bboxer");return{init:function(e){f=e},removeRenderedSVGFromElement:p,getBBox:s,calculateTextHeight:i.memoize(d),webkitNamespaceBugWorkaround:function(e){return e.replace(/ xlink=/g," xmlns:xlink=","g").replace(/ href=/g," xlink:href=","g")}}}),r("lib/mscgenjs-core/render/graphics/renderutensils",[],function(){"use strict";return{scaleCanvasToWidth:function(e,t){t.scale=e/t.width,t.width*=t.scale,t.height*=t.scale,t.horizontaltransform*=t.scale,t.verticaltransform*=t.scale,t.x=0-t.horizontaltransform,t.y=0-t.verticaltransform},determineDepthCorrection:function(e,t){return e?2*(2*(e+1)*t):0},determineArcXTo:function(e,t,r){return"-x"===e?t+.75*(r-t):r}}}),r("lib/mscgenjs-core/render/graphics/csstemplates",[],function(){"use strict";return{baseTemplate:"svg.<%=id%>{font-family:Helvetica,sans-serif;font-size:<%=fontSize%>px;font-weight:normal;font-style:normal;text-decoration:none;background-color:white;stroke:black;stroke-width:<%=lineWidth%>;color:black}.<%=id%> path, .<%=id%> rect{fill:none;color:black;stroke:black}.<%=id%> .label-text-background{fill:white;stroke:white;stroke-width:0}.<%=id%> .bglayer{fill:white;stroke:white;stroke-width:0}.<%=id%> line{stroke:black}.<%=id%> line.return, .<%=id%> path.return, .<%=id%> line.comment{stroke-dasharray:5,3}.<%=id%> line.inline_expression_divider{stroke-dasharray:10,5}.<%=id%> text{color:inherit;stroke:none;text-anchor:middle}.<%=id%> text.entity-text{text-decoration:underline}.<%=id%> text.anchor-start{text-anchor:start}.<%=id%> .arrow-marker{overflow:visible}.<%=id%> .arrow-style{stroke-width:1}.<%=id%> .arcrow, .<%=id%> .arcrowomit, .<%=id%> .emphasised{stroke-linecap:butt}.<%=id%> line.arcrowomit{stroke-dasharray:2,2;}.<%=id%> .box, .<%=id%> .entity{fill:white;stroke-linejoin:round}.<%=id%> .inherit{stroke:inherit;color:inherit}.<%=id%> .inherit-fill{fill:inherit}.<%=id%> .watermark{stroke:black;color:black;fill:black;font-size:48pt;font-weight:bold;opacity:0.14}",additionalTemplates:[{name:"classic",css:".<%=id%> text.entity-text{text-decoration:none}.<%=id%> rect.entity{stroke:none;}.<%=id%> line,.<%=id%> rect,.<%=id%> path{stroke-width:1px}.<%=id%> .arrow-style{stroke-width:2;}.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{stroke-width: 1px}"},{name:"cygne",css:".<%=id%> line{stroke:#00A1DE}.<%=id%> text{fill:#005B82}.<%=id%> rect.entity,.<%=id%> rect.box,.<%=id%> path.box{fill:#00A1DE;stroke:#00A1DE}.<%=id%> text.box-text{fill:white}.<%=id%> text.entity-text{font-weight:bold;fill:white;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#E77B2F;stroke:white}.<%=id%> line.comment,.<%=id%> rect.inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> path.inline_expression_label{fill:white}"},{name:"fountainpen",css:"svg.<%=id%>{font-family:cursive;stroke-opacity:0.4;stroke-linecap:round;background-color:transparent}.<%=id%> text{fill:rgba(0,0,128,0.8)}.<%=id%> marker polygon{fill:rgba(0,0,255,0.4);stroke-linejoin:round}.<%=id%> line, .<%=id%> path, .<%=id%> rect, .<%=id%> polygon{stroke:blue !important}.<%=id%> text.entity-text{font-weight:bold;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#FFFFCC;}.<%=id%> .label-text-background{opacity:0}.<%=id%> .comment,.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{stroke:black}.<%=id%> .bglayer, .<%=id%> .entity{fill:transparent;}"},{name:"grayscaled",css:"svg.<%=id%>{filter:grayscale(1);-webkit-filter:grayscale(1);}"},{name:"inverted",css:"svg.<%=id%>{filter:invert(1);-webkit-filter:invert(1);}"},{name:"lazy",css:".<%=id%> text.entity-text{font-weight:bold;text-decoration:none;}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#FFFFCC}.<%=id%> rect.label-text-background{opacity:0.9}.<%=id%> line.comment,.<%=id%> rect.inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{stroke:grey}"},{name:"pegasse",css:".<%=id%> line{stroke:rgba(0, 43, 84, 1)}.<%=id%> text{fill:rgba(0, 43, 84, 1)}.<%=id%> rect.entity,.<%=id%> rect.box,.<%=id%> path.box{fill:rgba(0, 43, 84, 1);stroke:rgba(0, 43, 84, 1)}.<%=id%> text.box-text{fill:white}.<%=id%> text.entity-text{font-weight:bold;fill:white;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:rgba(255, 50, 0, 1);stroke:white}.<%=id%> line.comment,.<%=id%> rect.inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> path.inline_expression_label{fill:white}"}]}}),r("lib/mscgenjs-core/render/graphics/renderskeleton",["./svgelementfactory","./constants","./csstemplates"],function(e,t,r){"use strict";function n(t,r){return r.forEach(function(r){"method"===r.type?t.appendChild(e.createMarkerPolygon(r.name,r.path,r.color)):t.appendChild(e.createMarkerPath(r.name,r.path,r.color))}),t}function i(e,t){var r=p.createElement("style");return r.setAttribute("type","text/css"),r.appendChild(p.createTextNode(d(e,t))),r}function o(t,r,o){var a=e.createDefs();return a.appendChild(i(o,t)),a=n(a,r),a.appendChild(e.createGroup(t+"__defs")),a}function a(t){var r=e.createGroup(t+"__body");return r.appendChild(e.createGroup(t+"__background")),r.appendChild(e.createGroup(t+"__arcspanlayer")),r.appendChild(e.createGroup(t+"__lifelinelayer")),r.appendChild(e.createGroup(t+"__sequencelayer")),r.appendChild(e.createGroup(t+"__notelayer")),r.appendChild(e.createGroup(t+"__watermark")),r}function c(t){return e.init(t.document),t.document}function s(t,r,n,i,s){p=c(t);var l=p.getElementById(r);null===l&&(l=p.body);var d=e.createSVG(n,n);return d.appendChild(u(t,n,s.source)),d.appendChild(o(n,i,s)),d.appendChild(a(n)),l.appendChild(d),p}function u(t,r,n){var i=e.createDesc(r+"__msc_source");return Boolean(n)&&i.appendChild(t.document.createTextNode("\n\n# Generated by mscgen_js - https://sverweij.github.io/mscgen_js\n"+n)),i}function l(e){var t="",n=[];return Boolean(e)?(Boolean(e.additionalTemplate)&&(n=r.additionalTemplates.filter(function(t){return t.name===e.additionalTemplate}),n.length>0&&(t=n[0].css)),Boolean(e.styleAdditions)&&(t+=e.styleAdditions),t):""}function d(e,n){return(r.baseTemplate+l(e)).replace(/<%=fontSize%>/g,t.FONT_SIZE).replace(/<%=lineWidth%>/g,t.LINE_WIDTH).replace(/<%=id%>/g,n)}var p={};return{bootstrap:s,init:c}}),r("lib/mscgenjs-core/render/text/asttransform",[],function(){"use strict";function e(e,t){e&&t&&e.forEach(function(e){t.forEach(function(t){t(e)})})}function t(e,t,r,n){n&&n.forEach(function(n){n(r,e,t)})}function r(e,r,i){r.forEach(function(o){t(e,r,o,i),o.arcs&&n(e,o.arcs,i)})}function n(e,t,n){e&&t&&n&&t.forEach(function(t){r(e,t,n)})}return{transform:function(t,r,i){return e(t.entities,r),n(t.entities,t.arcs,i),t}}}),r("lib/mscgenjs-core/render/text/arcmappings",[],function(){"use strict";var e={"->":"rvee","<->":"rvee","=>":"normal","<=>":"normal","-x":"oinvonormal"},t={box:"box",abox:"hexagon",rbox:"box",note:"note"},r={">>":"dashed","<<>>":"dashed","..":"dashed",":>":"bold","<:>":"bold","::":"bold",rbox:"rounded"},n={"|||":"emptyarc","...":"emptyarc","---":"emptyarc","->":"directional","=>":"directional","=>>":"directional",">>":"directional",":>":"directional","-x":"directional","<-":"directional","<=":"directional","<<=":"directional","<<":"directional","<:":"directional","x-":"directional",note:"box",box:"box",abox:"box",rbox:"box","<->":"bidirectional","<=>":"bidirectional","<<=>>":"bidirectional","<<>>":"bidirectional","<:>":"bidirectional","--":"nondirectional","==":"nondirectional","..":"nondirectional","::":"nondirectional",alt:"inline_expression","else":"inline_expression",opt:"inline_expression","break":"inline_expression",par:"inline_expression",seq:"inline_expression",strict:"inline_expression",neg:"inline_expression",critical:"inline_expression",ignore:"inline_expression",consider:"inline_expression",assert:"inline_expression",loop:"inline_expression",ref:"inline_expression",exc:"inline_expression"},i={"<-":"->","<=":"=>","<<=":"=>>","<<":">>","<:":":>","x-":"-x"},o={"|||":"empty-row","...":"omitted-row","---":"comment-row","->":"signal","=>":"method","=>>":"callback",">>":"return",":>":"emphasised","-x":"lost","<-":"signal","<=":"method","<<=":"callback","<<":"return","<:":"emphasised","x-":"lost","<->":"signal","<=>":"method","<<=>>":"callback","<<>>":"return","<:>":"emphasised","--":"signal","==":"method","..":"return","::":"emphasised"},a={"|||":"empty","...":"empty","---":"empty","->":"directional","=>":"directional","=>>":"directional",">>":"directional",":>":"directional","-x":"directional","<-":"directional","<=":"directional","<<=":"directional","<<":"directional","<:":"directional","x-":"directional",note:"box",box:"box",abox:"box",rbox:"box","<->":"bidirectional","<=>":"bidirectional","<<=>>":"bidirectional","<<>>":"bidirectional","<:>":"bidirectional","--":"nondirectional","==":"nondirectional","..":"nondirectional","::":"nondirectional",alt:"inline_expression","else":"inline_expression",opt:"inline_expression","break":"inline_expression",par:"inline_expression",seq:"inline_expression",strict:"inline_expression",neg:"inline_expression",critical:"inline_expression",ignore:"inline_expression",consider:"inline_expression",assert:"inline_expression",loop:"inline_expression",ref:"inline_expression",exc:"inline_expression"};return{getArrow:function(t){return e[t]},getShape:function(e){return t[e]},getStyle:function(e){return r[e]},getAggregate:function(e){return n[e]},getClass:function(e){return o[e]||e},getAggregateClass:function(e){return a[e]||e},getNormalizedKind:function(e){return i[e]||e}}}),r("lib/mscgenjs-core/render/text/textutensils",[],function(){"use strict";return{wrap:function(e,t){for(var r=0,n=[],i=0,o=0,a=0,c=0,s=e.replace(/[\t\n]+/g," ").replace(/\\n/g,"\n");c<=s.length;)c>=s.length?n.push(s.substring(i,c)):"\n"===s[c]?(r=0,a=c,n.push(s.substring(i,a)),i=a+1):r++>=t&&(a=s.substring(0,c).lastIndexOf(" "),-1===a||i>a?(r=1,a=c,o=c):(r=0,o=a+1),n.push(s.substring(i,a)),i=o),c++;return n},unescapeString:function(e){return e.replace(/\\"/g,'"')},escapeString:function(e){return e.replace(/\\"/g,'"').replace(/"/g,'\\"')}}}),r("lib/mscgenjs-core/render/text/flatten",["./asttransform","./arcmappings","../../lib/lodash/lodash.custom","./textutensils"],function(e,t,r,n){"use strict";function i(e){"undefined"==typeof e.label&&(e.label=e.name)}function o(e){Boolean(e.label)&&(e.label=n.unescapeString(e.label)),Boolean(e.id)&&(e.id=n.unescapeString(e.id))}function a(e){e.label=Boolean(e.label)?e.label:""}function c(e){if(e.kind&&t.getNormalizedKind(e.kind)!==e.kind){e.kind=t.getNormalizedKind(e.kind);var r=e.from;e.from=e.to,e.to=r}return e}function s(e,t){!e.linecolor&&t.arclinecolor&&(e.linecolor=t.arclinecolor),!e.textcolor&&t.arctextcolor&&(e.textcolor=t.arctextcolor),!e.textbgcolor&&t.arctextbgcolor&&(e.textbgcolor=t.arctextbgcolor)}function u(e,t){if(e&&e.from){var r=t.filter(function(t){return t.name===e.from});r.length>0&&s(e,r[0])}}function l(e){return e.arcs.reduce(function(e,t){return e+(Boolean(t[0].arcs)?l(t[0])+1:0)},e.arcs.length)}function d(e,n,i,o){var a=[],c=[],u=[];return e.forEach(function(e){if("inline_expression"===t.getAggregate(e.kind)){if(e.depth=n,Boolean(e.arcs)){var a=r.cloneDeep(e);a.numberofrows=l(a),delete a.arcs,c.push(a),e.arcs.forEach(function(e){u=u.concat(d(e,n+1,a.from,a.to)),e.forEach(function(e){s(e,a)})}),n>g&&(g=n)}else c.push(e);u.push([{kind:"|||",from:e.from,to:e.to}])}else i&&o&&"emptyarc"===t.getAggregate(e.kind)&&(e.from=i,e.to=o,e.depth=n),c.push(e)}),a.push(c),a.concat(u)}function p(e){var t={};return g=0,Boolean(e.options)&&(t.options=r.cloneDeep(e.options)),Boolean(e.entities)&&(t.entities=r.cloneDeep(e.entities)),t.arcs=[],e&&e.arcs&&e.arcs.forEach(function(e){d(e,0).forEach(function(e){t.arcs.push(e)})}),t.depth=g+1,t}function f(e,t){return e.filter(function(e){return t.from!==e.name}).map(function(e){return t.to=e.name,r.cloneDeep(t)})}function h(e){if(e.entities&&e.arcs){var t=[],n={};e.arcs.forEach(function(i,o){i.filter(function(e){return"*"===e.to}).forEach(function(a,c){n=r.cloneDeep(a),delete e.arcs[o][c],t=f(e.entities,n),i[c]=t.shift(),e.arcs[o]=i.concat(t)})})}return e}var g=0;return{swapRTLArc:c,unwind:p,explodeBroadcasts:h,flatten:function(t){return e.transform(p(t),[i,o],[c,u,o,a])},dotFlatten:function(t){return h(e.transform(t,[i],[c,u]))}}}),r("lib/mscgenjs-core/render/graphics/rowmemory",[],function(){"use strict";function e(e){return t[e]?t[e]:{y:r+1.5*n+e*n,height:n}}var t=[],r=0,n=0;return{clear:function(e,i){t=[],r=e,n=i},get:e,getLast:function(){return e(t.length-1)},set:function(r,n){var i=e(r-1);t[r]={y:i.y+(i.height+n)/2,height:n}}}}),r("lib/mscgenjs-core/render/graphics/markermanager",["../../lib/lodash/lodash.custom","../text/arcmappings"],function(e,t){"use strict";function r(e,t,r){return t&&r&&["<->","->"].indexOf(e)>-1?r>t?"signal":"signal-u":""}function n(e,t,r){return"<->"===e&&r>=t?"signal-l":"signal-lu"}function i(e,t,i,o,a){var c=[];return u[t]&&u[t].attributes&&(c=u[t].attributes.map(function(c){return{name:c.name,value:c.value.replace(/\{\{signal-marker-end\}\}/g,r(t,o,a)).replace(/\{\{signal-marker-start\}\}/g,n(t,o,a)).replace(/\{\{id\}\}/g,e).replace(/\{\{color\}\}/g,i||"black")}})),c}function o(e,r){return u[t.getNormalizedKind(e)].marker.name+(Boolean(r)?" "+r:" black")}function a(e,r){function n(t){a(e,t)}return Array.isArray(r)&&r.forEach(n),r.arcs&&r.arcs.forEach(n),r.kind&&u[t.getNormalizedKind(r.kind)]&&u[t.getNormalizedKind(r.kind)].marker&&e.indexOf(o(r.kind,r.linecolor))<0&&e.push(o(r.kind,r.linecolor)),e}function c(e){return{kind:e.split(" ")[0],color:e.split(" ")[1]}}function s(e){return e.arcs.reduce(a,[]).sort().map(c)}var u={"->":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}{{signal-marker-end}}-{{color}})"}],marker:{name:"signal"}},"<->":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}{{signal-marker-end}}-{{color}})"},{name:"marker-start",value:"url(#{{id}}{{signal-marker-start}}-{{color}})"}],marker:{name:"signal"}},"=>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"}],marker:{name:"callback",end:""}},"<<=>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"},{name:"marker-start",value:"url(#{{id}}callback-l-{{color}})"}],marker:{name:"callback",end:"",start:"-l"}},">>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"}],marker:{name:"callback",end:""}},"<<>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"},{name:"marker-start",value:"url(#{{id}}callback-l-{{color}})"}],marker:{name:"callback",end:"",start:"-l"}},"..":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"--":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"==":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"::":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"=>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"}],marker:{name:"method",end:""}},"<=>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"},{name:"marker-start",value:"url(#{{id}}method-l-{{color}})"
}],marker:{name:"method",end:"",start:"-l"}},":>":{attributes:[{name:"style",value:"stroke:{{color}};"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"}],marker:{name:"method",end:""}},"<:>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"},{name:"marker-start",value:"url(#{{id}}method-l-{{color}})"}],marker:{name:"method",end:"",start:"-l"}},"-x":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}lost-{{color}})"}],marker:{name:"lost",end:""}}},l={signal:{variants:[{name:"",path:"M9,3 l-8, 2"},{name:"-u",path:"M9,3 l-8,-2"},{name:"-l",path:"M9,3 l 8, 2"},{name:"-lu",path:"M9,3 l 8,-2"}]},method:{variants:[{name:"",path:"1,1  9,3  1,5"},{name:"-l",path:"17,1 9,3 17,5"}]},callback:{variants:[{name:"",path:"M 1,1 l 8,2 l-8,2"},{name:"-l",path:"M17,1 l-8,2 l 8,2"}]},lost:{variants:[{name:"",path:"M7,0 l5,6 M7,6 l5,-6"}]}};return{getAttributes:i,getMarkerDefs:function(t,r){return e.flatten(s(r).map(function(e){return l[e.kind].variants.map(function(r){return{name:t+e.kind+r.name+"-"+e.color,path:r.path,color:e.color,type:e.kind}})}))}}}),r("lib/mscgenjs-core/render/graphics/renderlabels",["./svgelementfactory","./svgutensils","./constants","../text/textutensils","../text/arcmappings"],function(e,t,r,n,i){"use strict";function o(e,t){t&&e.setAttribute("style","fill:"+t+";")}function a(e,t,r){o(e,t&&!r?"blue":r)}function c(r,n){var i=e.createRect(t.getBBox(r),"label-text-background");return n&&i.setAttribute("style","fill:"+n+"; stroke:"+n+";"),i}function s(t,r,n,i,o,a){var c={};return c=0===t?e.createText(r,{x:n,y:i},{"class":o,url:a.url,id:a.id,idurl:a.idurl}):e.createText(r,{x:n,y:i},{"class":o,url:a.url})}function u(e,t,r){var n=t||e,o=i.getClass(n),a=i.getAggregateClass(n);return o===a?o+r:a+r+o+r}function l(e,n,i,c,l,d){var p=i+(l+.25)*t.calculateTextHeight(),f="";f=u(c.kind,d&&d.kind,"-text "),d&&(d.alignLeft&&(f+="anchor-start "),d.alignAround&&(p=i+(l+.25)*(t.calculateTextHeight()+r.LINE_WIDTH)));var h=s(l,e,n,p,f,c);return o(h,c.textcolor),a(h,c.url,c.textcolor),h}function d(n,i,o,a){var s=e.createGroup(a);if(n.label){var u=i.x+i.width/2,d=f(n.label,n.kind,i.width,r.FONT_SIZE,o?o.wordWrapArcs:!1),p={};o&&o.alignAbove&&d.forEach(function(){d.push("")});var h=i.y-(d.length-1)/2*(t.calculateTextHeight()+1);o&&o.alignAround&&(1===d.length&&d.push(""),h=i.y-(d.length-1)/2*(t.calculateTextHeight()+r.LINE_WIDTH+1)),d.forEach(function(e,t){""!==e&&(p=l(e,u,h,n,t,o),o&&o.ownBackground&&s.appendChild(c(p,n.textbgcolor)),s.appendChild(p)),h++})}return s}function p(e,t){var r=Math.abs(e),n=12;return 160>=r?r/(t/n*8):320>=r?r/(t/n*6.4):480>=r?r/(t/n*5.9):r/(t/n*5.6)}function f(e,t,r,o,a){return"box"===i.getAggregate(t)||"undefined"==typeof t||a?n.wrap(e,p(r,o)):e.split("\\n")}return{createLabel:d,splitLabel:f}}),r("lib/mscgenjs-core/render/graphics/entities",["./renderlabels","./constants"],function(e,t){"use strict";function r(e){return c[e]}var n=160,i=100,o=34,a={interEntitySpacing:n,height:o,width:i},c={};return{init:function(e){a.interEntitySpacing=n,a.height=o,a.width=i,e&&(a.interEntitySpacing=e*n,a.width=e*i),c={}},getX:r,setX:function(e,t){c[e.name]=t+a.width/2},getOAndD:function(e,t){return{from:r(r(e)<r(t)?e:t),to:r(r(t)>r(e)?t:e)}},setHeight:function(e){a.height=e},getDims:function(){return a},getNoEntityLines:function(r){return e.splitLabel(r,"box",a.width,t.FONT_SIZE).length}}}),r("lib/mscgenjs-core/render/graphics/renderast",["./svgelementfactory","./svglowlevelfactory","./svgutensils","./renderutensils","./renderskeleton","../text/flatten","../text/arcmappings","./rowmemory","./idmanager","./markermanager","./entities","./renderlabels","./constants","../../lib/lodash/lodash.custom"],function(e,t,r,n,i,o,a,c,s,u,l,d,p,f){"use strict";function h(e,t,n,i){var a=Object.seal(o.flatten(e)),c=i||{};c=f.defaults(c,{source:null,styleAdditions:null,mirrorEntitiesOnBottom:!1}),g(a,t,n,c),b(a),m(a);var s=t.document.getElementById(n);return s?r.webkitNamespaceBugWorkaround(s.innerHTML):r.webkitNamespaceBugWorkaround(t.document.body.innerHTML)}function g(e,t,n,o){s.setPrefix(n),Z.document=i.bootstrap(t,n,s.get(),u.getMarkerDefs(s.get(),e),o),Z.mirrorEntitiesOnBottom=Boolean(o.mirrorEntitiesOnBottom),r.init(Z.document),Z.layer=y(Z.document),Z.maxDepth=e.depth,x(Z,e.options)}function b(e){j(e.entities),c.clear(l.getDims().height,Z.arcRowHeight),N(e.arcs,e.entities),Z.mirrorEntitiesOnBottom&&T()}function m(e){var t=w(e);C(t),_(e.options,t),A(t)}function y(e){return{defs:e.getElementById(s.get("__defs")),lifeline:e.getElementById(s.get("__lifelinelayer")),sequence:e.getElementById(s.get("__sequencelayer")),notes:e.getElementById(s.get("__notelayer")),inline:e.getElementById(s.get("__arcspanlayer")),watermark:e.getElementById(s.get("__watermark"))}}function v(e,t){e.arcRowHeight=K,e.arcGradient=$,e.wordWrapArcs=!1,t&&(t.arcgradient&&(e.arcRowHeight=parseInt(t.arcgradient,10)+K,e.arcGradient=parseInt(t.arcgradient,10)+$),e.wordWrapArcs=Boolean(t.wordwraparcs))}function x(e,t){l.init(t&&t.hscale),v(e,t)}function w(e){var t=n.determineDepthCorrection(e.depth,p.LINE_WIDTH),r=c.getLast(),i={width:e.entities.length*l.getDims().interEntitySpacing+t,height:Boolean(Z.mirrorEntitiesOnBottom)?2*l.getDims().height+r.y+r.height+2*V:r.y+r.height/2+2*V,horizontaltransform:(l.getDims().interEntitySpacing+t-l.getDims().width)/2,autoscale:!!e.options&&!!e.options.width&&"auto"===e.options.width,verticaltransform:V,scale:1};return i.x=0-i.horizontaltransform,i.y=0-i.verticaltransform,i}function C(t){Z.document.getElementById(s.get("__background")).appendChild(e.createRect(t,"bglayer"))}function k(t,r){Z.layer.watermark.appendChild(e.createDiagonalText(t,r,"watermark"))}function _(e,t){e&&(e.watermark&&k(e.watermark,t),e.width&&"auto"!==e.width&&n.scaleCanvasToWidth(e.width,t))}function A(e){var r=Z.document.getElementById(s.get()),n=Z.document.getElementById(s.get("__body"));n.setAttribute("transform","translate("+e.horizontaltransform+","+e.verticaltransform+") scale("+e.scale+","+e.scale+")"),e.autoscale&&e.autoscale===!0?t.setAttributes(r,{width:"100%",height:"100%",viewBox:"0 0 "+e.width.toString()+" "+e.height.toString()}):t.setAttributes(r,{width:e.width.toString(),height:e.height.toString()})}function E(e){var t=e[0],n=2;return e.forEach(function(e){var r=l.getNoEntityLines(e.label);r>n&&(n=r,t=e)}),n>2?Math.max(l.getDims().height,r.getBBox(L(t)).height):l.getDims().height}function L(t,r){var n=e.createGroup(s.get(t.name)),i=l.getDims();return i.x=r?r:0,n.appendChild(e.createRect(i,"entity",t.linecolor,t.textbgcolor)),n.appendChild(d.createLabel(t,{x:i.x,y:i.height/2,width:i.width},{kind:"entity"})),n}function T(){var t=c.getLast().y+(c.getLast().height+Z.arcRowHeight)/2;Z.layer.lifeline.appendChild(e.createUse({x:0,y:t},s.get("arcrow"))),Z.layer.sequence.appendChild(e.createUse({x:0,y:t+Z.arcRowHeight/2},s.get("entities")))}function j(t){var r=0,n=e.createGroup(s.get("entities"));t&&(l.setHeight(E(t)+2*p.LINE_WIDTH),t.forEach(function(e){n.appendChild(L(e,r)),l.setX(e,r),r+=l.getDims().interEntitySpacing}),Z.layer.defs.appendChild(n),Z.layer.sequence.appendChild(e.createUse({x:0,y:0},s.get("entities")))),Z.arcEndX=r-l.getDims().interEntitySpacing+l.getDims().width}function I(e,t,r,n){var i=0,o=e.label,a=l.getX(e.from);e.label="",t.forEach(function(t,o){t.name!==e.from&&(i=l.getX(t.name),Z.layer.defs.appendChild(q(r+"bc"+o,e,a,i)),n.push({id:r+"bc"+o,layer:Z.layer.sequence}))}),e.label=o}function S(e,t,r,n){var i={};return e.from&&e.to&&("*"===e.to?(I(e,t,r,n),i=d.createLabel(e,{x:0,y:0,width:Z.arcEndX},{alignAround:!0,ownBackground:!0,wordWrapArcs:Z.wordWrapArcs},r+"_lbl"),n.push({id:r+"_lbl",layer:Z.layer.sequence})):(i=q(r,e,l.getX(e.from),l.getX(e.to)),n.push({id:r,layer:Z.layer.sequence}))),i}function D(t,n,i){var o="arcrow",u=[];t.forEach(function(e,t){var d=s.get(n.toString()+"_"+t.toString()),f={};switch(a.getAggregate(e.kind)){case"emptyarc":f=W(e,d),"..."===e.kind&&(o="arcrowomit"),u.push({id:d,layer:Z.layer.sequence});break;case"box":f=P(d,l.getOAndD(e.from,e.to),e),u.push({id:d,layer:Z.layer.notes});break;case"inline_expression":f=B(d+"_label",e),u.push({id:d+"_label",layer:Z.layer.notes}),Y.push({id:d,arc:e,rownum:n});break;default:f=S(e,i,d,u)}c.set(n,Math.max(c.get(n).height,r.getBBox(f).height+2*p.LINE_WIDTH)),Z.layer.defs.appendChild(f)});var d="arcrow_"+n.toString();Z.layer.defs.appendChild(H(i,o,c.get(n).height,s.get(d))),Z.layer.lifeline.appendChild(e.createUse({x:0,y:c.get(n).y},s.get(d))),u.forEach(function(t){t.layer.appendChild(e.createUse({x:0,y:c.get(n).y},t.id))})}function N(t,r){if(Y=[],Z.layer.defs.appendChild(H(r,"arcrow",null,s.get("arcrow"))),Z.layer.lifeline.appendChild(e.createUse({x:0,y:c.get(-1).y},s.get("arcrow"))),t){for(var n=0;n<t.length;n++)D(t[n],n,r);F(Y)}}function B(t,n){var i=l.getOAndD(n.from,n.to),o=7,a=2*Z.maxDepth*p.LINE_WIDTH,c=i.to-i.from+(l.getDims().interEntitySpacing-2*p.LINE_WIDTH)-o-p.LINE_WIDTH,s=i.from-(l.getDims().interEntitySpacing-3*p.LINE_WIDTH-a)/2-2*(Z.maxDepth-n.depth)*p.LINE_WIDTH,u=e.createGroup(t);n.label=n.kind+(n.label?": "+n.label:"");var f=d.createLabel(n,{x:s+p.LINE_WIDTH-c/2,y:Z.arcRowHeight/4,width:c},{alignLeft:!0,ownBackground:!1,wordWrapArcs:Z.wordWrapArcs}),h=r.getBBox(f),g=Math.max(h.height+2*p.LINE_WIDTH,Z.arcRowHeight/2-2*p.LINE_WIDTH),b=Math.min(h.width+2*p.LINE_WIDTH,c),m=e.createEdgeRemark({width:b-p.LINE_WIDTH+o,height:g,x:s,y:0},"box inline_expression_label",n.linecolor,n.textbgcolor,o);return u.appendChild(m),u.appendChild(f),u}function F(t){t.forEach(function(t){Z.layer.defs.appendChild(O(t)),Z.layer.inline.appendChild(e.createUse({x:0,y:c.get(t.rownum).y},t.id))})}function O(e){var t=c.get(e.rownum).y,r=c.get(e.rownum+e.arc.numberofrows+1).y,n=r-t;return e.arc.label="",U(e.id,l.getOAndD(e.arc.from,e.arc.to),e.arc,n)}function H(t,r,n,i){i||(i=r),(!n||n<Z.arcRowHeight)&&(n=Z.arcRowHeight);var o=e.createGroup(i);return t.forEach(function(t){var i=e.createLine({xFrom:l.getX(t.name),yFrom:0-n/2,xTo:l.getX(t.name),yTo:n/2},{"class":r});t.linecolor&&i.setAttribute("style","stroke:"+t.linecolor+";"),o.appendChild(i)}),o}function R(t,r,n,i,o){var c=2*(Z.arcRowHeight/5),d=l.getDims().interEntitySpacing/2,f={},h="arc "+a.getAggregateClass(t)+" "+a.getClass(t);if(i){f=e.createGroup();var g=e.createUTurn({x:r,y:c/2},n+c-2*p.LINE_WIDTH,d-2*p.LINE_WIDTH,h,"::"!==t),b=e.createUTurn({x:r,y:c/2},n+c-p.LINE_WIDTH,d),m=e.createUTurn({x:r,y:c/2},n+c,d,h,"::"!==t);Boolean(o)&&g.setAttribute("style","stroke:"+o),u.getAttributes(s.get(),t,o,r,r).forEach(function(e){b.setAttribute(e.name,e.value)}),b.setAttribute("style","stroke:transparent;"),Boolean(o)&&m.setAttribute("style","stroke:"+o),f.appendChild(g),f.appendChild(m),f.appendChild(b),f.setAttribute("class",h)}else f=e.createUTurn({x:r,y:c/2},n+c,d,h,"-x"===t),u.getAttributes(s.get(),t,o,r,r).forEach(function(e){f.setAttribute(e.name,e.value)});return f}function W(e,t){return"---"===e.kind?X(t,e,l.getOAndD(e.from,e.to)):z(t,e,l.getOAndD(e.from,e.to))}function M(e){return e.arcskip?e.arcskip*Z.arcRowHeight:0}function G(e){return"<:>"===e?"bidi ":"::"===e?"nodi ":""}function q(t,r,i,o){var c=e.createGroup(t),f="arc ";f+=G(r.kind),f+=a.getAggregateClass(r.kind)+" "+a.getClass(r.kind);var h=[":>","::","<:>"].indexOf(r.kind)>-1,g=M(r),b=0===g?Z.arcGradient:g;if(o=n.determineArcXTo(r.kind,i,o),i===o){c.appendChild(R(r.kind,i,g,h,r.linecolor));var m=2*l.getDims().interEntitySpacing/3;c.appendChild(d.createLabel(r,{x:i+1.5*p.LINE_WIDTH-m/2,y:0-Z.arcRowHeight/5-p.LINE_WIDTH/2,width:m},{alignLeft:!0,alignAbove:!0,ownBackground:!0,wordWrapArcs:Z.wordWrapArcs}))}else{var y=e.createLine({xFrom:i,yFrom:0,xTo:o,yTo:b},{"class":f,doubleLine:h});u.getAttributes(s.get(),r.kind,r.linecolor,i,o).forEach(function(e){y.setAttribute(e.name,e.value)}),c.appendChild(y),c.appendChild(d.createLabel(r,{x:i,y:0,width:o-i},{alignAround:!0,ownBackground:!0,wordWrapArcs:Z.wordWrapArcs}))}return c}function z(t,r,n){var i=0,o=Z.arcEndX,a=e.createGroup(t);return r.from&&r.to&&(i=n.from,o=n.to-n.from),a.appendChild(d.createLabel(r,{x:i,y:0,width:o},{ownBackground:!0,wordWrapArcs:Z.wordWrapArcs},t+"_lbl")),a}function X(t,r,n){var i=0,o=Z.arcEndX,a="comment",c=e.createGroup(t);if(r.from&&r.to){var s=1*Z.maxDepth*p.LINE_WIDTH,u=2*(Z.maxDepth-r.depth)*p.LINE_WIDTH;i=n.from-(l.getDims().interEntitySpacing+2*p.LINE_WIDTH)/2-(u-s),o=n.to+(l.getDims().interEntitySpacing+2*p.LINE_WIDTH)/2+(u-s),a="inline_expression_divider"}var d=e.createLine({xFrom:i,yFrom:0,xTo:o,yTo:0},{"class":a});return c.appendChild(d),c.appendChild(z(t+"_txt",r,n)),r.linecolor&&d.setAttribute("style","stroke:"+r.linecolor+";"),c}function U(t,r,n,i){var o=2*Z.maxDepth*p.LINE_WIDTH,a=r.to-r.from+l.getDims().interEntitySpacing-2*p.LINE_WIDTH-o,c=r.from-(l.getDims().interEntitySpacing-2*p.LINE_WIDTH-o)/2,s=e.createGroup(t),u=2*(Z.maxDepth-n.depth)*p.LINE_WIDTH;return s.appendChild(e.createRect({width:a+2*u,height:i?i:Z.arcRowHeight-2*p.LINE_WIDTH,x:c-u,y:0},"box inline_expression "+n.kind,n.linecolor,n.textbgcolor)),s}function P(t,n,i){var o=2*Z.maxDepth*p.LINE_WIDTH,a=n.to-n.from+l.getDims().interEntitySpacing-2*p.LINE_WIDTH-o,c=n.from-(l.getDims().interEntitySpacing-2*p.LINE_WIDTH-o)/2,s=e.createGroup(t),u={},f=d.createLabel(i,{x:c,y:0,width:a}),h=r.getBBox(f),g=Math.max(h.height+2*p.LINE_WIDTH,Z.arcRowHeight-2*p.LINE_WIDTH),b={width:a,height:g,x:c,y:0-g/2};switch(i.kind){case"rbox":u=e.createRBox(b,"box rbox",i.linecolor,i.textbgcolor);break;case"abox":u=e.createABox(b,"box abox",i.linecolor,i.textbgcolor);break;case"note":u=e.createNote(b,"box note",i.linecolor,i.textbgcolor);break;default:u=e.createRect(b,"box",i.linecolor,i.textbgcolor)}return s.appendChild(u),s.appendChild(f),s}var V=3,K=38,$=0,Z=Object.seal({arcRowHeight:K,arcGradient:$,arcEndX:0,wordWrapArcs:!1,mirrorEntitiesOnBottom:!1,maxDepth:0,document:{},layer:{defs:{},lifeline:{},sequence:{},notes:{},inline:{},watermark:{}}}),Y=[];return{clean:function(e,t){Z.document=i.init(t),r.init(Z.document),r.removeRenderedSVGFromElement(e)},renderAST:function(e,t,r,n,i){return h(e,n,r,{source:t,styleAdditions:i})},renderASTNew:h}}),r("utl/exporter",[],function(){"use strict";function e(e,t,r){return e.pathname+"?lang="+r+"&msc="+encodeURIComponent(t)}function t(t,n,i){return e(t,n,i).length<r}var r=4094;return{toLocationString:function(r,n,i){var o="# source too long for an URL";return t(r,n,i)&&(o=n),e(r,o,i)}}}),r("embedding/config",[],function(){"use strict";function e(e,t){Object.getOwnPropertyNames(t).forEach(function(r){e[r]=t[r]})}var t={defaultLanguage:"mscgen",parentElementPrefix:"mscgen_js-parent_",clickable:!1,clickURL:"https://sverweij.github.io/mscgen_js/",loadFromSrcAttribute:!1};return{getConfig:function(){return"undefined"!=typeof mscgen_js_config&&mscgen_js_config&&"object"==typeof mscgen_js_config&&e(t,mscgen_js_config),t}}}),r("utl/tpl",[],function(){"use strict";return{applyTemplate:function(e,t){var r=e;return t&&Object.keys(t).forEach(function(e){r=r.replace(new RegExp("{"+e+"}","g"),t[e])}),r}}}),r("embedding/error-rendering",["../utl/tpl"],function(e){"use strict";function t(e,t){for(var r=e.toString(),n=t-r.length,i=0;n>i;i++)r=" "+r;return r}function r(e,r){return t(r,3)+" "+e}function n(t,r){return t.split("").reduce(function(t,n,o){return o===r?t+e.applyTemplate(s,{"char":i(n)}):t+i(n)},"")}function i(e){return e.replace(/</g,"&lt;")}var o="<pre><div style='color: #d00'># ERROR on line {line}, column {col} - {message}</div>",a="<pre><div style='color: #d00'># ERROR {message}</div>",c="<mark>{line}\n</mark>",s="<span style='text-decoration:underline'>{char}</span>";return{formatNumber:t,deHTMLize:i,renderError:function(t,s,u){var l=Boolean(s)?e.applyTemplate(o,{message:u,line:s.start.line,col:s.start.column}):e.applyTemplate(a,{message:u});return t.split("\n").reduce(function(t,o,a){return s&&a===s.start.line-1?t+e.applyTemplate(c,{line:r(n(o,s.start.column-1),a+1)}):t+i(r(o,a+1))+"\n"},l)+"</pre>"}}}),r("utl/domutl",[],function(){"use strict";return{ajax:function(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(e){e.target.readyState===XMLHttpRequest.DONE&&(200===n.status?t(e):r(e))},n.open("GET",e),n.responseType="text";try{n.send()}catch(i){r(i)}}}}),t(["./lib/mscgenjs-core/parse/xuparser","./lib/mscgenjs-core/parse/msgennyparser","./lib/mscgenjs-core/render/graphics/renderast","./utl/exporter","./embedding/config","./embedding/error-rendering","./utl/domutl","./utl/tpl"],function(e,t,r,n,i,o,a,c){"use strict";function s(){u();var e=document.getElementsByClassName("mscgen_js");l(e,0),l(document.getElementsByTagName("mscgen"),e.length)}function u(){for(var e=document.scripts,t=0;t<e.length;t++)E[e[t].type]&&!e[t].hasAttribute("data-renderedby")&&(e[t].insertAdjacentHTML("afterend",c.applyTemplate(C,{src:e[t].src?c.applyTemplate(k,{src:e[t].src}):"",lang:E[e[t].type]||i.getConfig().defaultLanguage,msc:e[t].textContent.replace(/</g,"&lt;"),mirrorEntities:y(e[t])?"data-mirror-entities='true'":"",namedStyle:v(e[t])})),e[t].setAttribute("data-renderedby","mscgen_js"))}function l(e,t){for(var r=0;r<e.length;r++)d(e[r],t+r)}function d(e,t){e.hasAttribute("data-renderedby")||f(e,t)}function p(e,t){e.innerHTML=c.applyTemplate("<div style='color: #d00'>{string}</div>",{string:t})}function f(e,t){b(e,t),e.setAttribute("data-renderedby","mscgen_js"),i.getConfig().loadFromSrcAttribute&&e.getAttribute("data-src")?a.ajax(e.getAttribute("data-src"),function(t){h(e,t.target.response)},function(){p(e,c.applyTemplate(_,{url:e.getAttribute("data-src")}))}):!i.getConfig().loadFromSrcAttribute&&e.getAttribute("data-src")?p(e,c.applyTemplate(A,{url:e.getAttribute("data-src")})):h(e,e.textContent)}function h(e,t){var r=m(e),n=x(t,r);n.entities?w(n,e.id,t,r,y(e),v(e)):e.innerHTML=o.renderError(t,n.location,n.message)}function g(e,t,r){var o={pathname:"index.html"},a=document.createElement("a");return a.setAttribute("href",i.getConfig().clickURL+n.toLocationString(o,e,t)),a.setAttribute("id",r+"link"),a.setAttribute("style","text-decoration: none;"),a.setAttribute("title","click to edit in the mscgen_js interpreter"),a}function b(e,t){e.id||(e.id=i.getConfig().parentElementPrefix+t.toString())}function m(e){var t=e.getAttribute("data-language");return t||(t=i.getConfig().defaultLanguage),t}function y(e){var t=e.getAttribute("data-mirror-entities");return t&&"true"===t?!0:!1}function v(e){return e.getAttribute("data-named-style")}function x(r,n){var i={};try{i="msgenny"===n?t.parse(r):"json"===n?JSON.parse(r):e.parse(r)}catch(o){return o}return i}function w(e,t,n,o,a,c){var s=document.getElementById(t);s.innerHTML="",!0===i.getConfig().clickable&&(s.appendChild(g(n,o,t)),t+="link"),r.clean(t,window),r.renderASTNew(e,window,t,{source:n,additionalTemplate:c,mirrorEntitiesOnBottom:a})}var C="<span class='mscgen_js' {src} data-language='{lang}' data-named-style='{namedStyle}' {mirrorEntities}>{msc}<span>",k="data-src='{src}' ",_="ERROR: Could not find or open the URL '{url}' specified in the <code>data-src</code> attribute.",A="ERROR: Won't load the chart specified in <code>data-src='{url}'</code>, because loading from separate files is switched off in the mscgen_js configuration. <br><br>See <a href='https://sverweij.github.io/mscgen_js/embed.html#loading-from-separate-files'>Loading charts from separate files</a> in the mscgen_js embedding guide how to enable it.",E={"text/x-mscgen":"mscgen","text/x-msgenny":"msgenny","text/x-xu":"xu"};s()}),r("mscgen-inpage",function(){})}();